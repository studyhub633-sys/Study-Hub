import{c as L,u as K,m as X,n as ee,r as u,j as e,L as re,B as h,a as y,G as se,E as S}from"./index-7wMNJNZJ.js";import{A as I}from"./AppLayout-Cb4f3Rcb.js";import{D as te,b as ae,c as ie,d as ce,e as le}from"./dialog-CGZvDN6x.js";import{I as f}from"./input-CURGwIC-.js";import{L as x}from"./label-4_8C0ZIE.js";import{P as ne}from"./progress-REWFbYMv.js";import{S as z,a as B,b as U,c as W,d as R}from"./select-Do0TjdJZ.js";import{T as oe}from"./textarea-DYv1Zddw.js";import{P as E}from"./plus-BgtP8iNg.js";import{C as de}from"./clock-BKqJKRJR.js";import{C as me}from"./calendar-D5Qbqv8w.js";import{T as _}from"./trophy-CIdFvAMW.js";import{A as N,C as ue}from"./sheet-D4eoD1m7.js";import{U as xe}from"./users-BPQvDXIc.js";import{B as he}from"./briefcase-NAdPM7iO.js";import{S as M}from"./square-pen-CLPrXBHy.js";import{T as O}from"./trash-2-CodGuS8N.js";import"./AnimatedLogoIcon-DY32PEux.js";import"./sun-CnDoiXzg.js";import"./index-BdQq_4o_.js";import"./index-8ugP4A3I.js";import"./chevron-down-CjDqse4M.js";const pe=L("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);const ge=L("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const fe=L("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),D={work:{icon:he,color:"primary",label:"Work Experience"},volunteer:{icon:ge,color:"secondary",label:"Volunteering"},club:{icon:xe,color:"accent",label:"Clubs & Societies"},sports:{icon:_,color:"primary",label:"Sports"},arts:{icon:fe,color:"premium",label:"Arts & Music"},leadership:{icon:N,color:"accent",label:"Leadership"},academic:{icon:pe,color:"secondary",label:"Academic"}};function ze(){const{supabase:p,user:l}=K(),{t:a}=X(),{toast:o}=ee(),[c,b]=u.useState([]),[C,d]=u.useState(!0),[i,H]=u.useState(null),[G,w]=u.useState(!1),[j,F]=u.useState(null),[t,m]=u.useState({name:"",description:"",category:"",hours:"",targetHours:"",start_date:"",end_date:"",achievements:"",external_link:""});u.useEffect(()=>{l&&k()},[l]);const k=async()=>{if(l)try{d(!0);const{data:r,error:s}=await p.from("extracurriculars").select("*").eq("user_id",l.id).order("start_date",{ascending:!1});if(s)throw s;b(r||[])}catch{o({title:"Error",description:"Failed to load activities. Please try again.",variant:"destructive"})}finally{d(!1)}},P=()=>{F(null),m({name:"",description:"",category:"",hours:"",targetHours:"",start_date:"",end_date:"",achievements:"",external_link:""}),w(!0)},q=r=>{F(r),m({name:r.name,description:r.description||"",category:r.category||"",hours:r.hours.toString(),targetHours:"",start_date:r.start_date||"",end_date:r.end_date||"",achievements:r.achievements?.join(", ")||"",external_link:r.external_link||""}),w(!0)},Y=async()=>{if(!l||!t.name.trim()){o({title:"Error",description:"Activity name is required",variant:"destructive"});return}try{const r=t.achievements?t.achievements.split(",").map(n=>n.trim()).filter(Boolean):[],s={user_id:l.id,name:t.name,description:t.description||null,category:t.category||null,hours:parseInt(t.hours)||0,start_date:t.start_date||null,end_date:t.end_date||null,achievements:r.length>0?r:null,external_link:t.external_link?.trim()||null};if(j){const{error:n}=await p.from("extracurriculars").update(s).eq("id",j.id).eq("user_id",l.id);if(n)throw n;o({title:"Success",description:"Activity updated successfully"})}else{const{error:n}=await p.from("extracurriculars").insert(s);if(n)throw n;o({title:"Success",description:"Activity created successfully"})}w(!1),k()}catch(r){o({title:"Error",description:r.message||"Failed to save activity. Please try again.",variant:"destructive"})}},T=async r=>{if(l&&confirm("Are you sure you want to delete this activity?"))try{const{error:s}=await p.from("extracurriculars").delete().eq("id",r).eq("user_id",l.id);if(s)throw s;o({title:"Success",description:"Activity deleted successfully"}),i?.id===r&&H(null),k()}catch{o({title:"Error",description:"Failed to delete activity. Please try again.",variant:"destructive"})}},$=async(r,s)=>{if(!l||!s||s<=0){o({title:"Error",description:"Please enter a valid number of hours",variant:"destructive"});return}try{const n=c.find(A=>A.id===r);if(!n)return;const{error:v}=await p.from("extracurriculars").update({hours:n.hours+s}).eq("id",r).eq("user_id",l.id);if(v)throw v;o({title:"Success",description:`${s} hours logged successfully`}),k()}catch{o({title:"Error",description:"Failed to log hours. Please try again.",variant:"destructive"})}},Q=c.reduce((r,s)=>r+s.hours,0),Z=c.reduce((r,s)=>r+(s.achievements?.length||0),0),V=r=>r?new Date(r).toLocaleDateString("en-US",{month:"short",year:"numeric"}):"";return C?e.jsx(I,{children:e.jsx("div",{className:"max-w-6xl mx-auto flex items-center justify-center h-[60vh]",children:e.jsx(re,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}):e.jsxs(I,{children:[e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-foreground",children:a("extracurricular.title")}),e.jsx("p",{className:"text-muted-foreground mt-1",children:a("extracurricular.subtitle")})]}),e.jsxs(h,{onClick:P,children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),a("extracurricular.addActivity")]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 animate-slide-up",style:{animationDelay:"0.1s"},children:[{label:a("extracurricular.totalHours"),value:Q,icon:de,color:"primary"},{label:a("extracurricular.activities"),value:c.length,icon:me,color:"secondary"},{label:a("extracurricular.achievements"),value:Z,icon:_,color:"accent"},{label:a("extracurricular.active"),value:c.filter(r=>!r.end_date).length,icon:N,color:"premium"}].map(r=>e.jsx("div",{className:"glass-card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:y("p-2 rounded-lg",r.color==="primary"&&"bg-primary/10",r.color==="secondary"&&"bg-secondary/10",r.color==="accent"&&"bg-accent/20",r.color==="premium"&&"bg-premium/10"),children:e.jsx(r.icon,{className:y("h-5 w-5",r.color==="primary"&&"text-primary",r.color==="secondary"&&"text-secondary",r.color==="accent"&&"text-accent-foreground",r.color==="premium"&&"text-premium")})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-foreground",children:r.value}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.label})]})]})},r.label))}),e.jsxs("div",{className:"glass-card p-6 animate-slide-up",style:{animationDelay:"0.15s"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(se,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"font-semibold text-foreground",children:a("extracurricular.findOpportunities")})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:a("extracurricular.findOppDesc")}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[{name:"Do-it",url:"https://doit.life/volunteer",desc:"Find volunteering opportunities near you",category:"Volunteering"},{name:"vInspired",url:"https://vinspired.com",desc:"Youth volunteering and social action",category:"Volunteering"},{name:"Springpod",url:"https://www.springpod.com",desc:"Virtual work experience programmes",category:"Work Experience"},{name:"RateMyPlacement",url:"https://www.ratemyplacement.co.uk",desc:"Student placements and internships",category:"Work Experience"},{name:"Investin",url:"https://investin.org",desc:"Career experience programmes",category:"Work Experience"},{name:"NCS",url:"https://wearencs.com",desc:"National Citizen Service programmes",category:"Leadership"},{name:"DofE",url:"https://www.dofe.org",desc:"Duke of Edinburgh Award",category:"Skills"},{name:"Young Enterprise",url:"https://www.young-enterprise.org.uk",desc:"Business and entrepreneurship skills",category:"Skills"}].map(r=>e.jsx("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"group p-3 rounded-lg bg-muted/50 hover:bg-muted border border-transparent hover:border-primary/20 transition-all duration-200",children:e.jsx("div",{className:"flex items-start justify-between gap-2",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"font-medium text-sm text-foreground group-hover:text-primary transition-colors",children:r.name}),e.jsx(S,{className:"h-3 w-3 text-muted-foreground group-hover:text-primary opacity-0 group-hover:opacity-100 transition-all"})]}),e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-primary/10 text-primary mt-1 inline-block",children:r.category}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:r.desc})]})})},r.name))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 animate-slide-up",style:{animationDelay:"0.2s"},children:c.length===0?e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsx(N,{className:"h-16 w-16 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:a("extracurricular.noActivities")}),e.jsx("p",{className:"text-muted-foreground mb-4",children:a("extracurricular.createFirst")}),e.jsxs(h,{onClick:P,children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),a("extracurricular.addActivity")]})]}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"font-semibold text-foreground mb-6",children:a("extracurricular.activityTimeline")}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-border"}),e.jsx("div",{className:"space-y-6",children:c.map(r=>{const s=D[r.category||""]||{icon:N,color:"primary",label:r.category||"Other"},n=s.icon,v=100,A=Math.min(r.hours/v*100,100);return e.jsxs("div",{className:"relative pl-12 cursor-pointer group",onClick:()=>H(r),children:[e.jsx("div",{className:y("absolute left-0 top-1 w-8 h-8 rounded-full flex items-center justify-center border-2 border-background transition-transform group-hover:scale-110",s.color==="primary"&&"bg-primary",s.color==="secondary"&&"bg-secondary",s.color==="accent"&&"bg-accent",s.color==="premium"&&"bg-premium"),children:e.jsx(n,{className:"h-4 w-4 text-primary-foreground"})}),e.jsxs("div",{className:y("p-4 rounded-xl transition-all duration-200",i?.id===r.id?"bg-primary/5 border border-primary/20":"bg-muted/50 hover:bg-muted"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:y("text-xs font-medium px-2 py-0.5 rounded-full",s.color==="primary"&&"bg-primary/10 text-primary",s.color==="secondary"&&"bg-secondary/10 text-secondary",s.color==="accent"&&"bg-accent/20 text-accent-foreground",s.color==="premium"&&"bg-premium/10 text-premium"),children:s.label}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[V(r.start_date),r.end_date&&` - ${V(r.end_date)}`]})]}),e.jsx("h4",{className:"font-semibold text-foreground",children:r.name}),r.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:r.description}),r.external_link&&e.jsxs("a",{href:r.external_link,target:"_blank",rel:"noopener noreferrer",onClick:g=>g.stopPropagation(),className:"inline-flex items-center gap-1 text-xs text-primary hover:underline mt-1",children:[e.jsx(S,{className:"h-3 w-3"}),"View Link"]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(h,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:g=>{g.stopPropagation(),q(r)},children:e.jsx(M,{className:"h-4 w-4"})}),e.jsx(h,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:g=>{g.stopPropagation(),T(r.id)},children:e.jsx(O,{className:"h-4 w-4 text-destructive"})}),e.jsx(ue,{className:"h-5 w-5 text-muted-foreground group-hover:text-foreground transition-colors"})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[e.jsxs("span",{className:"text-muted-foreground",children:[r.hours," / ",v," hours"]}),e.jsxs("span",{className:"font-medium text-foreground",children:[Math.round(A),"%"]})]}),e.jsx(ne,{value:A,className:"h-1.5"})]}),r.achievements&&r.achievements.length>0&&e.jsx("div",{className:"flex items-center gap-2 mt-3 flex-wrap",children:r.achievements.map((g,J)=>e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-full bg-accent/20 text-accent-foreground",children:[e.jsx(_,{className:"h-3 w-3"}),g]},J))})]})]},r.id)})})]})]})}),e.jsxs("div",{className:"lg:col-span-1 space-y-6 animate-slide-up",style:{animationDelay:"0.3s"},children:[i?e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:a("extracurricular.activityDetails")}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(h,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>q(i),children:e.jsx(M,{className:"h-4 w-4"})}),e.jsx(h,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>T(i.id),children:e.jsx(O,{className:"h-4 w-4 text-destructive"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Name"}),e.jsx("p",{className:"font-medium text-foreground",children:i.name})]}),i.description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Description"}),e.jsx("p",{className:"text-foreground",children:i.description})]}),i.external_link&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"External Link"}),e.jsxs("a",{href:i.external_link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-primary hover:underline",children:[e.jsx(S,{className:"h-4 w-4"}),i.external_link]})]}),i.category&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Category"}),e.jsx("p",{className:"font-medium text-foreground",children:D[i.category]?.label||i.category})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Hours Logged"}),e.jsxs("p",{className:"font-medium text-foreground",children:[i.hours," hours"]})]}),e.jsxs("div",{className:"pt-4 border-t border-border",children:[e.jsx("p",{className:"text-sm font-medium text-foreground mb-2",children:"Achievements"}),i.achievements&&i.achievements.length>0?e.jsx("div",{className:"space-y-1",children:i.achievements.map((r,s)=>e.jsxs("div",{className:"text-sm text-foreground flex items-center gap-2",children:[e.jsx(_,{className:"h-4 w-4 text-accent-foreground"}),r]},s))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No achievements yet"})]})]})]}):e.jsxs("div",{className:"glass-card p-6 text-center",children:[e.jsx(N,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-3"}),e.jsx("h3",{className:"font-semibold text-foreground mb-1",children:"Select an activity"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click on any activity to view details"})]}),c.length>0&&e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"font-semibold text-foreground mb-4",children:"Log Hours"}),e.jsx(je,{activities:c,onLogHours:$})]})]})]})]}),e.jsx(te,{open:G,onOpenChange:w,children:e.jsxs(ae,{className:"sm:max-w-[500px]",children:[e.jsxs(ie,{children:[e.jsx(ce,{children:j?"Edit Activity":"Add New Activity"}),e.jsx(le,{children:j?"Update your activity details below":"Track a new extracurricular activity or work experience."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"name",children:"Activity Name *"}),e.jsx(f,{id:"name",value:t.name,onChange:r=>m({...t,name:r.target.value}),placeholder:"e.g., Volunteer at Local Library"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"category",children:"Category"}),e.jsxs(z,{value:t.category,onValueChange:r=>m({...t,category:r}),children:[e.jsx(B,{children:e.jsx(U,{placeholder:"Select category"})}),e.jsx(W,{children:Object.entries(D).map(([r,s])=>e.jsx(R,{value:r,children:s.label},r))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"description",children:"Description"}),e.jsx(oe,{id:"description",value:t.description,onChange:r=>m({...t,description:r.target.value}),placeholder:"Describe your responsibilities..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"hours",children:"Hours Logged"}),e.jsx(f,{id:"hours",type:"number",value:t.hours,onChange:r=>m({...t,hours:r.target.value}),placeholder:"0"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"start_date",children:"Start Date"}),e.jsx(f,{id:"start_date",type:"date",value:t.start_date,onChange:r=>m({...t,start_date:r.target.value})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"end_date",children:"End Date (optional)"}),e.jsx(f,{id:"end_date",type:"date",value:t.end_date,onChange:r=>m({...t,end_date:r.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"achievements",children:"Achievements (comma-separated)"}),e.jsx(f,{id:"achievements",value:t.achievements,onChange:r=>m({...t,achievements:r.target.value}),placeholder:"e.g., Award winner, Team leader"})]}),e.jsxs(h,{className:"w-full mt-2",onClick:Y,children:[j?"Update":"Add"," Activity"]})]})]})})]})}function je({activities:p,onLogHours:l}){const[a,o]=u.useState(""),[c,b]=u.useState(""),C=d=>{d.preventDefault(),a&&c&&(l(a,parseFloat(c)),b(""))};return e.jsxs("form",{onSubmit:C,className:"space-y-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"quick-activity",children:"Activity"}),e.jsxs(z,{value:a,onValueChange:o,children:[e.jsx(B,{children:e.jsx(U,{placeholder:"Select activity"})}),e.jsx(W,{children:p.map(d=>e.jsx(R,{value:d.id,children:d.name},d.id))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"quick-hours",children:"Hours"}),e.jsx(f,{id:"quick-hours",type:"number",step:"0.5",value:c,onChange:d=>b(d.target.value),placeholder:"2"})]}),e.jsxs(h,{type:"submit",className:"w-full",disabled:!a||!c,children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Log Hours"]})]})}export{ze as default};
