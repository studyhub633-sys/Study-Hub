import{j as e,c as _e,b as Ve,g as ze,e as we,h as zt,u as de,f as C,an as Wt,P as Z,k as Yt,ao as qt,ap as Ht,aq as Xt,D as Qt,d as Zt,a6 as Ae,Y as Jt,a2 as er,ar as tr,L as rr,C as z,z as Ce,p as nr,$ as or,a1 as ke,F as Oe,as as sr,ae as ar,V as ir,W as cr,at as lr,au as dr,av as ur,aw as mr}from"./ui-vendor-BkbvuH_y.js";import{A as Le}from"./AppLayout-CN79_BfK.js";import{S as pr}from"./SimpleMarkdown-BxTg1FVm.js";import{A as Fe,a as Ge,b as Ke,c as $e}from"./accordion-PwGAu1lr.js";import{B as _}from"./button-EqlKTezP.js";import{D as fr,b as xr,c as hr,d as gr,e as vr,f as wr}from"./dialog-DEEVtVen.js";import{r as i,u as jr}from"./react-vendor-CW_qxVlV.js";import{e as br,f as We,R as Nr,A as yr,C as Cr,g as Mr,c as D,u as _r,b as Sr}from"./index-DN2StWe2.js";import{u as Rr}from"./index-Ca2jQLVk.js";import{c as Ye,I as Er,R as Dr}from"./index-BH0lyQcB.js";import{I as se}from"./input-BZEgG1eO.js";import{L as ae}from"./label-Bxm2S76w.js";import{S as Pr,a as Ir,b as Tr,c as Ar,d as Ue}from"./select-BfIDHEDX.js";import{T as kr}from"./textarea-CYkmGJ0i.js";import{h as Or}from"./premium-eVfGSoKP.js";import"./sheet-YK_0sUrL.js";import"./index-BN6toOoV.js";import"./supabase-vendor-DI52Tw1b.js";import"./query-vendor-B5gxQqnu.js";import"./index-BdQq_4o_.js";function Lr(t){const n=Fr(t),r=i.forwardRef((o,a)=>{const{children:c,...m}=o,p=i.Children.toArray(c),g=p.find(Kr);if(g){const j=g.props.children,v=p.map(d=>d===g?i.Children.count(j)>1?i.Children.only(null):i.isValidElement(j)?j.props.children:null:d);return e.jsx(n,{...m,ref:a,children:i.isValidElement(j)?i.cloneElement(j,void 0,v):null})}return e.jsx(n,{...m,ref:a,children:c})});return r.displayName=`${t}.Slot`,r}function Fr(t){const n=i.forwardRef((r,o)=>{const{children:a,...c}=r;if(i.isValidElement(a)){const m=Ur(a),p=$r(c,a.props);return a.type!==i.Fragment&&(p.ref=o?_e(o,m):m),i.cloneElement(a,p)}return i.Children.count(a)>1?i.Children.only(null):null});return n.displayName=`${t}.SlotClone`,n}var Gr=Symbol("radix.slottable");function Kr(t){return i.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Gr}function $r(t,n){const r={...n};for(const o in n){const a=t[o],c=n[o];/^on[A-Z]/.test(o)?a&&c?r[o]=(...p)=>{const g=c(...p);return a(...p),g}:a&&(r[o]=a):o==="style"?r[o]={...a,...c}:o==="className"&&(r[o]=[a,c].filter(Boolean).join(" "))}return{...t,...r}}function Ur(t){var o,a;let n=(o=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:o.get,r=n&&"isReactWarning"in n&&n.isReactWarning;return r?t.ref:(n=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,r=n&&"isReactWarning"in n&&n.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var Me=["Enter"," "],Br=["ArrowDown","PageUp","Home"],qe=["ArrowUp","PageDown","End"],Vr=[...Br,...qe],zr={ltr:[...Me,"ArrowRight"],rtl:[...Me,"ArrowLeft"]},Wr={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ue="Menu",[ce,Yr,qr]=br(ue),[W,He]=Ve(ue,[qr,We,Ye]),je=We(),Xe=Ye(),[Hr,Y]=W(ue),[Xr,me]=W(ue),Qe=t=>{const{__scopeMenu:n,open:r=!1,children:o,dir:a,onOpenChange:c,modal:m=!0}=t,p=je(n),[g,j]=i.useState(null),v=i.useRef(!1),d=ze(c),f=Rr(a);return i.useEffect(()=>{const M=()=>{v.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>v.current=!1;return document.addEventListener("keydown",M,{capture:!0}),()=>{document.removeEventListener("keydown",M,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),e.jsx(Nr,{...p,children:e.jsx(Hr,{scope:n,open:r,onOpenChange:d,content:g,onContentChange:j,children:e.jsx(Xr,{scope:n,onClose:i.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:v,dir:f,modal:m,children:o})})})};Qe.displayName=ue;var Qr="MenuAnchor",Se=i.forwardRef((t,n)=>{const{__scopeMenu:r,...o}=t,a=je(r);return e.jsx(yr,{...a,...o,ref:n})});Se.displayName=Qr;var Re="MenuPortal",[Zr,Ze]=W(Re,{forceMount:void 0}),Je=t=>{const{__scopeMenu:n,forceMount:r,children:o,container:a}=t,c=Y(Re,n);return e.jsx(Zr,{scope:n,forceMount:r,children:e.jsx(we,{present:r||c.open,children:e.jsx(zt,{asChild:!0,container:a,children:o})})})};Je.displayName=Re;var A="MenuContent",[Jr,Ee]=W(A),et=i.forwardRef((t,n)=>{const r=Ze(A,t.__scopeMenu),{forceMount:o=r.forceMount,...a}=t,c=Y(A,t.__scopeMenu),m=me(A,t.__scopeMenu);return e.jsx(ce.Provider,{scope:t.__scopeMenu,children:e.jsx(we,{present:o||c.open,children:e.jsx(ce.Slot,{scope:t.__scopeMenu,children:m.modal?e.jsx(en,{...a,ref:n}):e.jsx(tn,{...a,ref:n})})})})}),en=i.forwardRef((t,n)=>{const r=Y(A,t.__scopeMenu),o=i.useRef(null),a=de(n,o);return i.useEffect(()=>{const c=o.current;if(c)return Wt(c)},[]),e.jsx(De,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:C(t.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),tn=i.forwardRef((t,n)=>{const r=Y(A,t.__scopeMenu);return e.jsx(De,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),rn=Lr("MenuContent.ScrollLock"),De=i.forwardRef((t,n)=>{const{__scopeMenu:r,loop:o=!1,trapFocus:a,onOpenAutoFocus:c,onCloseAutoFocus:m,disableOutsidePointerEvents:p,onEntryFocus:g,onEscapeKeyDown:j,onPointerDownOutside:v,onFocusOutside:d,onInteractOutside:f,onDismiss:M,disableOutsideScroll:b,...F}=t,w=Y(A,r),I=me(A,r),$=je(r),O=Xe(r),G=Yr(r),[pe,N]=i.useState(null),R=i.useRef(null),J=de(n,R,w.onContentChange),q=i.useRef(0),H=i.useRef(""),X=i.useRef(0),ee=i.useRef(null),fe=i.useRef("right"),te=i.useRef(0),ye=b?Ht:i.Fragment,re=b?{as:rn,allowPinchZoom:!0}:void 0,ne=h=>{var K,oe;const E=H.current+h,T=G().filter(s=>!s.disabled),L=document.activeElement,B=(K=T.find(s=>s.ref.current===L))==null?void 0:K.textValue,xe=T.map(s=>s.textValue),Q=xn(xe,E,B),V=(oe=T.find(s=>s.textValue===Q))==null?void 0:oe.ref.current;(function s(l){H.current=l,window.clearTimeout(q.current),l!==""&&(q.current=window.setTimeout(()=>s(""),1e3))})(E),V&&setTimeout(()=>V.focus())};i.useEffect(()=>()=>window.clearTimeout(q.current),[]),qt();const U=i.useCallback(h=>{var T,L;return fe.current===((T=ee.current)==null?void 0:T.side)&&gn(h,(L=ee.current)==null?void 0:L.area)},[]);return e.jsx(Jr,{scope:r,searchRef:H,onItemEnter:i.useCallback(h=>{U(h)&&h.preventDefault()},[U]),onItemLeave:i.useCallback(h=>{var E;U(h)||((E=R.current)==null||E.focus(),N(null))},[U]),onTriggerLeave:i.useCallback(h=>{U(h)&&h.preventDefault()},[U]),pointerGraceTimerRef:X,onPointerGraceIntentChange:i.useCallback(h=>{ee.current=h},[]),children:e.jsx(ye,{...re,children:e.jsx(Xt,{asChild:!0,trapped:a,onMountAutoFocus:C(c,h=>{var E;h.preventDefault(),(E=R.current)==null||E.focus({preventScroll:!0})}),onUnmountAutoFocus:m,children:e.jsx(Qt,{asChild:!0,disableOutsidePointerEvents:p,onEscapeKeyDown:j,onPointerDownOutside:v,onFocusOutside:d,onInteractOutside:f,onDismiss:M,children:e.jsx(Dr,{asChild:!0,...O,dir:I.dir,orientation:"vertical",loop:o,currentTabStopId:pe,onCurrentTabStopIdChange:N,onEntryFocus:C(g,h=>{I.isUsingKeyboardRef.current||h.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(Cr,{role:"menu","aria-orientation":"vertical","data-state":ht(w.open),"data-radix-menu-content":"",dir:I.dir,...$,...F,ref:J,style:{outline:"none",...F.style},onKeyDown:C(F.onKeyDown,h=>{const T=h.target.closest("[data-radix-menu-content]")===h.currentTarget,L=h.ctrlKey||h.altKey||h.metaKey,B=h.key.length===1;T&&(h.key==="Tab"&&h.preventDefault(),!L&&B&&ne(h.key));const xe=R.current;if(h.target!==xe||!Vr.includes(h.key))return;h.preventDefault();const V=G().filter(K=>!K.disabled).map(K=>K.ref.current);qe.includes(h.key)&&V.reverse(),pn(V)}),onBlur:C(t.onBlur,h=>{h.currentTarget.contains(h.target)||(window.clearTimeout(q.current),H.current="")}),onPointerMove:C(t.onPointerMove,le(h=>{const E=h.target,T=te.current!==h.clientX;if(h.currentTarget.contains(E)&&T){const L=h.clientX>te.current?"right":"left";fe.current=L,te.current=h.clientX}}))})})})})})})});et.displayName=A;var nn="MenuGroup",Pe=i.forwardRef((t,n)=>{const{__scopeMenu:r,...o}=t;return e.jsx(Z.div,{role:"group",...o,ref:n})});Pe.displayName=nn;var on="MenuLabel",tt=i.forwardRef((t,n)=>{const{__scopeMenu:r,...o}=t;return e.jsx(Z.div,{...o,ref:n})});tt.displayName=on;var ge="MenuItem",Be="menu.itemSelect",be=i.forwardRef((t,n)=>{const{disabled:r=!1,onSelect:o,...a}=t,c=i.useRef(null),m=me(ge,t.__scopeMenu),p=Ee(ge,t.__scopeMenu),g=de(n,c),j=i.useRef(!1),v=()=>{const d=c.current;if(!r&&d){const f=new CustomEvent(Be,{bubbles:!0,cancelable:!0});d.addEventListener(Be,M=>o==null?void 0:o(M),{once:!0}),Yt(d,f),f.defaultPrevented?j.current=!1:m.onClose()}};return e.jsx(rt,{...a,ref:g,disabled:r,onClick:C(t.onClick,v),onPointerDown:d=>{var f;(f=t.onPointerDown)==null||f.call(t,d),j.current=!0},onPointerUp:C(t.onPointerUp,d=>{var f;j.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:C(t.onKeyDown,d=>{const f=p.searchRef.current!=="";r||f&&d.key===" "||Me.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});be.displayName=ge;var rt=i.forwardRef((t,n)=>{const{__scopeMenu:r,disabled:o=!1,textValue:a,...c}=t,m=Ee(ge,r),p=Xe(r),g=i.useRef(null),j=de(n,g),[v,d]=i.useState(!1),[f,M]=i.useState("");return i.useEffect(()=>{const b=g.current;b&&M((b.textContent??"").trim())},[c.children]),e.jsx(ce.ItemSlot,{scope:r,disabled:o,textValue:a??f,children:e.jsx(Er,{asChild:!0,...p,focusable:!o,children:e.jsx(Z.div,{role:"menuitem","data-highlighted":v?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0,...c,ref:j,onPointerMove:C(t.onPointerMove,le(b=>{o?m.onItemLeave(b):(m.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:C(t.onPointerLeave,le(b=>m.onItemLeave(b))),onFocus:C(t.onFocus,()=>d(!0)),onBlur:C(t.onBlur,()=>d(!1))})})})}),sn="MenuCheckboxItem",nt=i.forwardRef((t,n)=>{const{checked:r=!1,onCheckedChange:o,...a}=t;return e.jsx(ct,{scope:t.__scopeMenu,checked:r,children:e.jsx(be,{role:"menuitemcheckbox","aria-checked":ve(r)?"mixed":r,...a,ref:n,"data-state":Te(r),onSelect:C(a.onSelect,()=>o==null?void 0:o(ve(r)?!0:!r),{checkForDefaultPrevented:!1})})})});nt.displayName=sn;var ot="MenuRadioGroup",[an,cn]=W(ot,{value:void 0,onValueChange:()=>{}}),st=i.forwardRef((t,n)=>{const{value:r,onValueChange:o,...a}=t,c=ze(o);return e.jsx(an,{scope:t.__scopeMenu,value:r,onValueChange:c,children:e.jsx(Pe,{...a,ref:n})})});st.displayName=ot;var at="MenuRadioItem",it=i.forwardRef((t,n)=>{const{value:r,...o}=t,a=cn(at,t.__scopeMenu),c=r===a.value;return e.jsx(ct,{scope:t.__scopeMenu,checked:c,children:e.jsx(be,{role:"menuitemradio","aria-checked":c,...o,ref:n,"data-state":Te(c),onSelect:C(o.onSelect,()=>{var m;return(m=a.onValueChange)==null?void 0:m.call(a,r)},{checkForDefaultPrevented:!1})})})});it.displayName=at;var Ie="MenuItemIndicator",[ct,ln]=W(Ie,{checked:!1}),lt=i.forwardRef((t,n)=>{const{__scopeMenu:r,forceMount:o,...a}=t,c=ln(Ie,r);return e.jsx(we,{present:o||ve(c.checked)||c.checked===!0,children:e.jsx(Z.span,{...a,ref:n,"data-state":Te(c.checked)})})});lt.displayName=Ie;var dn="MenuSeparator",dt=i.forwardRef((t,n)=>{const{__scopeMenu:r,...o}=t;return e.jsx(Z.div,{role:"separator","aria-orientation":"horizontal",...o,ref:n})});dt.displayName=dn;var un="MenuArrow",ut=i.forwardRef((t,n)=>{const{__scopeMenu:r,...o}=t,a=je(r);return e.jsx(Mr,{...a,...o,ref:n})});ut.displayName=un;var mn="MenuSub",[Eo,mt]=W(mn),ie="MenuSubTrigger",pt=i.forwardRef((t,n)=>{const r=Y(ie,t.__scopeMenu),o=me(ie,t.__scopeMenu),a=mt(ie,t.__scopeMenu),c=Ee(ie,t.__scopeMenu),m=i.useRef(null),{pointerGraceTimerRef:p,onPointerGraceIntentChange:g}=c,j={__scopeMenu:t.__scopeMenu},v=i.useCallback(()=>{m.current&&window.clearTimeout(m.current),m.current=null},[]);return i.useEffect(()=>v,[v]),i.useEffect(()=>{const d=p.current;return()=>{window.clearTimeout(d),g(null)}},[p,g]),e.jsx(Se,{asChild:!0,...j,children:e.jsx(rt,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":ht(r.open),...t,ref:_e(n,a.onTriggerChange),onClick:d=>{var f;(f=t.onClick)==null||f.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:C(t.onPointerMove,le(d=>{c.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!r.open&&!m.current&&(c.onPointerGraceIntentChange(null),m.current=window.setTimeout(()=>{r.onOpenChange(!0),v()},100))})),onPointerLeave:C(t.onPointerLeave,le(d=>{var M,b;v();const f=(M=r.content)==null?void 0:M.getBoundingClientRect();if(f){const F=(b=r.content)==null?void 0:b.dataset.side,w=F==="right",I=w?-5:5,$=f[w?"left":"right"],O=f[w?"right":"left"];c.onPointerGraceIntentChange({area:[{x:d.clientX+I,y:d.clientY},{x:$,y:f.top},{x:O,y:f.top},{x:O,y:f.bottom},{x:$,y:f.bottom}],side:F}),window.clearTimeout(p.current),p.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(d),d.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:C(t.onKeyDown,d=>{var M;const f=c.searchRef.current!=="";t.disabled||f&&d.key===" "||zr[o.dir].includes(d.key)&&(r.onOpenChange(!0),(M=r.content)==null||M.focus(),d.preventDefault())})})})});pt.displayName=ie;var ft="MenuSubContent",xt=i.forwardRef((t,n)=>{const r=Ze(A,t.__scopeMenu),{forceMount:o=r.forceMount,...a}=t,c=Y(A,t.__scopeMenu),m=me(A,t.__scopeMenu),p=mt(ft,t.__scopeMenu),g=i.useRef(null),j=de(n,g);return e.jsx(ce.Provider,{scope:t.__scopeMenu,children:e.jsx(we,{present:o||c.open,children:e.jsx(ce.Slot,{scope:t.__scopeMenu,children:e.jsx(De,{id:p.contentId,"aria-labelledby":p.triggerId,...a,ref:j,align:"start",side:m.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:v=>{var d;m.isUsingKeyboardRef.current&&((d=g.current)==null||d.focus()),v.preventDefault()},onCloseAutoFocus:v=>v.preventDefault(),onFocusOutside:C(t.onFocusOutside,v=>{v.target!==p.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:C(t.onEscapeKeyDown,v=>{m.onClose(),v.preventDefault()}),onKeyDown:C(t.onKeyDown,v=>{var M;const d=v.currentTarget.contains(v.target),f=Wr[m.dir].includes(v.key);d&&f&&(c.onOpenChange(!1),(M=p.trigger)==null||M.focus(),v.preventDefault())})})})})})});xt.displayName=ft;function ht(t){return t?"open":"closed"}function ve(t){return t==="indeterminate"}function Te(t){return ve(t)?"indeterminate":t?"checked":"unchecked"}function pn(t){const n=document.activeElement;for(const r of t)if(r===n||(r.focus(),document.activeElement!==n))return}function fn(t,n){return t.map((r,o)=>t[(n+o)%t.length])}function xn(t,n,r){const a=n.length>1&&Array.from(n).every(j=>j===n[0])?n[0]:n,c=r?t.indexOf(r):-1;let m=fn(t,Math.max(c,0));a.length===1&&(m=m.filter(j=>j!==r));const g=m.find(j=>j.toLowerCase().startsWith(a.toLowerCase()));return g!==r?g:void 0}function hn(t,n){const{x:r,y:o}=t;let a=!1;for(let c=0,m=n.length-1;c<n.length;m=c++){const p=n[c],g=n[m],j=p.x,v=p.y,d=g.x,f=g.y;v>o!=f>o&&r<(d-j)*(o-v)/(f-v)+j&&(a=!a)}return a}function gn(t,n){if(!n)return!1;const r={x:t.clientX,y:t.clientY};return hn(r,n)}function le(t){return n=>n.pointerType==="mouse"?t(n):void 0}var vn=Qe,wn=Se,jn=Je,bn=et,Nn=Pe,yn=tt,Cn=be,Mn=nt,_n=st,Sn=it,Rn=lt,En=dt,Dn=ut,Pn=pt,In=xt,Ne="DropdownMenu",[Tn]=Ve(Ne,[He]),S=He(),[An,gt]=Tn(Ne),vt=t=>{const{__scopeDropdownMenu:n,children:r,dir:o,open:a,defaultOpen:c,onOpenChange:m,modal:p=!0}=t,g=S(n),j=i.useRef(null),[v,d]=Zt({prop:a,defaultProp:c??!1,onChange:m,caller:Ne});return e.jsx(An,{scope:n,triggerId:Ae(),triggerRef:j,contentId:Ae(),open:v,onOpenChange:d,onOpenToggle:i.useCallback(()=>d(f=>!f),[d]),modal:p,children:e.jsx(vn,{...g,open:v,onOpenChange:d,dir:o,modal:p,children:r})})};vt.displayName=Ne;var wt="DropdownMenuTrigger",jt=i.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,disabled:o=!1,...a}=t,c=gt(wt,r),m=S(r);return e.jsx(wn,{asChild:!0,...m,children:e.jsx(Z.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":o?"":void 0,disabled:o,...a,ref:_e(n,c.triggerRef),onPointerDown:C(t.onPointerDown,p=>{!o&&p.button===0&&p.ctrlKey===!1&&(c.onOpenToggle(),c.open||p.preventDefault())}),onKeyDown:C(t.onKeyDown,p=>{o||(["Enter"," "].includes(p.key)&&c.onOpenToggle(),p.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(p.key)&&p.preventDefault())})})})});jt.displayName=wt;var kn="DropdownMenuPortal",bt=t=>{const{__scopeDropdownMenu:n,...r}=t,o=S(n);return e.jsx(jn,{...o,...r})};bt.displayName=kn;var Nt="DropdownMenuContent",yt=i.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...o}=t,a=gt(Nt,r),c=S(r),m=i.useRef(!1);return e.jsx(bn,{id:a.contentId,"aria-labelledby":a.triggerId,...c,...o,ref:n,onCloseAutoFocus:C(t.onCloseAutoFocus,p=>{var g;m.current||(g=a.triggerRef.current)==null||g.focus(),m.current=!1,p.preventDefault()}),onInteractOutside:C(t.onInteractOutside,p=>{const g=p.detail.originalEvent,j=g.button===0&&g.ctrlKey===!0,v=g.button===2||j;(!a.modal||v)&&(m.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});yt.displayName=Nt;var On="DropdownMenuGroup",Ln=i.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...o}=t,a=S(r);return e.jsx(Nn,{...a,...o,ref:n})});Ln.displayName=On;var Fn="DropdownMenuLabel",Ct=i.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...o}=t,a=S(r);return e.jsx(yn,{...a,...o,ref:n})});Ct.displayName=Fn;var Gn="DropdownMenuItem",Mt=i.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...o}=t,a=S(r);return e.jsx(Cn,{...a,...o,ref:n})});Mt.displayName=Gn;var Kn="DropdownMenuCheckboxItem",_t=i.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...o}=t,a=S(r);return e.jsx(Mn,{...a,...o,ref:n})});_t.displayName=Kn;var $n="DropdownMenuRadioGroup",Un=i.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...o}=t,a=S(r);return e.jsx(_n,{...a,...o,ref:n})});Un.displayName=$n;var Bn="DropdownMenuRadioItem",St=i.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...o}=t,a=S(r);return e.jsx(Sn,{...a,...o,ref:n})});St.displayName=Bn;var Vn="DropdownMenuItemIndicator",Rt=i.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...o}=t,a=S(r);return e.jsx(Rn,{...a,...o,ref:n})});Rt.displayName=Vn;var zn="DropdownMenuSeparator",Et=i.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...o}=t,a=S(r);return e.jsx(En,{...a,...o,ref:n})});Et.displayName=zn;var Wn="DropdownMenuArrow",Yn=i.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...o}=t,a=S(r);return e.jsx(Dn,{...a,...o,ref:n})});Yn.displayName=Wn;var qn="DropdownMenuSubTrigger",Dt=i.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...o}=t,a=S(r);return e.jsx(Pn,{...a,...o,ref:n})});Dt.displayName=qn;var Hn="DropdownMenuSubContent",Pt=i.forwardRef((t,n)=>{const{__scopeDropdownMenu:r,...o}=t,a=S(r);return e.jsx(In,{...a,...o,ref:n,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Pt.displayName=Hn;var Xn=vt,Qn=jt,Zn=bt,It=yt,Tt=Ct,At=Mt,kt=_t,Ot=St,Lt=Rt,Ft=Et,Gt=Dt,Kt=Pt;const Jn=Xn,eo=Qn,to=i.forwardRef(({className:t,inset:n,children:r,...o},a)=>e.jsxs(Gt,{ref:a,className:D("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",n&&"pl-8",t),...o,children:[r,e.jsx(Jt,{className:"ml-auto h-4 w-4"})]}));to.displayName=Gt.displayName;const ro=i.forwardRef(({className:t,...n},r)=>e.jsx(Kt,{ref:r,className:D("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));ro.displayName=Kt.displayName;const $t=i.forwardRef(({className:t,sideOffset:n=4,...r},o)=>e.jsx(Zn,{children:e.jsx(It,{ref:o,sideOffset:n,className:D("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));$t.displayName=It.displayName;const he=i.forwardRef(({className:t,inset:n,...r},o)=>e.jsx(At,{ref:o,className:D("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",n&&"pl-8",t),...r}));he.displayName=At.displayName;const no=i.forwardRef(({className:t,children:n,checked:r,...o},a)=>e.jsxs(kt,{ref:a,className:D("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),checked:r,...o,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Lt,{children:e.jsx(er,{className:"h-4 w-4"})})}),n]}));no.displayName=kt.displayName;const oo=i.forwardRef(({className:t,children:n,...r},o)=>e.jsxs(Ot,{ref:o,className:D("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Lt,{children:e.jsx(tr,{className:"h-2 w-2 fill-current"})})}),n]}));oo.displayName=Ot.displayName;const so=i.forwardRef(({className:t,inset:n,...r},o)=>e.jsx(Tt,{ref:o,className:D("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",t),...r}));so.displayName=Tt.displayName;const ao=i.forwardRef(({className:t,...n},r)=>e.jsx(Ft,{ref:r,className:D("-mx-1 my-1 h-px bg-muted",t),...n}));ao.displayName=Ft.displayName;const io={definition:{label:"Definition",content:`# Term Name

**Definition:**


**Example:**


**Related Concepts:**
- `},process:{label:"Process",content:`# Process Name

**Steps:**
1. 
2. 
3. 

**Key Points:**
- `},comparison:{label:"Comparison",content:`# Comparison: A vs B

| Feature | A | B |
|---------|---|---|
|         |   |   |

**Conclusion:**
`}};function Do(){const{supabase:t,user:n}=_r(),{toast:r}=Sr(),o=jr(),[a,c]=i.useState([]),[m,p]=i.useState(!0),[g,j]=i.useState(!1),[v,d]=i.useState(!0),[f,M]=i.useState(""),[b,F]=i.useState("All Subjects"),[w,I]=i.useState(null),[$,O]=i.useState(!1),[G,pe]=i.useState(null),[N,R]=i.useState({title:"",content:"",subject:"",topic:"",tags:""}),J=Array.from(new Set(a.map(s=>s.subject).filter(Boolean)));i.useEffect(()=>{n&&(q(),H())},[n]);const q=async()=>{if(!(!n||!t))try{const s=await Or(t);j(s)}catch{}finally{d(!1)}};i.useEffect(()=>{const s=l=>{if((l.ctrlKey||l.metaKey)&&l.key.toLowerCase()==="n"&&(l.preventDefault(),X()),(l.ctrlKey||l.metaKey)&&l.key.toLowerCase()==="s"&&(l.preventDefault(),$)){const u=document.getElementById("save-note-btn");u&&u.click()}};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[$]);const H=async()=>{if(n)try{p(!0);const{data:s,error:l}=await t.from("notes").select("*").eq("user_id",n.id).order("updated_at",{ascending:!1});if(l)throw l;let u=s||[];if(g){const{data:x,error:y}=await t.from("global_premium_notes").select("*").eq("grade_level","9").order("created_at",{ascending:!1});if(!y&&x){const k=x.map(P=>({id:P.id,title:P.title,content:P.content,subject:P.subject||"",topic:P.topic||"",tags:P.tags||[],grade_level:P.grade_level,is_premium:!0,created_at:P.created_at,updated_at:P.created_at}));u=[...u,...k]}}c(u),!w&&u.length>0&&I(u[0])}catch{r({title:"Error",description:"Failed to load notes. Please try again.",variant:"destructive"})}finally{p(!1)}},X=()=>{pe(null),R({title:"",content:"",subject:"",topic:"",tags:""}),O(!0)},ee=s=>{var l;pe(s),R({title:s.title,content:s.content,subject:s.subject||"",topic:s.topic||"",tags:((l=s.tags)==null?void 0:l.join(", "))||""}),O(!0)},fe=async()=>{var l;const s=(l=N.title)==null?void 0:l.trim();if(!n||!s){r({title:"Error",description:"A valid title is required to save your note.",variant:"destructive"});return}try{const u=N.tags?N.tags.split(",").map(x=>x.trim()).filter(Boolean):[];if(G){const{error:x}=await t.from("notes").update({title:N.title,content:N.content,subject:N.subject||null,topic:N.topic||null,tags:u}).eq("id",G.id).eq("user_id",n.id);if(x)throw x;r({title:"Success",description:"Note updated successfully"});const y={...G,...N,tags:u,updated_at:new Date().toISOString()};c(a.map(k=>k.id===G.id?y:k)),I(y)}else{const{data:x,error:y}=await t.from("notes").insert({user_id:n.id,title:N.title,content:N.content,subject:N.subject||null,topic:N.topic||null,tags:u}).select().single();if(y)throw y;r({title:"Success",description:"Note created successfully"}),c([x,...a]),I(x)}O(!1)}catch(u){r({title:"Error",description:u.message||"Failed to save note. Please try again.",variant:"destructive"})}},te=async s=>{if(n&&confirm("Are you sure you want to delete this note?"))try{const{error:l}=await t.from("notes").delete().eq("id",s).eq("user_id",n.id);if(l)throw l;r({title:"Success",description:"Note deleted successfully"});const u=a.filter(x=>x.id!==s);c(u),(w==null?void 0:w.id)===s&&I(u.length>0?u[0]:null)}catch{r({title:"Error",description:"Failed to delete note. Please try again.",variant:"destructive"})}},ye=s=>{const l=document.createElement("a"),u=new Blob([s.content],{type:"text/markdown"});l.href=URL.createObjectURL(u),l.download=`${s.title.replace(/\s+/g,"_")}.md`,document.body.appendChild(l),l.click(),document.body.removeChild(l),r({title:"Exported",description:"Note downloaded as Markdown file"})},re=s=>{const l=io[s];N.content&&!confirm("This will replace current content. Continue?")||R({...N,content:l.content})},ne=(s,l="")=>{const u=document.getElementById("content");if(!u)return;const x=u.selectionStart,y=u.selectionEnd,k=u.value,P=k.substring(0,x),Ut=k.substring(x,y),Bt=k.substring(y),Vt=P+s+Ut+l+Bt;R({...N,content:Vt}),setTimeout(()=>{u.focus(),u.setSelectionRange(x+s.length,y+s.length)},0)},U=()=>{const s=prompt("Enter image URL:");s&&ne(`![Image](${s})`)},h=()=>{const s=prompt("Enter link URL:");s&&ne("[Link Text](",`${s})`)},E=s=>{o("/premium/mind-map-generator",{state:{noteContent:s.content,noteTitle:s.title,noteSubject:s.subject}})},T=a.filter(s=>s.is_premium===!0),L=a.filter(s=>!s.is_premium);a.filter(s=>{var x;const l=b==="All Subjects"||s.subject===b,u=s.title.toLowerCase().includes(f.toLowerCase())||s.content.toLowerCase().includes(f.toLowerCase())||((x=s.topic)==null?void 0:x.toLowerCase().includes(f.toLowerCase()));return l&&u});const B=T.filter(s=>{var x;const l=b==="All Subjects"||s.subject===b,u=s.title.toLowerCase().includes(f.toLowerCase())||s.content.toLowerCase().includes(f.toLowerCase())||((x=s.topic)==null?void 0:x.toLowerCase().includes(f.toLowerCase()));return l&&u}),Q=L.filter(s=>{var x;const l=b==="All Subjects"||s.subject===b,u=s.title.toLowerCase().includes(f.toLowerCase())||s.content.toLowerCase().includes(f.toLowerCase())||((x=s.topic)==null?void 0:x.toLowerCase().includes(f.toLowerCase()));return l&&u}).reduce((s,l)=>{const u=l.subject||"Uncategorized",x=l.topic||"General";return s[u]||(s[u]={}),s[u][x]||(s[u][x]=[]),s[u][x].push(l),s},{}),V=B.reduce((s,l)=>{const u=l.subject||"Uncategorized",x=l.topic||"General";return s[u]||(s[u]={}),s[u][x]||(s[u][x]=[]),s[u][x].push(l),s},{}),K=s=>{const l=new Date(s),x=Math.floor((new Date().getTime()-l.getTime())/1e3);return x<60?"Just now":x<3600?`${Math.floor(x/60)}m ago`:x<86400?`${Math.floor(x/3600)}h ago`:x<604800?`${Math.floor(x/86400)}d ago`:l.toLocaleDateString()},oe=s=>{const l=s.toLowerCase();return l.includes("important")||l.includes("exam")||l.includes("urgent")?"bg-destructive/10 text-destructive border-destructive/20":l.includes("review")||l.includes("study")?"bg-secondary/10 text-secondary border-secondary/20":"bg-muted text-muted-foreground border-border"};return m?e.jsx(Le,{children:e.jsx("div",{className:"max-w-6xl mx-auto flex items-center justify-center h-[60vh]",children:e.jsx(rr,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}):e.jsxs(Le,{children:[e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-foreground",children:"Exam Notes"}),e.jsxs("p",{className:"text-muted-foreground mt-1",children:[a.length," note",a.length!==1?"s":""," across"," ",J.length||1," subject",J.length!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[g&&e.jsxs(_,{variant:"outline",onClick:()=>o("/premium/grade-9-notes"),className:"border-premium/30 bg-premium/5 hover:bg-premium/10",children:[e.jsx(z,{className:"h-4 w-4 mr-2 text-premium"}),"Grade 9 Notes"]}),!g&&!v&&e.jsxs(_,{variant:"outline",onClick:()=>o("/premium-dashboard"),className:"border-premium/30 bg-premium/5 hover:bg-premium/10",children:[e.jsx(z,{className:"h-4 w-4 mr-2 text-premium"}),"Access Grade 9 Notes"]}),e.jsxs(_,{onClick:X,title:"Create New Note (Ctrl+N)",children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Create Note"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6 animate-slide-up",style:{animationDelay:"0.1s",opacity:0},children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(nr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(se,{placeholder:"Search notes...",value:f,onChange:s=>M(s.target.value),className:"pl-9"})]}),e.jsxs(Pr,{value:b,onValueChange:F,children:[e.jsxs(Ir,{className:"w-full sm:w-[180px]",children:[e.jsx(or,{className:"h-4 w-4 mr-2"}),e.jsx(Tr,{})]}),e.jsxs(Ar,{children:[e.jsx(Ue,{value:"All Subjects",children:"All Subjects"}),J.map(s=>e.jsx(Ue,{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-4 animate-slide-up",style:{animationDelay:"0.2s",opacity:0},children:[g&&B.length>0&&e.jsxs("div",{className:"glass-card p-4 border-2 border-premium/30 bg-premium/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5 text-premium"}),e.jsx("h3",{className:"font-semibold text-foreground",children:"Premium Grade 9 Notes"})]}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>o("/premium/grade-9-notes"),className:"h-7 text-xs text-premium hover:text-premium hover:bg-premium/10",children:"View All â†’"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Exclusive Grade 9 notes available to premium members"}),Object.entries(V).map(([s,l])=>e.jsxs("div",{className:"mb-3 last:mb-0",children:[e.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:s}),e.jsx(Fe,{type:"multiple",className:"space-y-1",children:Object.entries(l).map(([u,x])=>e.jsxs(Ge,{value:u,className:"border-none",children:[e.jsxs(Ke,{className:"py-1.5 px-2 rounded-lg bg-premium/10 hover:bg-premium/20 text-xs font-medium hover:no-underline",children:[u,e.jsx("span",{className:"ml-auto mr-2 text-xs text-premium",children:x.length})]}),e.jsx($e,{className:"pt-1 pb-0",children:e.jsx("div",{className:"space-y-1 pl-1",children:x.map(y=>e.jsx("button",{onClick:()=>I(y),className:D("w-full text-left p-2 rounded-lg transition-all duration-200 group border text-xs",(w==null?void 0:w.id)===y.id?"bg-premium/20 border-premium/50 shadow-sm":"bg-card hover:bg-premium/10 border-transparent hover:border-premium/30"),children:e.jsx("div",{className:"flex items-start justify-between gap-2",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:D("font-medium truncate",(w==null?void 0:w.id)===y.id?"text-premium":"text-foreground"),children:y.title}),e.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[e.jsx(z,{className:"h-2.5 w-2.5 text-premium"}),e.jsx("span",{className:"text-[10px] text-premium",children:"Premium"})]})]})})},y.id))})})]},u))})]},`premium-${s}`))]}),!g&&!v&&e.jsx("div",{className:"glass-card p-4 border-2 border-dashed border-premium/30 bg-premium/5 mb-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-premium/10",children:e.jsx(z,{className:"h-5 w-5 text-premium"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-foreground mb-1",children:"Grade 9 Premium Notes"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Access exclusive Grade 9 study notes designed for top marks. Upgrade to premium to unlock."}),e.jsxs(_,{size:"sm",onClick:()=>o("/premium-dashboard"),className:"bg-premium hover:bg-premium/90 text-premium-foreground",children:[e.jsx(z,{className:"h-3 w-3 mr-1"}),"Upgrade to Access"]})]})]})}),Object.keys(Q).length===0&&B.length===0?e.jsxs("div",{className:"glass-card p-8 text-center",children:[e.jsx(ke,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No notes yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first note to get started"}),e.jsxs(_,{onClick:X,children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Create Note"]})]}):e.jsxs(e.Fragment,{children:[Object.keys(Q).length>0&&e.jsx("div",{className:"mb-4",children:e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-3 uppercase tracking-wide",children:"Your Notes"})}),Object.entries(Q).map(([s,l])=>e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"font-semibold text-foreground mb-3",children:s}),e.jsx(Fe,{type:"multiple",className:"space-y-2",defaultValue:Object.keys(l),children:Object.entries(l).map(([u,x])=>e.jsxs(Ge,{value:u,className:"border-none",children:[e.jsxs(Ke,{className:"py-2 px-3 rounded-lg bg-muted/50 hover:bg-muted text-sm font-medium hover:no-underline",children:[u,e.jsx("span",{className:"ml-auto mr-2 text-xs text-muted-foreground",children:x.length})]}),e.jsx($e,{className:"pt-2 pb-0",children:e.jsx("div",{className:"space-y-2 pl-2",children:x.map(y=>e.jsx("button",{onClick:()=>I(y),className:D("w-full text-left p-3 rounded-lg transition-all duration-200 group border",(w==null?void 0:w.id)===y.id?"bg-primary/10 border-primary/30 shadow-sm":"bg-card hover:bg-muted/50 border-transparent hover:border-border/50"),children:e.jsx("div",{className:"flex items-start justify-between gap-2",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:D("font-medium text-sm truncate",(w==null?void 0:w.id)===y.id?"text-primary":"text-foreground"),children:y.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(Oe,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:K(y.updated_at)})]}),y.tags&&y.tags.length>0&&e.jsxs("div",{className:"flex gap-1 mt-2",children:[y.tags.slice(0,2).map((k,P)=>e.jsx("span",{className:D("text-[10px] px-1.5 py-0.5 rounded-full border",oe(k)),children:k},P)),y.tags.length>2&&e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"..."})]})]})})},y.id))})})]},u))})]},s))]})]}),e.jsx("div",{className:"lg:col-span-2 animate-slide-up",style:{animationDelay:"0.3s",opacity:0},children:w?e.jsxs("div",{className:"glass-card p-6 md:p-8 sticky top-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[w.is_premium&&e.jsxs("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-premium/20 text-premium border border-premium/30 flex items-center gap-1",children:[e.jsx(z,{className:"h-3 w-3"}),"Premium Grade 9"]}),w.subject&&e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-primary/10 text-primary",children:w.subject})}),w.topic&&e.jsx("span",{className:"text-xs text-muted-foreground/80 px-2 py-1 rounded-md bg-muted",children:w.topic})]}),e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-foreground mb-2",children:w.title}),w.tags&&w.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:w.tags.map((s,l)=>e.jsxs("span",{className:D("text-xs px-2 py-0.5 rounded-full border",oe(s)),children:["#",s]},l))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:"outline",size:"icon",onClick:()=>E(w),title:"Generate Mind Map",children:e.jsx(sr,{className:"h-4 w-4 text-purple-600"})}),e.jsx(_,{variant:"outline",size:"icon",onClick:()=>ye(w),title:"Export Markdown",children:e.jsx(ar,{className:"h-4 w-4"})}),e.jsx(_,{variant:"outline",size:"icon",onClick:()=>ee(w),title:"Edit Note",children:e.jsx(ir,{className:"h-4 w-4"})}),e.jsx(_,{variant:"outline",size:"icon",onClick:()=>te(w.id),title:"Delete Note",children:e.jsx(cr,{className:"h-4 w-4 text-destructive"})})]})]}),e.jsx("div",{className:"prose prose-sm max-w-none prose-headings:font-bold prose-h1:text-2xl prose-h2:text-xl prose-a:text-primary",children:e.jsx(pr,{content:w.content})}),e.jsxs("div",{className:"flex items-center gap-2 mt-8 pt-4 border-t border-border",children:[e.jsx(Oe,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Last modified ",K(w.updated_at)]})]})]}):e.jsxs("div",{className:"glass-card p-12 text-center flex flex-col items-center justify-center min-h-[400px]",children:[e.jsx(ke,{className:"h-16 w-16 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Select a note"}),e.jsx("p",{className:"text-muted-foreground",children:"Choose a note from the list to view its content"}),e.jsxs(_,{onClick:X,className:"mt-6",children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Create New Note"]})]})})]})]}),e.jsx(fr,{open:$,onOpenChange:O,children:e.jsxs(xr,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs(hr,{children:[e.jsx(gr,{children:G?"Edit Note":"Create New Note"}),e.jsx(vr,{children:"Use markdown to format your note."})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto py-4 space-y-4 pr-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"title",children:"Title *"}),e.jsx(se,{id:"title",value:N.title,onChange:s=>R({...N,title:s.target.value}),placeholder:"Enter note title",className:"text-lg font-medium"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"subject",children:"Subject"}),e.jsx(se,{id:"subject",value:N.subject,onChange:s=>R({...N,subject:s.target.value}),placeholder:"e.g., Biology"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"topic",children:"Topic"}),e.jsx(se,{id:"topic",value:N.topic,onChange:s=>R({...N,topic:s.target.value}),placeholder:"e.g., Cell Biology"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ae,{htmlFor:"content",children:"Content"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(Jn,{children:[e.jsx(eo,{asChild:!0,children:e.jsxs(_,{variant:"ghost",size:"sm",title:"Use Template",children:[e.jsx(lr,{className:"h-4 w-4 mr-2"}),"Template"]})}),e.jsxs($t,{children:[e.jsx(he,{onClick:()=>re("definition"),children:"Definition"}),e.jsx(he,{onClick:()=>re("process"),children:"Process"}),e.jsx(he,{onClick:()=>re("comparison"),children:"Comparison"})]})]}),e.jsx("div",{className:"w-px h-4 bg-border mx-1"}),e.jsx(_,{type:"button",variant:"ghost",size:"sm",onClick:()=>ne("**","**"),title:"Bold",children:e.jsx(dr,{className:"h-4 w-4"})}),e.jsx(_,{type:"button",variant:"ghost",size:"sm",onClick:h,title:"Add Link",children:e.jsx(ur,{className:"h-4 w-4"})}),e.jsx(_,{type:"button",variant:"ghost",size:"sm",onClick:U,title:"Add Image URL",children:e.jsx(mr,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(kr,{id:"content",value:N.content,onChange:s=>R({...N,content:s.target.value}),placeholder:"Write your note content here...",className:"min-h-[300px] font-mono text-sm leading-relaxed"}),e.jsx("div",{className:"absolute bottom-2 right-2 text-xs text-muted-foreground opacity-50",children:"Markdown supported"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{htmlFor:"tags",children:"Tags (comma-separated)"}),e.jsx(se,{id:"tags",value:N.tags,onChange:s=>R({...N,tags:s.target.value}),placeholder:"e.g., important, exam, review"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Shortcuts: ",e.jsx("kbd",{className:"px-1 py-0.5 rounded bg-muted border",children:"Ctrl+S"})," to save"]})]}),e.jsxs(wr,{children:[e.jsx(_,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),e.jsxs(_,{onClick:fe,id:"save-note-btn",children:[G?"Update":"Create"," Note"]})]})]})})]})}export{Do as default};
