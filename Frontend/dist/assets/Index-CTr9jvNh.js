import{j as e,a8 as pe,al as H,au as V,as as G,ab as J,aw as xe,ax as ge,a3 as B,K as fe,L as Y,a9 as Q,ay as be,J as je,at as K,z as ye}from"./ui-vendor-CsSFJReh.js";import{c as _,u as S,j as P,B as z,a as O}from"./index-D0R12c3l.js";import{L as X,r as u,u as ve}from"./react-vendor-BmZbDsmQ.js";import{D as we,a as Ne,b as _e,c as ke,d as Ce,f as De}from"./dialog-BfoGBpVh.js";import{I as R}from"./input-BOrw0D0Z.js";import{L as E}from"./label-CYC1LVAb.js";import{S as Se,a as Pe,b as qe,c as Ae,d as U}from"./select-BnVVC8xh.js";import{P as Le}from"./progress-qwrdNt2A.js";import{h as $e}from"./premium-eVfGSoKP.js";import{A as Te}from"./AppLayout-DI_SoCqt.js";import"./supabase-vendor-BcRMW6g-.js";import"./query-vendor-DjEy6XLK.js";import"./index-BdQq_4o_.js";import"./index-B5-l44BU.js";import"./AnimatedLogoIcon-D5-EYdni.js";import"./sheet-0_ECFM1J.js";const Ee={primary:{iconBg:"bg-primary/10",iconColor:"text-primary",hoverBorder:"hover:border-primary/30"},secondary:{iconBg:"bg-secondary/10",iconColor:"text-secondary",hoverBorder:"hover:border-secondary/30"},accent:{iconBg:"bg-accent/20",iconColor:"text-accent-foreground",hoverBorder:"hover:border-accent/30"},premium:{iconBg:"bg-premium/10",iconColor:"text-premium",hoverBorder:"hover:border-premium/30"}};function Be({icon:a,title:s,description:n,count:r=0,countLabel:p,path:x,color:t,isPremium:h=!1,progress:d}){const c=Ee[t],o=x.startsWith("http"),l=e.jsxs("div",{className:_("module-card relative overflow-hidden transition-all duration-300",c.hoverBorder,"hover:shadow-lg"),children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:_("p-3 rounded-xl transition-transform duration-300 group-hover:scale-110",c.iconBg),children:e.jsx(a,{className:_("h-6 w-6",c.iconColor)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-foreground group-hover:text-primary transition-colors truncate",children:s}),h&&e.jsx("span",{className:"premium-badge shrink-0",children:"PRO"})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:n})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-border/50 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl font-bold text-foreground",children:r}),e.jsx("span",{className:"text-sm text-muted-foreground ml-2",children:p})]}),d!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-16 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:_("h-full rounded-full transition-all duration-500",`bg-${t}`),style:{width:`${d}%`,backgroundColor:t==="primary"?"hsl(var(--primary))":t==="secondary"?"hsl(var(--secondary))":t==="accent"?"hsl(var(--accent))":"hsl(var(--premium))"}})}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[d,"%"]})]})]})]});return o?e.jsx("a",{href:x,className:"block group",children:l}):e.jsx(X,{to:x,className:"block group",children:l})}function ze(){const{supabase:a,user:s}=S(),[n,r]=u.useState([]),[p,x]=u.useState(!0),{t}=P(),h=d=>{const o=Math.floor((new Date().getTime()-d.getTime())/1e3);return o<60?t("dashboard.activity.justNow"):o<3600?t("dashboard.activity.minutesAgo",{count:Math.floor(o/60)}):o<86400?t("dashboard.activity.hoursAgo",{count:Math.floor(o/3600)}):o<604800?t("dashboard.activity.daysAgo",{count:Math.floor(o/86400)}):d.toLocaleDateString()};return u.useEffect(()=>{if(!s)return;(async()=>{try{const c=[],{data:o}=await a.from("notes").select("id, title, updated_at, subject").eq("user_id",s.id).order("updated_at",{ascending:!1}).limit(5);o&&o.forEach(i=>{c.push({icon:H,title:i.subject?`${i.subject}: ${i.title}`:i.title,time:h(new Date(i.updated_at)),date:new Date(i.updated_at),type:"note",color:"text-accent-foreground",bgColor:"bg-accent/20"})});const{data:l}=await a.from("flashcards").select("id, front, updated_at, subject").eq("user_id",s.id).order("updated_at",{ascending:!1}).limit(5);l&&l.forEach(i=>{c.push({icon:V,title:i.subject?`${i.subject} ${t("dashboard.activity.flashcardPrefix")}${i.front.substring(0,30)}${i.front.length>30?"...":""}`:`${t("dashboard.activity.flashcardPrefix")}${i.front.substring(0,30)}${i.front.length>30?"...":""}`,time:h(new Date(i.updated_at)),date:new Date(i.updated_at),type:"flashcard",color:"text-primary",bgColor:"bg-primary/10"})});const{data:g}=await a.from("past_papers").select("id, title, updated_at, subject").eq("user_id",s.id).order("updated_at",{ascending:!1}).limit(5);g&&g.forEach(i=>{c.push({icon:G,title:i.subject?`${i.subject} ${t("dashboard.activity.pastPaperPrefix")}${i.title}`:i.title,time:h(new Date(i.updated_at)),date:new Date(i.updated_at),type:"paper",color:"text-secondary",bgColor:"bg-secondary/10"})});const{data:y}=await a.from("extracurriculars").select("id, name, updated_at").eq("user_id",s.id).order("updated_at",{ascending:!1}).limit(5);y&&y.forEach(i=>{c.push({icon:J,title:`${t("dashboard.activity.loggedPrefix")}${i.name}`,time:h(new Date(i.updated_at)),date:new Date(i.updated_at),type:"extracurricular",color:"text-premium",bgColor:"bg-premium/10"})}),c.sort((i,f)=>f.date.getTime()-i.date.getTime());const v=c.slice(0,4).map(({date:i,...f})=>f);r(v)}catch{}finally{x(!1)}})()},[s,a,t]),e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:t("dashboard.activity.title")}),e.jsx("button",{onClick:()=>{const{toast:d}=require("@/hooks/use-toast");d({title:t("dashboard.activity.comingSoonTitle"),description:t("dashboard.activity.comingSoonDesc")})},className:"text-sm text-primary hover:underline hover:opacity-80 transition-opacity",children:t("dashboard.activity.viewAll")})]}),e.jsx("div",{className:"space-y-4",children:p?e.jsx("p",{className:"text-sm text-muted-foreground",children:t("dashboard.activity.loading")}):n.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:t("dashboard.activity.noActivity")}):n.map((d,c)=>e.jsxs("div",{className:"flex items-start gap-3 animate-slide-up",style:{animationDelay:`${c*.1}s`,opacity:0},children:[e.jsx("div",{className:_("p-2 rounded-lg flex-shrink-0",d.bgColor),children:e.jsx(d.icon,{className:_("h-4 w-4",d.color)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:d.title}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[e.jsx(pe,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:d.time})]})]})]},c))})]})}function Fe(){const{supabase:a,user:s}=S(),[n,r]=u.useState([]),[p,x]=u.useState(!0),{t}=P();return u.useEffect(()=>{if(!s)return;(async()=>{try{const d=[],{count:c}=await a.from("notes").select("*",{count:"exact",head:!0}).eq("user_id",s.id),{count:o}=await a.from("flashcards").select("*",{count:"exact",head:!0}).eq("user_id",s.id),{count:l}=await a.from("past_papers").select("*",{count:"exact",head:!0}).eq("user_id",s.id);c===0?d.push({title:t("dashboard.suggestions.createFirstNote"),description:t("dashboard.suggestions.organisingStudies"),action:t("dashboard.suggestions.getStarted"),path:"/notes"}):c&&c>0&&d.push({title:t("dashboard.suggestions.continueNotes"),description:t("dashboard.suggestions.haveNotes",{count:c,plural:c>1?"s":""}),action:t("dashboard.suggestions.viewNotes"),path:"/notes"}),o===0?d.push({title:t("dashboard.suggestions.createFlashcards"),description:t("dashboard.suggestions.improveRetention"),action:t("dashboard.suggestions.createCards"),path:"/flashcards"}):o&&o>0&&d.push({title:t("dashboard.suggestions.reviewFlashcards"),description:t("dashboard.suggestions.haveFlashcards",{count:o,plural:o>1?"s":""}),action:t("dashboard.suggestions.practiceNow"),path:"/flashcards"}),l===0?d.push({title:t("dashboard.suggestions.tryPastPaper"),description:t("dashboard.suggestions.practiceExams"),action:t("dashboard.suggestions.addPapers"),path:"/past-papers"}):l&&l>0&&d.push({title:t("dashboard.suggestions.completePastPaper"),description:t("dashboard.suggestions.havePapers",{count:l,plural:l>1?"s":""}),action:t("dashboard.suggestions.startQuiz"),path:"/past-papers"}),r(d.slice(0,3))}catch{}finally{x(!1)}})()},[s,a]),e.jsxs("div",{className:"glass-card p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-accent/20 to-transparent rounded-full blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-accent/20",children:e.jsx(xe,{className:"h-5 w-5 text-accent-foreground"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:t("dashboard.suggestions.title")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t("dashboard.suggestions.basedOnActivity")})]})]}),e.jsx("div",{className:"space-y-3",children:p?e.jsx("p",{className:"text-sm text-muted-foreground",children:t("dashboard.suggestions.loading")}):n.length===0?e.jsx("p",{className:"text-sm text-muted-foreground py-4",children:t("dashboard.suggestions.noSuggestions")}):n.map((h,d)=>e.jsx(X,{to:h.path,className:"block p-4 rounded-xl bg-muted/50 hover:bg-muted transition-all duration-200 cursor-pointer group animate-slide-up",style:{animationDelay:`${d*.1}s`,opacity:0},children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-foreground mb-1",children:h.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:h.description})]}),e.jsxs(z,{size:"sm",variant:"ghost",className:"flex-shrink-0 text-primary group-hover:bg-primary group-hover:text-primary-foreground transition-colors",children:[h.action,e.jsx(ge,{className:"h-4 w-4 ml-1"})]})]})},d))}),e.jsx("div",{className:"mt-4 p-4 rounded-xl border border-premium/30 bg-premium/5",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"p-2 rounded-lg flex-shrink-0",style:{background:"var(--gradient-premium)"},children:e.jsx(B,{className:"h-5 w-5 text-premium-foreground"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:t("dashboard.suggestions.unlockAI")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t("dashboard.suggestions.getPersonalized")})]})]}),e.jsx(z,{size:"sm",className:"w-full sm:w-auto bg-premium hover:bg-premium/90 text-premium-foreground shrink-0",children:t("dashboard.suggestions.upgrade")})]})})]})]})}const Me={high:"bg-destructive/10 text-destructive border-destructive/20",medium:"bg-accent/20 text-accent-foreground border-accent/30",low:"bg-secondary/10 text-secondary border-secondary/20"};function Ie(){const{supabase:a,user:s}=S(),{t:n}=P(),[r,p]=u.useState([]),[x,t]=u.useState(!0),[h,d]=u.useState(!1),[c,o]=u.useState(!1),[l,g]=u.useState(""),[y,v]=u.useState(""),[i,f]=u.useState("medium"),[w,q]=u.useState(""),A=async()=>{if(s)try{const{data:m,error:j}=await a.from("tasks").select("*").eq("user_id",s.id).eq("completed",!1).order("due_date",{ascending:!0}).limit(5);if(j)throw j;p(m||[])}catch{}finally{t(!1)}};u.useEffect(()=>{A()},[s,a]);const F=async m=>{if(m.preventDefault(),!!s){if(!l){O.error(n("dashboard.tasks.errorTitle"));return}d(!0);try{const{error:j}=await a.from("tasks").insert([{user_id:s.id,title:l,subject:y,priority:i,due_date:w||new Date().toISOString()}]);if(j)throw j;O.success(n("dashboard.tasks.successAdd")),o(!1),M(),A()}catch{O.error(n("dashboard.tasks.errorAdd"))}finally{d(!1)}}},M=()=>{g(""),v(""),f("medium"),q("")},I=m=>new Date(m).toLocaleDateString("en-US",{month:"short",day:"numeric"});return e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:n("dashboard.tasks.title")}),e.jsxs(we,{open:c,onOpenChange:o,children:[e.jsx(Ne,{asChild:!0,children:e.jsxs(z,{variant:"ghost",size:"sm",className:"text-primary gap-1.5",children:[e.jsx(fe,{className:"h-4 w-4"}),n("dashboard.tasks.addTask")]})}),e.jsxs(_e,{className:"sm:max-w-[425px]",children:[e.jsx(ke,{children:e.jsx(Ce,{children:n("dashboard.tasks.addNewTask")})}),e.jsxs("form",{onSubmit:F,className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"title",children:n("dashboard.tasks.taskTitle")}),e.jsx(R,{id:"title",placeholder:n("dashboard.tasks.titlePlaceholder"),value:l,onChange:m=>g(m.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"subject",children:n("dashboard.tasks.subject")}),e.jsx(R,{id:"subject",placeholder:n("dashboard.tasks.subjectPlaceholder"),value:y,onChange:m=>v(m.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"priority",children:n("dashboard.tasks.priority")}),e.jsxs(Se,{value:i,onValueChange:f,children:[e.jsx(Pe,{id:"priority",children:e.jsx(qe,{placeholder:n("dashboard.tasks.selectPriority")})}),e.jsxs(Ae,{children:[e.jsx(U,{value:"low",children:n("dashboard.tasks.low")}),e.jsx(U,{value:"medium",children:n("dashboard.tasks.medium")}),e.jsx(U,{value:"high",children:n("dashboard.tasks.high")})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"due_date",children:n("dashboard.tasks.dueDate")}),e.jsx(R,{id:"due_date",type:"date",value:w,onChange:m=>q(m.target.value)})]})]}),e.jsx(De,{className:"pt-4",children:e.jsxs(z,{type:"submit",disabled:h,children:[h&&e.jsx(Y,{className:"mr-2 h-4 w-4 animate-spin"}),n("dashboard.tasks.addTask")]})})]})]})]})]}),e.jsx("div",{className:"space-y-3",children:x?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(Y,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):r.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Q,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n("dashboard.tasks.noTasks")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:n("dashboard.tasks.tasksWillAppear")})]}):r.map((m,j)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50 hover:bg-muted transition-colors cursor-pointer group animate-slide-up",style:{animationDelay:`${j*.1}s`,opacity:0},children:[e.jsx("div",{className:_("p-2 rounded-lg border",Me[m.priority]),children:m.priority==="high"?e.jsx(be,{className:"h-4 w-4"}):e.jsx(Q,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:m.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[m.subject&&`${m.subject} â€¢ `,I(m.due_date)]})]}),e.jsx(je,{className:"h-4 w-4 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity"})]},m.id))})]})}function Oe(){var i;const{supabase:a,user:s}=S(),n=ve(),{t:r}=P(),[p,x]=u.useState(null),[t,h]=u.useState({notesCount:0,flashcardsCount:0,papersCount:0,streak:0}),[d,c]=u.useState(!0),[o,l]=u.useState(null),g=new Date().getHours(),y=g<12?r("dashboard.welcome.goodMorning"):g<18?r("dashboard.welcome.goodAfternoon"):r("dashboard.welcome.goodEvening");u.useEffect(()=>{if(!s)return;(async()=>{try{const{data:w}=await a.from("profiles").select("full_name, email").eq("id",s.id).single();w&&x(w);const[q,A,F,M,I,m,j,Z,ee,te,se,ae,re,oe,ie]=await Promise.all([a.from("notes").select("*",{count:"exact",head:!0}).eq("user_id",s.id),a.from("flashcards").select("*",{count:"exact",head:!0}).eq("user_id",s.id),a.from("past_papers").select("*",{count:"exact",head:!0}).eq("user_id",s.id),a.from("notes").select("created_at, updated_at").eq("user_id",s.id),a.from("flashcards").select("created_at, updated_at, last_reviewed").eq("user_id",s.id),a.from("ai_usage_tracking").select("created_at").eq("user_id",s.id),a.from("ai_chat_sessions").select("created_at, updated_at").eq("user_id",s.id),a.from("knowledge_organizers").select("created_at, updated_at").eq("user_id",s.id),a.from("past_papers").select("created_at, updated_at, completed_at").eq("user_id",s.id),a.from("homework").select("created_at, updated_at").eq("user_id",s.id),a.from("tasks").select("created_at, updated_at").eq("user_id",s.id),a.from("mind_maps").select("created_at, updated_at").eq("user_id",s.id),a.from("exam_submissions").select("created_at, submission_date").eq("user_id",s.id),a.from("study_sessions").select("date, created_at").eq("user_id",s.id),a.from("extracurriculars").select("created_at, updated_at").eq("user_id",s.id)]),L=N=>`${N.getFullYear()}-${String(N.getMonth()+1).padStart(2,"0")}-${String(N.getDate()).padStart(2,"0")}`,C=new Set,b=(N,$)=>{(N||[]).forEach(k=>{$.forEach(D=>{if(k[D])try{C.add(L(new Date(k[D])))}catch{}})})};b(M.data,["created_at","updated_at"]),b(I.data,["created_at","updated_at","last_reviewed"]),b(m.data,["created_at"]),b(j.data,["created_at","updated_at"]),b(Z.data,["created_at","updated_at"]),b(ee.data,["created_at","updated_at","completed_at"]),b(te.data,["created_at","updated_at"]),b(se.data,["created_at","updated_at"]),b(ae.data,["created_at","updated_at"]),b(re.data,["created_at","submission_date"]),b(oe.data,["date","created_at"]),b(ie.data,["created_at","updated_at"]);const de=(()=>{if(C.size===0)return 0;const N=L(new Date),$=L(new Date(Date.now()-864e5));let k;if(C.has(N))k=N;else if(C.has($))k=$;else return 0;let D=0,T=k;for(;C.has(T);){D++;const[le,ue,me]=T.split("-").map(Number),he=new Date(le,ue-1,me-1);T=L(he)}return D})();h({notesCount:q.count||0,flashcardsCount:A.count||0,papersCount:F.count||0,streak:de});const ne=new Date(Date.now()-24*60*60*1e3).toISOString(),{count:ce}=await a.from("ai_usage_tracking").select("*",{count:"exact",head:!0}).eq("user_id",s.id).gt("created_at",ne),W=await $e(a);l({count:ce||0,limit:W?500:10,isPremium:W})}catch{}finally{c(!1)}})()},[s,a]);const v=(p==null?void 0:p.full_name)||((i=p==null?void 0:p.email)==null?void 0:i.split("@")[0])||"there";return e.jsxs("div",{className:"relative overflow-hidden rounded-2xl p-6 md:p-8",style:{background:"var(--gradient-primary)"},children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-white/5 rounded-full blur-2xl translate-y-1/2 -translate-x-1/2"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary-foreground/80",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:y})]}),e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-primary-foreground",children:r("dashboard.welcome.welcomeBack",{name:v})}),e.jsx("p",{className:"text-primary-foreground/80 max-w-md",children:d?r("dashboard.welcome.loading"):t.notesCount+t.flashcardsCount+t.papersCount===0?r("dashboard.welcome.getStarted"):r("dashboard.welcome.makingProgress")}),o&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[e.jsxs("button",{onClick:()=>n("/ai-tutor"),className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white/20 hover:bg-white/30 text-white transition-colors text-sm font-medium backdrop-blur-md",children:[e.jsx(K,{className:"h-4 w-4"}),r("dashboard.welcome.chatWithAI"),e.jsx("span",{className:"text-xs opacity-80 ml-1",children:o.isPremium?`(${r("dashboard.welcome.lifetimeAccess")})`:`(${o.limit-o.count} ${r("common.left")})`})]}),!o.isPremium&&e.jsxs("button",{onClick:()=>n("/premium-dashboard"),className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-premium hover:bg-premium/90 text-premium-foreground transition-all shadow-lg shadow-premium/20 text-sm font-bold border border-premium-foreground/20 animate-pulse-subtle",children:[e.jsx(B,{className:"h-4 w-4"}),r("dashboard.welcome.unlockLifetime")]})]})]}),t.notesCount+t.flashcardsCount+t.papersCount>0&&e.jsxs("div",{className:"glass-card bg-white/10 backdrop-blur-sm border-white/20 p-4 rounded-xl min-w-[160px]",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary-foreground/80 text-sm mb-2",children:[e.jsx(ye,{className:"h-4 w-4"}),e.jsx("span",{children:r("dashboard.welcome.totalItems")})]}),e.jsx("div",{className:"text-3xl font-bold text-primary-foreground mb-2",children:t.notesCount+t.flashcardsCount+t.papersCount}),e.jsx(Le,{value:Math.min(100,(t.notesCount+t.flashcardsCount+t.papersCount)/100*100),className:"h-2 bg-white/20"})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-6",children:[{label:r("dashboard.welcome.notes"),value:t.notesCount.toString(),change:t.notesCount===0?r("dashboard.welcome.noneYet"):r("dashboard.welcome.created")},{label:r("dashboard.welcome.flashcards"),value:t.flashcardsCount.toString(),change:t.flashcardsCount===0?r("dashboard.welcome.noneYet"):r("dashboard.welcome.created")},{label:r("dashboard.welcome.pastPapers"),value:t.papersCount.toString(),change:t.papersCount===0?r("dashboard.welcome.noneYet"):r("dashboard.welcome.added")},{label:r("dashboard.welcome.studyStreak"),value:t.streak>0?r("dashboard.welcome.days",{count:t.streak}):r("dashboard.welcome.days",{count:0}),change:t.streak>0?r("dashboard.welcome.keepGoing"):r("dashboard.welcome.startStudying")}].map((f,w)=>e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-3 animate-scale-in",style:{animationDelay:`${w*.1}s`,opacity:0},children:[e.jsx("p",{className:"text-primary-foreground/70 text-xs mb-1",children:f.label}),e.jsx("p",{className:"text-primary-foreground font-bold text-lg",children:f.value}),e.jsx("p",{className:"text-primary-foreground/60 text-xs mt-0.5",children:f.change})]},f.label))})]})]})}function rt(){var c;const{supabase:a,user:s}=S(),[n,r]=u.useState({}),[p,x]=u.useState(!0),{t}=P(),h=[{icon:H,title:t("features.examNotes.title"),description:t("features.examNotes.description"),countLabel:t("nav.notes").toLowerCase(),path:"/notes",color:"primary",tableName:"notes"},{icon:V,title:t("features.flashcards.title"),description:t("features.flashcards.description"),countLabel:t("nav.flashcards").toLowerCase(),path:"/flashcards",color:"secondary",tableName:"flashcards"},{icon:G,title:t("features.pastPapers.title"),description:t("features.pastPapers.description"),countLabel:t("nav.pastPapers").toLowerCase(),path:"/past-papers",color:"accent",tableName:"past_papers"},{icon:K,title:t("features.knowledgeOrganisers.title"),description:t("features.knowledgeOrganisers.description"),countLabel:t("nav.knowledge").toLowerCase(),path:"/knowledge",color:"primary",tableName:"knowledge_organizers"},{icon:J,title:t("features.extracurriculars.title"),description:t("features.extracurriculars.description"),countLabel:t("nav.extracurricular").toLowerCase(),path:"/extracurricular",color:"premium",tableName:"extracurriculars"},{icon:B,title:t("features.aiQuestions.title"),description:t("features.aiQuestions.description"),countLabel:((c=t("features.aiQuestions.title").split(" ").pop())==null?void 0:c.toLowerCase())||"questions",path:"/ai-tutor",color:"premium",tableName:"ai_usage_tracking"}];u.useEffect(()=>{if(!s)return;(async()=>{try{const l={};for(const g of h)if(g.tableName){const{count:y,error:v}=await a.from(g.tableName).select("*",{count:"exact",head:!0}).eq("user_id",s.id);v||(l[g.tableName]=y||0)}r(l)}catch{}finally{x(!1)}})()},[s,a]);const d=h.map(o=>{const l=o.tableName&&n[o.tableName]||0;return{...o,count:l,progress:void 0}});return e.jsx(Te,{children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsx("section",{className:"animate-fade-in",children:e.jsx(Oe,{})}),e.jsxs("section",{children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h2",{className:"text-xl font-bold text-foreground",children:t("common.quickAccess")})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map((o,l)=>e.jsx("div",{className:"animate-slide-up",style:{animationDelay:`${l*.1}s`,opacity:0},children:e.jsx(Be,{...o})},o.title))})]}),e.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"animate-slide-up",style:{animationDelay:"0.2s",opacity:0},children:e.jsx(ze,{})}),e.jsx("div",{className:"animate-slide-up",style:{animationDelay:"0.3s",opacity:0},children:e.jsx(Ie,{})})]}),e.jsx("section",{className:"animate-slide-up",style:{animationDelay:"0.4s",opacity:0},children:e.jsx(Fe,{})})]})})}export{rt as default};
