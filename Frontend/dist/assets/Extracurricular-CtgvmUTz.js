import{j as e,L as K,z as D,F as X,G as Z,H as A,I as y,J as ee,K as S,M as re,N as se,U as te,O as ae,Q as ie,V,W as I,Y as ne}from"./ui-vendor-BkbvuH_y.js";import{A as O}from"./AppLayout-CN79_BfK.js";import{B as x}from"./button-EqlKTezP.js";import{D as le,b as ce,c as oe,d as de,e as me}from"./dialog-DEEVtVen.js";import{I as f}from"./input-BZEgG1eO.js";import{L as m}from"./label-Bxm2S76w.js";import{P as ue}from"./progress-CsqQkRqT.js";import{S as z,a as M,b as B,c as U,d as W}from"./select-BfIDHEDX.js";import{T as xe}from"./textarea-CYkmGJ0i.js";import{u as he,b as pe,c as v}from"./index-DN2StWe2.js";import{r as u}from"./react-vendor-CW_qxVlV.js";import"./sheet-YK_0sUrL.js";import"./index-BdQq_4o_.js";import"./index-Ca2jQLVk.js";import"./supabase-vendor-DI52Tw1b.js";import"./query-vendor-B5gxQqnu.js";const C={work:{icon:ie,color:"primary",label:"Work Experience"},volunteer:{icon:ae,color:"secondary",label:"Volunteering"},club:{icon:te,color:"accent",label:"Clubs & Societies"},sports:{icon:A,color:"primary",label:"Sports"},arts:{icon:se,color:"premium",label:"Arts & Music"},leadership:{icon:y,color:"accent",label:"Leadership"},academic:{icon:re,color:"secondary",label:"Academic"}};function He(){var q;const{supabase:h,user:n}=he(),{toast:i}=pe(),[c,g]=u.useState([]),[N,b]=u.useState(!0),[t,E]=u.useState(null),[R,w]=u.useState(!1),[j,L]=u.useState(null),[a,d]=u.useState({name:"",description:"",category:"",hours:"",targetHours:"",start_date:"",end_date:"",achievements:"",external_link:""});u.useEffect(()=>{n&&k()},[n]);const k=async()=>{if(n)try{b(!0);const{data:r,error:s}=await h.from("extracurriculars").select("*").eq("user_id",n.id).order("start_date",{ascending:!1});if(s)throw s;g(r||[])}catch{i({title:"Error",description:"Failed to load activities. Please try again.",variant:"destructive"})}finally{b(!1)}},F=()=>{L(null),d({name:"",description:"",category:"",hours:"",targetHours:"",start_date:"",end_date:"",achievements:"",external_link:""}),w(!0)},H=r=>{var s;L(r),d({name:r.name,description:r.description||"",category:r.category||"",hours:r.hours.toString(),targetHours:"",start_date:r.start_date||"",end_date:r.end_date||"",achievements:((s=r.achievements)==null?void 0:s.join(", "))||"",external_link:r.external_link||""}),w(!0)},Y=async()=>{var r;if(!n||!a.name.trim()){i({title:"Error",description:"Activity name is required",variant:"destructive"});return}try{const s=a.achievements?a.achievements.split(",").map(l=>l.trim()).filter(Boolean):[],o={user_id:n.id,name:a.name,description:a.description||null,category:a.category||null,hours:parseInt(a.hours)||0,start_date:a.start_date||null,end_date:a.end_date||null,achievements:s.length>0?s:null,external_link:((r=a.external_link)==null?void 0:r.trim())||null};if(j){const{error:l}=await h.from("extracurriculars").update(o).eq("id",j.id).eq("user_id",n.id);if(l)throw l;i({title:"Success",description:"Activity updated successfully"})}else{const{error:l}=await h.from("extracurriculars").insert(o);if(l)throw l;i({title:"Success",description:"Activity created successfully"})}w(!1),k()}catch(s){i({title:"Error",description:s.message||"Failed to save activity. Please try again.",variant:"destructive"})}},P=async r=>{if(n&&confirm("Are you sure you want to delete this activity?"))try{const{error:s}=await h.from("extracurriculars").delete().eq("id",r).eq("user_id",n.id);if(s)throw s;i({title:"Success",description:"Activity deleted successfully"}),(t==null?void 0:t.id)===r&&E(null),k()}catch{i({title:"Error",description:"Failed to delete activity. Please try again.",variant:"destructive"})}},G=async(r,s)=>{if(!n||!s||s<=0){i({title:"Error",description:"Please enter a valid number of hours",variant:"destructive"});return}try{const o=c.find(_=>_.id===r);if(!o)return;const{error:l}=await h.from("extracurriculars").update({hours:o.hours+s}).eq("id",r).eq("user_id",n.id);if(l)throw l;i({title:"Success",description:`${s} hours logged successfully`}),k()}catch{i({title:"Error",description:"Failed to log hours. Please try again.",variant:"destructive"})}},Q=c.reduce((r,s)=>r+s.hours,0),$=c.reduce((r,s)=>{var o;return r+(((o=s.achievements)==null?void 0:o.length)||0)},0),T=r=>r?new Date(r).toLocaleDateString("en-US",{month:"short",year:"numeric"}):"";return N?e.jsx(O,{children:e.jsx("div",{className:"max-w-6xl mx-auto flex items-center justify-center h-[60vh]",children:e.jsx(K,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}):e.jsxs(O,{children:[e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-foreground",children:"Extracurricular Tracker"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Track your activities, hours, and achievements"})]}),e.jsxs(x,{onClick:F,children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Add Activity"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 animate-slide-up",style:{animationDelay:"0.1s",opacity:0},children:[{label:"Total Hours",value:Q,icon:X,color:"primary"},{label:"Activities",value:c.length,icon:Z,color:"secondary"},{label:"Achievements",value:$,icon:A,color:"accent"},{label:"Active",value:c.filter(r=>!r.end_date).length,icon:y,color:"premium"}].map(r=>e.jsx("div",{className:"glass-card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:v("p-2 rounded-lg",r.color==="primary"&&"bg-primary/10",r.color==="secondary"&&"bg-secondary/10",r.color==="accent"&&"bg-accent/20",r.color==="premium"&&"bg-premium/10"),children:e.jsx(r.icon,{className:v("h-5 w-5",r.color==="primary"&&"text-primary",r.color==="secondary"&&"text-secondary",r.color==="accent"&&"text-accent-foreground",r.color==="premium"&&"text-premium")})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-foreground",children:r.value}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.label})]})]})},r.label))}),e.jsxs("div",{className:"glass-card p-6 animate-slide-up",style:{animationDelay:"0.15s",opacity:0},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ee,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"font-semibold text-foreground",children:"Find Opportunities"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Explore work experience, volunteering, and skill-building opportunities"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[{name:"Do-it",url:"https://doit.life/volunteer",desc:"Find volunteering opportunities near you",category:"Volunteering"},{name:"vInspired",url:"https://vinspired.com",desc:"Youth volunteering and social action",category:"Volunteering"},{name:"Springpod",url:"https://www.springpod.com",desc:"Virtual work experience programmes",category:"Work Experience"},{name:"RateMyPlacement",url:"https://www.ratemyplacement.co.uk",desc:"Student placements and internships",category:"Work Experience"},{name:"Investin",url:"https://investin.org",desc:"Career experience programmes",category:"Work Experience"},{name:"NCS",url:"https://wearencs.com",desc:"National Citizen Service programmes",category:"Leadership"},{name:"DofE",url:"https://www.dofe.org",desc:"Duke of Edinburgh Award",category:"Skills"},{name:"Young Enterprise",url:"https://www.young-enterprise.org.uk",desc:"Business and entrepreneurship skills",category:"Skills"}].map(r=>e.jsx("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"group p-3 rounded-lg bg-muted/50 hover:bg-muted border border-transparent hover:border-primary/20 transition-all duration-200",children:e.jsx("div",{className:"flex items-start justify-between gap-2",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"font-medium text-sm text-foreground group-hover:text-primary transition-colors",children:r.name}),e.jsx(S,{className:"h-3 w-3 text-muted-foreground group-hover:text-primary opacity-0 group-hover:opacity-100 transition-all"})]}),e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-primary/10 text-primary mt-1 inline-block",children:r.category}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:r.desc})]})})},r.name))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 animate-slide-up",style:{animationDelay:"0.2s",opacity:0},children:c.length===0?e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsx(y,{className:"h-16 w-16 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No activities yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first activity to get started"}),e.jsxs(x,{onClick:F,children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Add Activity"]})]}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"font-semibold text-foreground mb-6",children:"Activity Timeline"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-border"}),e.jsx("div",{className:"space-y-6",children:c.map(r=>{const s=C[r.category||""]||{icon:y,color:"primary",label:r.category||"Other"},o=s.icon,l=100,_=Math.min(r.hours/l*100,100);return e.jsxs("div",{className:"relative pl-12 cursor-pointer group",onClick:()=>E(r),children:[e.jsx("div",{className:v("absolute left-0 top-1 w-8 h-8 rounded-full flex items-center justify-center border-2 border-background transition-transform group-hover:scale-110",s.color==="primary"&&"bg-primary",s.color==="secondary"&&"bg-secondary",s.color==="accent"&&"bg-accent",s.color==="premium"&&"bg-premium"),children:e.jsx(o,{className:"h-4 w-4 text-primary-foreground"})}),e.jsxs("div",{className:v("p-4 rounded-xl transition-all duration-200",(t==null?void 0:t.id)===r.id?"bg-primary/5 border border-primary/20":"bg-muted/50 hover:bg-muted"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:v("text-xs font-medium px-2 py-0.5 rounded-full",s.color==="primary"&&"bg-primary/10 text-primary",s.color==="secondary"&&"bg-secondary/10 text-secondary",s.color==="accent"&&"bg-accent/20 text-accent-foreground",s.color==="premium"&&"bg-premium/10 text-premium"),children:s.label}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[T(r.start_date),r.end_date&&` - ${T(r.end_date)}`]})]}),e.jsx("h4",{className:"font-semibold text-foreground",children:r.name}),r.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:r.description}),r.external_link&&e.jsxs("a",{href:r.external_link,target:"_blank",rel:"noopener noreferrer",onClick:p=>p.stopPropagation(),className:"inline-flex items-center gap-1 text-xs text-primary hover:underline mt-1",children:[e.jsx(S,{className:"h-3 w-3"}),"View Link"]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(x,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:p=>{p.stopPropagation(),H(r)},children:e.jsx(V,{className:"h-4 w-4"})}),e.jsx(x,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:p=>{p.stopPropagation(),P(r.id)},children:e.jsx(I,{className:"h-4 w-4 text-destructive"})}),e.jsx(ne,{className:"h-5 w-5 text-muted-foreground group-hover:text-foreground transition-colors"})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[e.jsxs("span",{className:"text-muted-foreground",children:[r.hours," / ",l," hours"]}),e.jsxs("span",{className:"font-medium text-foreground",children:[Math.round(_),"%"]})]}),e.jsx(ue,{value:_,className:"h-1.5"})]}),r.achievements&&r.achievements.length>0&&e.jsx("div",{className:"flex items-center gap-2 mt-3 flex-wrap",children:r.achievements.map((p,J)=>e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-full bg-accent/20 text-accent-foreground",children:[e.jsx(A,{className:"h-3 w-3"}),p]},J))})]})]},r.id)})})]})]})}),e.jsxs("div",{className:"lg:col-span-1 space-y-6 animate-slide-up",style:{animationDelay:"0.3s",opacity:0},children:[t?e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Activity Details"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(x,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>H(t),children:e.jsx(V,{className:"h-4 w-4"})}),e.jsx(x,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>P(t.id),children:e.jsx(I,{className:"h-4 w-4 text-destructive"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Name"}),e.jsx("p",{className:"font-medium text-foreground",children:t.name})]}),t.description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Description"}),e.jsx("p",{className:"text-foreground",children:t.description})]}),t.external_link&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"External Link"}),e.jsxs("a",{href:t.external_link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-primary hover:underline",children:[e.jsx(S,{className:"h-4 w-4"}),t.external_link]})]}),t.category&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Category"}),e.jsx("p",{className:"font-medium text-foreground",children:((q=C[t.category])==null?void 0:q.label)||t.category})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Hours Logged"}),e.jsxs("p",{className:"font-medium text-foreground",children:[t.hours," hours"]})]}),e.jsxs("div",{className:"pt-4 border-t border-border",children:[e.jsx("p",{className:"text-sm font-medium text-foreground mb-2",children:"Achievements"}),t.achievements&&t.achievements.length>0?e.jsx("div",{className:"space-y-1",children:t.achievements.map((r,s)=>e.jsxs("div",{className:"text-sm text-foreground flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4 text-accent-foreground"}),r]},s))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No achievements yet"})]})]})]}):e.jsxs("div",{className:"glass-card p-6 text-center",children:[e.jsx(y,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-3"}),e.jsx("h3",{className:"font-semibold text-foreground mb-1",children:"Select an activity"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click on any activity to view details"})]}),c.length>0&&e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"font-semibold text-foreground mb-4",children:"Log Hours"}),e.jsx(ge,{activities:c,onLogHours:G})]})]})]})]}),e.jsx(le,{open:R,onOpenChange:w,children:e.jsxs(ce,{className:"sm:max-w-[500px]",children:[e.jsxs(oe,{children:[e.jsx(de,{children:j?"Edit Activity":"Add New Activity"}),e.jsx(me,{children:j?"Update your activity details below":"Track a new extracurricular activity or work experience."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"name",children:"Activity Name *"}),e.jsx(f,{id:"name",value:a.name,onChange:r=>d({...a,name:r.target.value}),placeholder:"e.g., Volunteer at Local Library"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"category",children:"Category"}),e.jsxs(z,{value:a.category,onValueChange:r=>d({...a,category:r}),children:[e.jsx(M,{children:e.jsx(B,{placeholder:"Select category"})}),e.jsx(U,{children:Object.entries(C).map(([r,s])=>e.jsx(W,{value:r,children:s.label},r))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"description",children:"Description"}),e.jsx(xe,{id:"description",value:a.description,onChange:r=>d({...a,description:r.target.value}),placeholder:"Describe your responsibilities..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"hours",children:"Hours Logged"}),e.jsx(f,{id:"hours",type:"number",value:a.hours,onChange:r=>d({...a,hours:r.target.value}),placeholder:"0"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"start_date",children:"Start Date"}),e.jsx(f,{id:"start_date",type:"date",value:a.start_date,onChange:r=>d({...a,start_date:r.target.value})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"end_date",children:"End Date (optional)"}),e.jsx(f,{id:"end_date",type:"date",value:a.end_date,onChange:r=>d({...a,end_date:r.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"achievements",children:"Achievements (comma-separated)"}),e.jsx(f,{id:"achievements",value:a.achievements,onChange:r=>d({...a,achievements:r.target.value}),placeholder:"e.g., Award winner, Team leader"})]}),e.jsxs(x,{className:"w-full mt-2",onClick:Y,children:[j?"Update":"Add"," Activity"]})]})]})})]})}function ge({activities:h,onLogHours:n}){const[i,c]=u.useState(""),[g,N]=u.useState(""),b=t=>{t.preventDefault(),i&&g&&(n(i,parseFloat(g)),N(""))};return e.jsxs("form",{onSubmit:b,className:"space-y-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"quick-activity",children:"Activity"}),e.jsxs(z,{value:i,onValueChange:c,children:[e.jsx(M,{children:e.jsx(B,{placeholder:"Select activity"})}),e.jsx(U,{children:h.map(t=>e.jsx(W,{value:t.id,children:t.name},t.id))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"quick-hours",children:"Hours"}),e.jsx(f,{id:"quick-hours",type:"number",step:"0.5",value:g,onChange:t=>N(t.target.value),placeholder:"2"})]}),e.jsxs(x,{type:"submit",className:"w-full",disabled:!i||!g,children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Log Hours"]})]})}export{He as default};
