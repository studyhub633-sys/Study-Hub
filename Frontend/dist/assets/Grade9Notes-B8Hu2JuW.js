import{j as e,L as C,a8 as m,aZ as Q,C as k,a3 as L,ax as V,a1 as P,s as $,p as q,$ as D,ae as H}from"./ui-vendor-BkbvuH_y.js";import{A as d}from"./AppLayout-CN79_BfK.js";import{S as Z}from"./SimpleMarkdown-BxTg1FVm.js";import{B as E}from"./badge-8zULNQpi.js";import{B as x}from"./button-EqlKTezP.js";import{C as j,d as b}from"./card-Cz4xV7e7.js";import{I as J}from"./input-BZEgG1eO.js";import{S as K,a as W,b as X,c as Y,d as G}from"./select-BfIDHEDX.js";import{u as ee,b as se,c as o}from"./index-DN2StWe2.js";import{h as te}from"./premium-eVfGSoKP.js";import{u as ae,r as l}from"./react-vendor-CW_qxVlV.js";import"./sheet-YK_0sUrL.js";import"./index-BdQq_4o_.js";import"./index-Ca2jQLVk.js";import"./supabase-vendor-DI52Tw1b.js";import"./query-vendor-B5gxQqnu.js";function we(){const{supabase:c,user:u}=ee(),{toast:N}=se(),h=ae(),[p,A]=l.useState([]),[B,w]=l.useState(!0),[g,M]=l.useState(!1),[T,v]=l.useState(!0),[i,_]=l.useState(""),[f,I]=l.useState("All Subjects"),[t,y]=l.useState(null),U=Array.from(new Set(p.map(s=>s.subject).filter(Boolean)));l.useEffect(()=>{u?z():v(!1)},[u]),l.useEffect(()=>{g&&F()},[g]);const z=async()=>{if(!(!u||!c))try{const s=await te(c);M(s)}catch{}finally{v(!1)}},F=async()=>{if(c)try{w(!0);const{data:s,error:a}=await c.from("global_premium_notes").select("*").eq("grade_level","9").order("created_at",{ascending:!1});if(a)throw a;A(s||[]),s&&s.length>0&&!t&&y(s[0])}catch{N({title:"Error",description:"Failed to load premium notes. Please try again.",variant:"destructive"})}finally{w(!1)}},O=s=>{const a=document.createElement("a"),r=new Blob([s.content],{type:"text/markdown"});a.href=URL.createObjectURL(r),a.download=`${s.title.replace(/\s+/g,"_")}.md`,document.body.appendChild(a),a.click(),document.body.removeChild(a),N({title:"Exported",description:"Note downloaded as Markdown file"})},R=p.filter(s=>{var S;const a=f==="All Subjects"||s.subject===f,r=s.title.toLowerCase().includes(i.toLowerCase())||s.content.toLowerCase().includes(i.toLowerCase())||((S=s.topic)==null?void 0:S.toLowerCase().includes(i.toLowerCase()));return a&&r}).reduce((s,a)=>{const r=a.subject||"General";return s[r]||(s[r]=[]),s[r].push(a),s},{}),n=s=>({Mathematics:{bg:"bg-blue-500/10",text:"text-blue-500"},"English Literature":{bg:"bg-yellow-500/10",text:"text-yellow-500"},Biology:{bg:"bg-green-500/10",text:"text-green-500"},Chemistry:{bg:"bg-purple-500/10",text:"text-purple-500"},Physics:{bg:"bg-red-500/10",text:"text-red-500"},History:{bg:"bg-amber-500/10",text:"text-amber-500"},Geography:{bg:"bg-cyan-500/10",text:"text-cyan-500"}})[s]||{bg:"bg-gray-500/10",text:"text-gray-500"};return T?e.jsx(d,{children:e.jsx("div",{className:"max-w-6xl mx-auto flex items-center justify-center h-[60vh]",children:e.jsx(C,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}):g?B?e.jsx(d,{children:e.jsx("div",{className:"max-w-6xl mx-auto flex items-center justify-center h-[60vh]",children:e.jsx(C,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}):e.jsx(d,{children:e.jsxs("div",{className:"max-w-6xl mx-auto animate-fade-in pb-12",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-r from-yellow-500/20 to-amber-500/20",children:e.jsx(m,{className:"w-8 h-8 text-yellow-500"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Grade 9 Premium Notes"}),e.jsxs(E,{className:"bg-gradient-to-r from-yellow-500 to-amber-600 text-white border-0",children:[e.jsx(k,{className:"w-3 h-3 mr-1"}),"Premium"]})]}),e.jsx("p",{className:"text-muted-foreground",children:"Exclusive study materials for top marks"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(q,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(J,{placeholder:"Search notes...",value:i,onChange:s=>_(s.target.value),className:"pl-9"})]}),e.jsxs(K,{value:f,onValueChange:I,children:[e.jsxs(W,{className:"w-full sm:w-[200px]",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),e.jsx(X,{})]}),e.jsxs(Y,{children:[e.jsx(G,{value:"All Subjects",children:"All Subjects"}),U.map(s=>e.jsx(G,{value:s,children:s},s))]})]})]}),p.length===0?e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsx(m,{className:"h-16 w-16 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No notes available yet"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Grade 9 premium notes are coming soon. Check back later for exclusive content!"}),e.jsxs(x,{variant:"outline",onClick:()=>h("/notes"),children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Go to My Notes"]})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1 space-y-4",children:Object.entries(R).map(([s,a])=>e.jsxs(j,{className:"overflow-hidden",children:[e.jsx("div",{className:o("p-3 border-b",n(s).bg),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:o("h-4 w-4",n(s).text)}),e.jsx("h3",{className:"font-semibold text-sm",children:s}),e.jsx(E,{variant:"secondary",className:"ml-auto text-xs",children:a.length})]})}),e.jsx(b,{className:"p-2",children:a.map(r=>e.jsxs("button",{onClick:()=>y(r),className:o("w-full text-left p-3 rounded-lg transition-all group",(t==null?void 0:t.id)===r.id?"bg-primary/10 border border-primary/30":"hover:bg-muted/50"),children:[e.jsx("p",{className:o("font-medium text-sm truncate",(t==null?void 0:t.id)===r.id?"text-primary":"text-foreground"),children:r.title}),r.topic&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1 truncate",children:r.topic})]},r.id))})]},s))}),e.jsx("div",{className:"lg:col-span-2",children:t?e.jsx(j,{className:"sticky top-4",children:e.jsxs(b,{className:"p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.subject&&e.jsx("span",{className:o("text-xs font-medium px-2 py-1 rounded-full",n(t.subject).bg,n(t.subject).text),children:t.subject}),t.topic&&e.jsx("span",{className:"text-xs text-muted-foreground px-2 py-1 rounded-md bg-muted",children:t.topic})]}),e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-foreground",children:t.title})]}),e.jsx(x,{variant:"outline",size:"icon",onClick:()=>O(t),title:"Export as Markdown",children:e.jsx(H,{className:"h-4 w-4"})})]}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:t.tags.map((s,a)=>e.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-muted text-muted-foreground border",children:["#",s]},a))}),e.jsx("div",{className:"prose prose-sm max-w-none prose-headings:font-bold prose-h1:text-2xl prose-h2:text-xl prose-a:text-primary dark:prose-invert",children:e.jsx(Z,{content:t.content})})]})}):e.jsx(j,{children:e.jsxs(b,{className:"p-12 text-center",children:[e.jsx(m,{className:"h-16 w-16 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Select a note"}),e.jsx("p",{className:"text-muted-foreground",children:"Choose a note from the list to view its content"})]})})})]})]})}):e.jsx(d,{children:e.jsx("div",{className:"max-w-4xl mx-auto animate-fade-in",children:e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsxs("div",{className:"relative inline-block mb-6",children:[e.jsx(m,{className:"h-20 w-20 text-muted-foreground/50"}),e.jsx("div",{className:"absolute -top-2 -right-2 p-2 rounded-full bg-gradient-to-r from-yellow-500 to-amber-600",children:e.jsx(Q,{className:"h-5 w-5 text-white"})})]}),e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-4",children:"Grade 9 Premium Notes"}),e.jsx("p",{className:"text-muted-foreground mb-8 max-w-md mx-auto",children:"Unlock exclusive Grade 9 study notes and materials designed to help you achieve top marks. These premium notes are curated by expert educators."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(x,{size:"lg",className:"bg-gradient-to-r from-yellow-500 to-amber-600 hover:from-yellow-600 hover:to-amber-700 text-white",onClick:()=>h("/premium-dashboard"),children:[e.jsx(k,{className:"h-5 w-5 mr-2"}),"Upgrade to Premium"]}),e.jsxs(x,{variant:"outline",size:"lg",onClick:()=>h(-1),children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Go Back"]})]}),e.jsxs("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-muted/50",children:[e.jsx(V,{className:"h-8 w-8 text-yellow-500 mx-auto mb-3"}),e.jsx("h3",{className:"font-semibold text-foreground mb-1",children:"Top Grade Content"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Notes designed for Grade 9 achievement"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-muted/50",children:[e.jsx(P,{className:"h-8 w-8 text-blue-500 mx-auto mb-3"}),e.jsx("h3",{className:"font-semibold text-foreground mb-1",children:"All Subjects"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Comprehensive coverage across subjects"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-muted/50",children:[e.jsx($,{className:"h-8 w-8 text-purple-500 mx-auto mb-3"}),e.jsx("h3",{className:"font-semibold text-foreground mb-1",children:"Expert Curated"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Created by experienced educators"})]})]})]})})})}export{we as default};
