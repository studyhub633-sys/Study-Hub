import{j as e,L as X,N as E,aa as Z,ab as ee,ac as S,ad as N,G as re,E as C,ae as se,af as ae,U as te,ag as ie,ah as le,ai as I,$ as O,M as ne}from"./ui-vendor-BhfTkEdL.js";import{A as M}from"./AppLayout-DyYlXr0M.js";import{u as ce,j as oe,k as de,B as p,c as y}from"./index-BWIqSF27.js";import{D as me,b as ue,c as xe,d as he,e as pe}from"./dialog-ByV6oEXD.js";import{I as j}from"./input-BIlMOJxd.js";import{L as x}from"./label-aiGua7-D.js";import{P as ge}from"./progress-BREBiOc1.js";import{S as z,a as B,b as U,c as W,d as R}from"./select-nauIKzyc.js";import{T as fe}from"./textarea-D4LyRJDD.js";import{r as h}from"./react-vendor-Do86TxWo.js";import"./AnimatedLogoIcon-BNgjqHPG.js";import"./sheet-ByTzbT0g.js";import"./supabase-vendor-CklQTOeK.js";import"./query-vendor-C5_dwEAA.js";import"./index-BdQq_4o_.js";import"./index-CTYjvzHW.js";const D={work:{icon:le,color:"primary",label:"Work Experience"},volunteer:{icon:ie,color:"secondary",label:"Volunteering"},club:{icon:te,color:"accent",label:"Clubs & Societies"},sports:{icon:S,color:"primary",label:"Sports"},arts:{icon:ae,color:"premium",label:"Arts & Music"},leadership:{icon:N,color:"accent",label:"Leadership"},academic:{icon:se,color:"secondary",label:"Academic"}};function qe(){var V;const{supabase:g,user:n}=ce(),{t:i}=oe(),{toast:o}=de(),[l,b]=h.useState([]),[A,m]=h.useState(!0),[t,L]=h.useState(null),[$,w]=h.useState(!1),[v,F]=h.useState(null),[a,u]=h.useState({name:"",description:"",category:"",hours:"",targetHours:"",start_date:"",end_date:"",achievements:"",external_link:""});h.useEffect(()=>{n&&k()},[n]);const k=async()=>{if(n)try{m(!0);const{data:r,error:s}=await g.from("extracurriculars").select("*").eq("user_id",n.id).order("start_date",{ascending:!1});if(s)throw s;b(r||[])}catch{o({title:"Error",description:"Failed to load activities. Please try again.",variant:"destructive"})}finally{m(!1)}},H=()=>{F(null),u({name:"",description:"",category:"",hours:"",targetHours:"",start_date:"",end_date:"",achievements:"",external_link:""}),w(!0)},P=r=>{var s;F(r),u({name:r.name,description:r.description||"",category:r.category||"",hours:r.hours.toString(),targetHours:"",start_date:r.start_date||"",end_date:r.end_date||"",achievements:((s=r.achievements)==null?void 0:s.join(", "))||"",external_link:r.external_link||""}),w(!0)},G=async()=>{var r;if(!n||!a.name.trim()){o({title:"Error",description:"Activity name is required",variant:"destructive"});return}try{const s=a.achievements?a.achievements.split(",").map(c=>c.trim()).filter(Boolean):[],d={user_id:n.id,name:a.name,description:a.description||null,category:a.category||null,hours:parseInt(a.hours)||0,start_date:a.start_date||null,end_date:a.end_date||null,achievements:s.length>0?s:null,external_link:((r=a.external_link)==null?void 0:r.trim())||null};if(v){const{error:c}=await g.from("extracurriculars").update(d).eq("id",v.id).eq("user_id",n.id);if(c)throw c;o({title:"Success",description:"Activity updated successfully"})}else{const{error:c}=await g.from("extracurriculars").insert(d);if(c)throw c;o({title:"Success",description:"Activity created successfully"})}w(!1),k()}catch(s){o({title:"Error",description:s.message||"Failed to save activity. Please try again.",variant:"destructive"})}},q=async r=>{if(n&&confirm("Are you sure you want to delete this activity?"))try{const{error:s}=await g.from("extracurriculars").delete().eq("id",r).eq("user_id",n.id);if(s)throw s;o({title:"Success",description:"Activity deleted successfully"}),(t==null?void 0:t.id)===r&&L(null),k()}catch{o({title:"Error",description:"Failed to delete activity. Please try again.",variant:"destructive"})}},Y=async(r,s)=>{if(!n||!s||s<=0){o({title:"Error",description:"Please enter a valid number of hours",variant:"destructive"});return}try{const d=l.find(_=>_.id===r);if(!d)return;const{error:c}=await g.from("extracurriculars").update({hours:d.hours+s}).eq("id",r).eq("user_id",n.id);if(c)throw c;o({title:"Success",description:`${s} hours logged successfully`}),k()}catch{o({title:"Error",description:"Failed to log hours. Please try again.",variant:"destructive"})}},Q=l.reduce((r,s)=>r+s.hours,0),J=l.reduce((r,s)=>{var d;return r+(((d=s.achievements)==null?void 0:d.length)||0)},0),T=r=>r?new Date(r).toLocaleDateString("en-US",{month:"short",year:"numeric"}):"";return A?e.jsx(M,{children:e.jsx("div",{className:"max-w-6xl mx-auto flex items-center justify-center h-[60vh]",children:e.jsx(X,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}):e.jsxs(M,{children:[e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-foreground",children:i("extracurricular.title")}),e.jsx("p",{className:"text-muted-foreground mt-1",children:i("extracurricular.subtitle")})]}),e.jsxs(p,{onClick:H,children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),i("extracurricular.addActivity")]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 animate-slide-up",style:{animationDelay:"0.1s"},children:[{label:i("extracurricular.totalHours"),value:Q,icon:Z,color:"primary"},{label:i("extracurricular.activities"),value:l.length,icon:ee,color:"secondary"},{label:i("extracurricular.achievements"),value:J,icon:S,color:"accent"},{label:i("extracurricular.active"),value:l.filter(r=>!r.end_date).length,icon:N,color:"premium"}].map(r=>e.jsx("div",{className:"glass-card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:y("p-2 rounded-lg",r.color==="primary"&&"bg-primary/10",r.color==="secondary"&&"bg-secondary/10",r.color==="accent"&&"bg-accent/20",r.color==="premium"&&"bg-premium/10"),children:e.jsx(r.icon,{className:y("h-5 w-5",r.color==="primary"&&"text-primary",r.color==="secondary"&&"text-secondary",r.color==="accent"&&"text-accent-foreground",r.color==="premium"&&"text-premium")})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-foreground",children:r.value}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.label})]})]})},r.label))}),e.jsxs("div",{className:"glass-card p-6 animate-slide-up",style:{animationDelay:"0.15s"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(re,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"font-semibold text-foreground",children:i("extracurricular.findOpportunities")})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:i("extracurricular.findOppDesc")}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[{name:"Do-it",url:"https://doit.life/volunteer",desc:"Find volunteering opportunities near you",category:"Volunteering"},{name:"vInspired",url:"https://vinspired.com",desc:"Youth volunteering and social action",category:"Volunteering"},{name:"Springpod",url:"https://www.springpod.com",desc:"Virtual work experience programmes",category:"Work Experience"},{name:"RateMyPlacement",url:"https://www.ratemyplacement.co.uk",desc:"Student placements and internships",category:"Work Experience"},{name:"Investin",url:"https://investin.org",desc:"Career experience programmes",category:"Work Experience"},{name:"NCS",url:"https://wearencs.com",desc:"National Citizen Service programmes",category:"Leadership"},{name:"DofE",url:"https://www.dofe.org",desc:"Duke of Edinburgh Award",category:"Skills"},{name:"Young Enterprise",url:"https://www.young-enterprise.org.uk",desc:"Business and entrepreneurship skills",category:"Skills"}].map(r=>e.jsx("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"group p-3 rounded-lg bg-muted/50 hover:bg-muted border border-transparent hover:border-primary/20 transition-all duration-200",children:e.jsx("div",{className:"flex items-start justify-between gap-2",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"font-medium text-sm text-foreground group-hover:text-primary transition-colors",children:r.name}),e.jsx(C,{className:"h-3 w-3 text-muted-foreground group-hover:text-primary opacity-0 group-hover:opacity-100 transition-all"})]}),e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-primary/10 text-primary mt-1 inline-block",children:r.category}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:r.desc})]})})},r.name))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 animate-slide-up",style:{animationDelay:"0.2s"},children:l.length===0?e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsx(N,{className:"h-16 w-16 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:i("extracurricular.noActivities")}),e.jsx("p",{className:"text-muted-foreground mb-4",children:i("extracurricular.createFirst")}),e.jsxs(p,{onClick:H,children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),i("extracurricular.addActivity")]})]}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"font-semibold text-foreground mb-6",children:i("extracurricular.activityTimeline")}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-border"}),e.jsx("div",{className:"space-y-6",children:l.map(r=>{const s=D[r.category||""]||{icon:N,color:"primary",label:r.category||"Other"},d=s.icon,c=100,_=Math.min(r.hours/c*100,100);return e.jsxs("div",{className:"relative pl-12 cursor-pointer group",onClick:()=>L(r),children:[e.jsx("div",{className:y("absolute left-0 top-1 w-8 h-8 rounded-full flex items-center justify-center border-2 border-background transition-transform group-hover:scale-110",s.color==="primary"&&"bg-primary",s.color==="secondary"&&"bg-secondary",s.color==="accent"&&"bg-accent",s.color==="premium"&&"bg-premium"),children:e.jsx(d,{className:"h-4 w-4 text-primary-foreground"})}),e.jsxs("div",{className:y("p-4 rounded-xl transition-all duration-200",(t==null?void 0:t.id)===r.id?"bg-primary/5 border border-primary/20":"bg-muted/50 hover:bg-muted"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:y("text-xs font-medium px-2 py-0.5 rounded-full",s.color==="primary"&&"bg-primary/10 text-primary",s.color==="secondary"&&"bg-secondary/10 text-secondary",s.color==="accent"&&"bg-accent/20 text-accent-foreground",s.color==="premium"&&"bg-premium/10 text-premium"),children:s.label}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[T(r.start_date),r.end_date&&` - ${T(r.end_date)}`]})]}),e.jsx("h4",{className:"font-semibold text-foreground",children:r.name}),r.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:r.description}),r.external_link&&e.jsxs("a",{href:r.external_link,target:"_blank",rel:"noopener noreferrer",onClick:f=>f.stopPropagation(),className:"inline-flex items-center gap-1 text-xs text-primary hover:underline mt-1",children:[e.jsx(C,{className:"h-3 w-3"}),"View Link"]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(p,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:f=>{f.stopPropagation(),P(r)},children:e.jsx(I,{className:"h-4 w-4"})}),e.jsx(p,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:f=>{f.stopPropagation(),q(r.id)},children:e.jsx(O,{className:"h-4 w-4 text-destructive"})}),e.jsx(ne,{className:"h-5 w-5 text-muted-foreground group-hover:text-foreground transition-colors"})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[e.jsxs("span",{className:"text-muted-foreground",children:[r.hours," / ",c," hours"]}),e.jsxs("span",{className:"font-medium text-foreground",children:[Math.round(_),"%"]})]}),e.jsx(ge,{value:_,className:"h-1.5"})]}),r.achievements&&r.achievements.length>0&&e.jsx("div",{className:"flex items-center gap-2 mt-3 flex-wrap",children:r.achievements.map((f,K)=>e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-full bg-accent/20 text-accent-foreground",children:[e.jsx(S,{className:"h-3 w-3"}),f]},K))})]})]},r.id)})})]})]})}),e.jsxs("div",{className:"lg:col-span-1 space-y-6 animate-slide-up",style:{animationDelay:"0.3s"},children:[t?e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:i("extracurricular.activityDetails")}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(p,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>P(t),children:e.jsx(I,{className:"h-4 w-4"})}),e.jsx(p,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>q(t.id),children:e.jsx(O,{className:"h-4 w-4 text-destructive"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Name"}),e.jsx("p",{className:"font-medium text-foreground",children:t.name})]}),t.description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Description"}),e.jsx("p",{className:"text-foreground",children:t.description})]}),t.external_link&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"External Link"}),e.jsxs("a",{href:t.external_link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-primary hover:underline",children:[e.jsx(C,{className:"h-4 w-4"}),t.external_link]})]}),t.category&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Category"}),e.jsx("p",{className:"font-medium text-foreground",children:((V=D[t.category])==null?void 0:V.label)||t.category})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Hours Logged"}),e.jsxs("p",{className:"font-medium text-foreground",children:[t.hours," hours"]})]}),e.jsxs("div",{className:"pt-4 border-t border-border",children:[e.jsx("p",{className:"text-sm font-medium text-foreground mb-2",children:"Achievements"}),t.achievements&&t.achievements.length>0?e.jsx("div",{className:"space-y-1",children:t.achievements.map((r,s)=>e.jsxs("div",{className:"text-sm text-foreground flex items-center gap-2",children:[e.jsx(S,{className:"h-4 w-4 text-accent-foreground"}),r]},s))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No achievements yet"})]})]})]}):e.jsxs("div",{className:"glass-card p-6 text-center",children:[e.jsx(N,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-3"}),e.jsx("h3",{className:"font-semibold text-foreground mb-1",children:"Select an activity"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click on any activity to view details"})]}),l.length>0&&e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"font-semibold text-foreground mb-4",children:"Log Hours"}),e.jsx(je,{activities:l,onLogHours:Y})]})]})]})]}),e.jsx(me,{open:$,onOpenChange:w,children:e.jsxs(ue,{className:"sm:max-w-[500px]",children:[e.jsxs(xe,{children:[e.jsx(he,{children:v?"Edit Activity":"Add New Activity"}),e.jsx(pe,{children:v?"Update your activity details below":"Track a new extracurricular activity or work experience."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"name",children:"Activity Name *"}),e.jsx(j,{id:"name",value:a.name,onChange:r=>u({...a,name:r.target.value}),placeholder:"e.g., Volunteer at Local Library"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"category",children:"Category"}),e.jsxs(z,{value:a.category,onValueChange:r=>u({...a,category:r}),children:[e.jsx(B,{children:e.jsx(U,{placeholder:"Select category"})}),e.jsx(W,{children:Object.entries(D).map(([r,s])=>e.jsx(R,{value:r,children:s.label},r))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"description",children:"Description"}),e.jsx(fe,{id:"description",value:a.description,onChange:r=>u({...a,description:r.target.value}),placeholder:"Describe your responsibilities..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"hours",children:"Hours Logged"}),e.jsx(j,{id:"hours",type:"number",value:a.hours,onChange:r=>u({...a,hours:r.target.value}),placeholder:"0"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"start_date",children:"Start Date"}),e.jsx(j,{id:"start_date",type:"date",value:a.start_date,onChange:r=>u({...a,start_date:r.target.value})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"end_date",children:"End Date (optional)"}),e.jsx(j,{id:"end_date",type:"date",value:a.end_date,onChange:r=>u({...a,end_date:r.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"achievements",children:"Achievements (comma-separated)"}),e.jsx(j,{id:"achievements",value:a.achievements,onChange:r=>u({...a,achievements:r.target.value}),placeholder:"e.g., Award winner, Team leader"})]}),e.jsxs(p,{className:"w-full mt-2",onClick:G,children:[v?"Update":"Add"," Activity"]})]})]})})]})}function je({activities:g,onLogHours:n}){const[i,o]=h.useState(""),[l,b]=h.useState(""),A=m=>{m.preventDefault(),i&&l&&(n(i,parseFloat(l)),b(""))};return e.jsxs("form",{onSubmit:A,className:"space-y-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"quick-activity",children:"Activity"}),e.jsxs(z,{value:i,onValueChange:o,children:[e.jsx(B,{children:e.jsx(U,{placeholder:"Select activity"})}),e.jsx(W,{children:g.map(m=>e.jsx(R,{value:m.id,children:m.name},m.id))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"quick-hours",children:"Hours"}),e.jsx(j,{id:"quick-hours",type:"number",step:"0.5",value:l,onChange:m=>b(m.target.value),placeholder:"2"})]}),e.jsxs(p,{type:"submit",className:"w-full",disabled:!i||!l,children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Log Hours"]})]})}export{qe as default};
