import{c as he,j as e,a as N,t as U,u as C,r as l,m as S,B as E,L as Q,d as O,b as pe}from"./index-7wMNJNZJ.js";import{C as xe}from"./clock-BKqJKRJR.js";import{B as Y,L as G,F as J,A as K,C as ge,c as X}from"./sheet-D4eoD1m7.js";import{L as fe}from"./lightbulb-LqjOXS8C.js";import{A as be}from"./arrow-right-BVFcgBws.js";import{S as F}from"./sparkles-BGeiEV-p.js";import{D as je,a as ve,b as ye,c as Ne,d as we,f as _e}from"./dialog-CGZvDN6x.js";import{I as R}from"./input-CURGwIC-.js";import{L as B}from"./label-4_8C0ZIE.js";import{S as ke,a as De,b as Ce,c as Se,d as W}from"./select-Do0TjdJZ.js";import{P as Ae}from"./plus-BgtP8iNg.js";import{C as V}from"./calendar-D5Qbqv8w.js";import{C as qe}from"./circle-alert-P33Mky6U.js";import{h as Le,A as Pe}from"./AppLayout-Cb4f3Rcb.js";import"./index-BdQq_4o_.js";import"./index-8ugP4A3I.js";import"./chevron-down-CjDqse4M.js";import"./AnimatedLogoIcon-DY32PEux.js";import"./sun-CnDoiXzg.js";const $e=he("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),Te={primary:{iconBg:"bg-primary/10",iconColor:"text-primary",hoverBorder:"hover:border-primary/30"},secondary:{iconBg:"bg-secondary/10",iconColor:"text-secondary",hoverBorder:"hover:border-secondary/30"},accent:{iconBg:"bg-accent/20",iconColor:"text-accent-foreground",hoverBorder:"hover:border-accent/30"},premium:{iconBg:"bg-premium/10",iconColor:"text-premium",hoverBorder:"hover:border-premium/30"}};function Be({icon:a,title:s,description:o,count:c=0,countLabel:g,path:p,color:t,isPremium:h=!1,progress:i}){const d=Te[t],r=p.startsWith("http"),m=e.jsxs("div",{className:N("module-card relative overflow-hidden transition-all duration-300",d.hoverBorder,"hover:shadow-lg"),children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:N("p-3 rounded-xl transition-transform duration-300 group-hover:scale-110",d.iconBg),children:e.jsx(a,{className:N("h-6 w-6",d.iconColor)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-foreground group-hover:text-primary transition-colors truncate",children:s}),h&&e.jsx("span",{className:"premium-badge shrink-0",children:"PRO"})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:o})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-border/50 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl font-bold text-foreground",children:c}),e.jsx("span",{className:"text-sm text-muted-foreground ml-2",children:g})]}),i!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-16 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:N("h-full rounded-full transition-all duration-500",`bg-${t}`),style:{width:`${i}%`,backgroundColor:t==="primary"?"hsl(var(--primary))":t==="secondary"?"hsl(var(--secondary))":t==="accent"?"hsl(var(--accent))":"hsl(var(--premium))"}})}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[i,"%"]})]})]})]});return r?e.jsx("a",{href:p,className:"block group",children:m}):e.jsx(U,{to:p,className:"block group",children:m})}function Ee(){const{supabase:a,user:s}=C(),[o,c]=l.useState([]),[g,p]=l.useState(!0),{t}=S(),h=i=>{const r=Math.floor((new Date().getTime()-i.getTime())/1e3);return r<60?t("dashboard.activity.justNow"):r<3600?t("dashboard.activity.minutesAgo",{count:Math.floor(r/60)}):r<86400?t("dashboard.activity.hoursAgo",{count:Math.floor(r/3600)}):r<604800?t("dashboard.activity.daysAgo",{count:Math.floor(r/86400)}):i.toLocaleDateString()};return l.useEffect(()=>{if(!s)return;(async()=>{try{const d=[],{data:r}=await a.from("notes").select("id, title, updated_at, subject").eq("user_id",s.id).order("updated_at",{ascending:!1}).limit(5);r&&r.forEach(n=>{d.push({icon:Y,title:n.subject?`${n.subject}: ${n.title}`:n.title,time:h(new Date(n.updated_at)),date:new Date(n.updated_at),type:"note",color:"text-accent-foreground",bgColor:"bg-accent/20"})});const{data:m}=await a.from("flashcards").select("id, front, updated_at, subject").eq("user_id",s.id).order("updated_at",{ascending:!1}).limit(5);m&&m.forEach(n=>{d.push({icon:G,title:n.subject?`${n.subject} ${t("dashboard.activity.flashcardPrefix")}${n.front.substring(0,30)}${n.front.length>30?"...":""}`:`${t("dashboard.activity.flashcardPrefix")}${n.front.substring(0,30)}${n.front.length>30?"...":""}`,time:h(new Date(n.updated_at)),date:new Date(n.updated_at),type:"flashcard",color:"text-primary",bgColor:"bg-primary/10"})});const{data:b}=await a.from("past_papers").select("id, title, updated_at, subject").eq("user_id",s.id).order("updated_at",{ascending:!1}).limit(5);b&&b.forEach(n=>{d.push({icon:J,title:n.subject?`${n.subject} ${t("dashboard.activity.pastPaperPrefix")}${n.title}`:n.title,time:h(new Date(n.updated_at)),date:new Date(n.updated_at),type:"paper",color:"text-secondary",bgColor:"bg-secondary/10"})});const{data:v}=await a.from("extracurriculars").select("id, name, updated_at").eq("user_id",s.id).order("updated_at",{ascending:!1}).limit(5);v&&v.forEach(n=>{d.push({icon:K,title:`${t("dashboard.activity.loggedPrefix")}${n.name}`,time:h(new Date(n.updated_at)),date:new Date(n.updated_at),type:"extracurricular",color:"text-premium",bgColor:"bg-premium/10"})}),d.sort((n,j)=>j.date.getTime()-n.date.getTime());const w=d.slice(0,4).map(({date:n,...j})=>j);c(w)}catch{}finally{p(!1)}})()},[s,a,t]),e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:t("dashboard.activity.title")}),e.jsx("button",{onClick:()=>{const{toast:i}=require("@/hooks/use-toast");i({title:t("dashboard.activity.comingSoonTitle"),description:t("dashboard.activity.comingSoonDesc")})},className:"text-sm text-primary hover:underline hover:opacity-80 transition-opacity",children:t("dashboard.activity.viewAll")})]}),e.jsx("div",{className:"space-y-4",children:g?e.jsx("p",{className:"text-sm text-muted-foreground",children:t("dashboard.activity.loading")}):o.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:t("dashboard.activity.noActivity")}):o.map((i,d)=>e.jsxs("div",{className:"flex items-start gap-3 animate-slide-up",style:{animationDelay:`${d*.1}s`,opacity:0},children:[e.jsx("div",{className:N("p-2 rounded-lg flex-shrink-0",i.bgColor),children:e.jsx(i.icon,{className:N("h-4 w-4",i.color)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:i.title}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[e.jsx(xe,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:i.time})]})]})]},d))})]})}function Fe(){const{supabase:a,user:s}=C(),[o,c]=l.useState([]),[g,p]=l.useState(!0),{t}=S();return l.useEffect(()=>{if(!s)return;(async()=>{try{const i=[],{count:d}=await a.from("notes").select("*",{count:"exact",head:!0}).eq("user_id",s.id),{count:r}=await a.from("flashcards").select("*",{count:"exact",head:!0}).eq("user_id",s.id),{count:m}=await a.from("past_papers").select("*",{count:"exact",head:!0}).eq("user_id",s.id);d===0?i.push({title:t("dashboard.suggestions.createFirstNote"),description:t("dashboard.suggestions.organisingStudies"),action:t("dashboard.suggestions.getStarted"),path:"/notes"}):d&&d>0&&i.push({title:t("dashboard.suggestions.continueNotes"),description:t("dashboard.suggestions.haveNotes",{count:d,plural:d>1?"s":""}),action:t("dashboard.suggestions.viewNotes"),path:"/notes"}),r===0?i.push({title:t("dashboard.suggestions.createFlashcards"),description:t("dashboard.suggestions.improveRetention"),action:t("dashboard.suggestions.createCards"),path:"/flashcards"}):r&&r>0&&i.push({title:t("dashboard.suggestions.reviewFlashcards"),description:t("dashboard.suggestions.haveFlashcards",{count:r,plural:r>1?"s":""}),action:t("dashboard.suggestions.practiceNow"),path:"/flashcards"}),m===0?i.push({title:t("dashboard.suggestions.tryPastPaper"),description:t("dashboard.suggestions.practiceExams"),action:t("dashboard.suggestions.addPapers"),path:"/past-papers"}):m&&m>0&&i.push({title:t("dashboard.suggestions.completePastPaper"),description:t("dashboard.suggestions.havePapers",{count:m,plural:m>1?"s":""}),action:t("dashboard.suggestions.startQuiz"),path:"/past-papers"}),c(i.slice(0,3))}catch{}finally{p(!1)}})()},[s,a]),e.jsxs("div",{className:"glass-card p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-accent/20 to-transparent rounded-full blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-accent/20",children:e.jsx(fe,{className:"h-5 w-5 text-accent-foreground"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:t("dashboard.suggestions.title")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t("dashboard.suggestions.basedOnActivity")})]})]}),e.jsx("div",{className:"space-y-3",children:g?e.jsx("p",{className:"text-sm text-muted-foreground",children:t("dashboard.suggestions.loading")}):o.length===0?e.jsx("p",{className:"text-sm text-muted-foreground py-4",children:t("dashboard.suggestions.noSuggestions")}):o.map((h,i)=>e.jsx(U,{to:h.path,className:"block p-4 rounded-xl bg-muted/50 hover:bg-muted transition-all duration-200 cursor-pointer group animate-slide-up",style:{animationDelay:`${i*.1}s`,opacity:0},children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-foreground mb-1",children:h.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:h.description})]}),e.jsxs(E,{size:"sm",variant:"ghost",className:"flex-shrink-0 text-primary group-hover:bg-primary group-hover:text-primary-foreground transition-colors",children:[h.action,e.jsx(be,{className:"h-4 w-4 ml-1"})]})]})},i))}),e.jsx("div",{className:"mt-4 p-4 rounded-xl border border-premium/30 bg-premium/5",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"p-2 rounded-lg flex-shrink-0",style:{background:"var(--gradient-premium)"},children:e.jsx(F,{className:"h-5 w-5 text-premium-foreground"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:t("dashboard.suggestions.unlockAI")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t("dashboard.suggestions.getPersonalized")})]})]}),e.jsx(U,{to:"/premium-dashboard",children:e.jsx(E,{size:"sm",className:"w-full sm:w-auto bg-premium hover:bg-premium/90 text-premium-foreground shrink-0",children:t("dashboard.suggestions.upgrade")})})]})})]})]})}const ze={high:"bg-destructive/10 text-destructive border-destructive/20",medium:"bg-accent/20 text-accent-foreground border-accent/30",low:"bg-secondary/10 text-secondary border-secondary/20"};function Me(){const{supabase:a,user:s}=C(),{t:o}=S(),[c,g]=l.useState([]),[p,t]=l.useState(!0),[h,i]=l.useState(!1),[d,r]=l.useState(!1),[m,b]=l.useState(""),[v,w]=l.useState(""),[n,j]=l.useState("medium"),[A,q]=l.useState(""),L=async()=>{if(s)try{const{data:u,error:f}=await a.from("tasks").select("*").eq("user_id",s.id).eq("completed",!1).order("due_date",{ascending:!0}).limit(5);if(f)throw f;g(u||[])}catch{}finally{t(!1)}};l.useEffect(()=>{L()},[s,a]);const z=async u=>{if(u.preventDefault(),!!s){if(!m){O.error(o("dashboard.tasks.errorTitle"));return}i(!0);try{const{error:f}=await a.from("tasks").insert([{user_id:s.id,title:m,subject:v,priority:n,due_date:A||new Date().toISOString()}]);if(f)throw f;O.success(o("dashboard.tasks.successAdd")),r(!1),M(),L()}catch{O.error(o("dashboard.tasks.errorAdd"))}finally{i(!1)}}},M=()=>{b(""),w(""),j("medium"),q("")},I=u=>new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric"});return e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:o("dashboard.tasks.title")}),e.jsxs(je,{open:d,onOpenChange:r,children:[e.jsx(ve,{asChild:!0,children:e.jsxs(E,{variant:"ghost",size:"sm",className:"text-primary gap-1.5",children:[e.jsx(Ae,{className:"h-4 w-4"}),o("dashboard.tasks.addTask")]})}),e.jsxs(ye,{className:"sm:max-w-[425px]",children:[e.jsx(Ne,{children:e.jsx(we,{children:o("dashboard.tasks.addNewTask")})}),e.jsxs("form",{onSubmit:z,className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"title",children:o("dashboard.tasks.taskTitle")}),e.jsx(R,{id:"title",placeholder:o("dashboard.tasks.titlePlaceholder"),value:m,onChange:u=>b(u.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"subject",children:o("dashboard.tasks.subject")}),e.jsx(R,{id:"subject",placeholder:o("dashboard.tasks.subjectPlaceholder"),value:v,onChange:u=>w(u.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"priority",children:o("dashboard.tasks.priority")}),e.jsxs(ke,{value:n,onValueChange:j,children:[e.jsx(De,{id:"priority",children:e.jsx(Ce,{placeholder:o("dashboard.tasks.selectPriority")})}),e.jsxs(Se,{children:[e.jsx(W,{value:"low",children:o("dashboard.tasks.low")}),e.jsx(W,{value:"medium",children:o("dashboard.tasks.medium")}),e.jsx(W,{value:"high",children:o("dashboard.tasks.high")})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"due_date",children:o("dashboard.tasks.dueDate")}),e.jsx(R,{id:"due_date",type:"date",value:A,onChange:u=>q(u.target.value)})]})]}),e.jsx(_e,{className:"pt-4",children:e.jsxs(E,{type:"submit",disabled:h,children:[h&&e.jsx(Q,{className:"mr-2 h-4 w-4 animate-spin"}),o("dashboard.tasks.addTask")]})})]})]})]})]}),e.jsx("div",{className:"space-y-3",children:p?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(Q,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(V,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:o("dashboard.tasks.noTasks")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:o("dashboard.tasks.tasksWillAppear")})]}):c.map((u,f)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50 hover:bg-muted transition-colors cursor-pointer group animate-slide-up",style:{animationDelay:`${f*.1}s`,opacity:0},children:[e.jsx("div",{className:N("p-2 rounded-lg border",ze[u.priority]),children:u.priority==="high"?e.jsx(qe,{className:"h-4 w-4"}):e.jsx(V,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:u.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[u.subject&&`${u.subject} â€¢ `,I(u.due_date)]})]}),e.jsx(ge,{className:"h-4 w-4 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity"})]},u.id))})]})}function Ie(){const{supabase:a,user:s}=C(),o=pe(),{t:c}=S(),[g,p]=l.useState(null),[t,h]=l.useState({notesCount:0,flashcardsCount:0,papersCount:0,streak:0}),[i,d]=l.useState(!0),[r,m]=l.useState(null),b=new Date().getHours(),v=b<12?c("dashboard.welcome.goodMorning"):b<18?c("dashboard.welcome.goodAfternoon"):c("dashboard.welcome.goodEvening");l.useEffect(()=>{if(!s)return;(async()=>{try{const{data:j}=await a.from("profiles").select("full_name, email").eq("id",s.id).single();j&&p(j);const[A,q,L,z,M,I,u,f,Z,ee,te,se,ae,re,ie]=await Promise.all([a.from("notes").select("*",{count:"exact",head:!0}).eq("user_id",s.id),a.from("flashcards").select("*",{count:"exact",head:!0}).eq("user_id",s.id),a.from("past_papers").select("*",{count:"exact",head:!0}).eq("user_id",s.id),a.from("notes").select("created_at, updated_at").eq("user_id",s.id),a.from("flashcards").select("created_at, updated_at, last_reviewed").eq("user_id",s.id),a.from("ai_usage_tracking").select("created_at").eq("user_id",s.id),a.from("ai_chat_sessions").select("created_at, updated_at").eq("user_id",s.id),a.from("knowledge_organizers").select("created_at, updated_at").eq("user_id",s.id),a.from("past_papers").select("created_at, updated_at, completed_at").eq("user_id",s.id),a.from("homework").select("created_at, updated_at").eq("user_id",s.id),a.from("tasks").select("created_at, updated_at").eq("user_id",s.id),a.from("mind_maps").select("created_at, updated_at").eq("user_id",s.id),a.from("exam_submissions").select("created_at, submission_date").eq("user_id",s.id),a.from("study_sessions").select("date, created_at").eq("user_id",s.id),a.from("extracurriculars").select("created_at, updated_at").eq("user_id",s.id)]),P=y=>`${y.getFullYear()}-${String(y.getMonth()+1).padStart(2,"0")}-${String(y.getDate()).padStart(2,"0")}`,k=new Set,x=(y,$)=>{(y||[]).forEach(_=>{$.forEach(D=>{if(_[D])try{k.add(P(new Date(_[D])))}catch{}})})};x(z.data,["created_at","updated_at"]),x(M.data,["created_at","updated_at","last_reviewed"]),x(I.data,["created_at"]),x(u.data,["created_at","updated_at"]),x(f.data,["created_at","updated_at"]),x(Z.data,["created_at","updated_at","completed_at"]),x(ee.data,["created_at","updated_at"]),x(te.data,["created_at","updated_at"]),x(se.data,["created_at","updated_at"]),x(ae.data,["created_at","submission_date"]),x(re.data,["date","created_at"]),x(ie.data,["created_at","updated_at"]);const oe=(()=>{if(k.size===0)return 0;const y=P(new Date),$=P(new Date(Date.now()-864e5));let _;if(k.has(y))_=y;else if(k.has($))_=$;else return 0;let D=0,T=_;for(;k.has(T);){D++;const[ce,le,ue]=T.split("-").map(Number),me=new Date(ce,le-1,ue-1);T=P(me)}return D})();h({notesCount:A.count||0,flashcardsCount:q.count||0,papersCount:L.count||0,streak:oe});const de=new Date(Date.now()-1440*60*1e3).toISOString(),{count:ne}=await a.from("ai_usage_tracking").select("*",{count:"exact",head:!0}).eq("user_id",s.id).gt("created_at",de),H=await Le(a);m({count:ne||0,limit:H?500:10,isPremium:H})}catch{}finally{d(!1)}})()},[s,a]);const w=g?.full_name||g?.email?.split("@")[0]||"there";return e.jsxs("div",{className:"relative overflow-hidden rounded-2xl p-6 md:p-8",style:{background:"var(--gradient-primary)"},children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-white/5 rounded-full blur-2xl translate-y-1/2 -translate-x-1/2"}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary-foreground/80",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:v})]}),e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-primary-foreground",children:c("dashboard.welcome.welcomeBack",{name:w})}),e.jsx("p",{className:"text-primary-foreground/80 max-w-md",children:i?c("dashboard.welcome.loading"):t.notesCount+t.flashcardsCount+t.papersCount===0?c("dashboard.welcome.getStarted"):c("dashboard.welcome.makingProgress")}),r&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[e.jsxs("button",{onClick:()=>o("/ai-tutor"),className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white/20 hover:bg-white/30 text-white transition-colors text-sm font-medium backdrop-blur-md",children:[e.jsx(X,{className:"h-4 w-4"}),c("dashboard.welcome.chatWithAI"),e.jsx("span",{className:"text-xs opacity-80 ml-1",children:r.isPremium?`(${c("dashboard.welcome.lifetimeAccess")})`:`(${r.limit-r.count} ${c("common.left")})`})]}),!r.isPremium&&e.jsxs("button",{onClick:()=>o("/premium-dashboard"),className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-premium hover:bg-premium/90 text-premium-foreground transition-all shadow-lg shadow-premium/20 text-sm font-bold border border-premium-foreground/20 animate-pulse-subtle",children:[e.jsx(F,{className:"h-4 w-4"}),c("dashboard.welcome.unlockLifetime")]})]})]}),e.jsxs("div",{className:"group relative overflow-hidden bg-white/10 hover:bg-white/15 backdrop-blur-md border border-white/10 rounded-2xl p-4 transition-all duration-300 animate-scale-in self-start shadow-xl",role:"button",onClick:()=>o("/premium/leaderboard"),children:[e.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-white/5 rounded-full blur-xl -translate-y-1/2 translate-x-1/2 group-hover:bg-white/10 transition-colors"}),e.jsxs("div",{className:"relative z-10 flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl transition-all duration-300 ${t.streak>0?"bg-orange-500/20 text-orange-400 group-hover:bg-orange-500/30 ring-1 ring-orange-500/30":"bg-white/10 text-white/50"}`,children:e.jsx($e,{className:`w-6 h-6 ${t.streak>0?"fill-orange-400 animate-pulse-subtle":""}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-foreground/70 text-xs font-medium uppercase tracking-wider mb-0.5",children:c("dashboard.welcome.studyStreak")}),e.jsxs("div",{className:"flex items-baseline gap-1.5",children:[e.jsx("span",{className:"text-2xl font-bold text-white tracking-tight",children:t.streak}),e.jsx("span",{className:"text-sm text-primary-foreground/80 font-medium",children:c("dashboard.welcome.days",{count:t.streak}).replace(/\d+\s/,"")})]})]})]})]})]})})]})}function ot(){const{supabase:a,user:s}=C(),[o,c]=l.useState({}),[g,p]=l.useState(!0),{t}=S(),h=[{icon:Y,title:t("features.examNotes.title"),description:t("features.examNotes.description"),countLabel:t("nav.notes").toLowerCase(),path:"/notes",color:"primary",tableName:"notes"},{icon:G,title:t("features.flashcards.title"),description:t("features.flashcards.description"),countLabel:t("nav.flashcards").toLowerCase(),path:"/flashcards",color:"secondary",tableName:"flashcards"},{icon:J,title:t("features.pastPapers.title"),description:t("features.pastPapers.description"),countLabel:t("nav.pastPapers").toLowerCase(),path:"/past-papers",color:"accent",tableName:"past_papers"},{icon:X,title:t("features.knowledgeOrganisers.title"),description:t("features.knowledgeOrganisers.description"),countLabel:t("nav.knowledge").toLowerCase(),path:"/knowledge",color:"primary",tableName:"knowledge_organizers"},{icon:K,title:t("features.extracurriculars.title"),description:t("features.extracurriculars.description"),countLabel:t("nav.extracurricular").toLowerCase(),path:"/extracurricular",color:"premium",tableName:"extracurriculars"},{icon:F,title:t("features.aiQuestions.title"),description:t("features.aiQuestions.description"),countLabel:"questions",path:"/ai-tutor",color:"premium",tableName:void 0}];l.useEffect(()=>{if(!s)return;(async()=>{try{const r={};for(const m of h)if(m.tableName){const{count:b,error:v}=await a.from(m.tableName).select("*",{count:"exact",head:!0}).eq("user_id",s.id);v||(r[m.tableName]=b||0)}c(r)}catch{}finally{p(!1)}})()},[s,a]);const i=h.map(d=>{const r=d.tableName&&o[d.tableName]||0;return{...d,count:r,progress:void 0}});return e.jsx(Pe,{children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsx("section",{className:"animate-fade-in",children:e.jsx(Ie,{})}),e.jsxs("section",{children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h2",{className:"text-xl font-bold text-foreground",children:t("common.quickAccess")})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map((d,r)=>e.jsx("div",{className:"animate-slide-up",style:{animationDelay:`${r*.1}s`,opacity:0},children:e.jsx(Be,{...d})},d.title))})]}),e.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"animate-slide-up",style:{animationDelay:"0.2s",opacity:0},children:e.jsx(Ee,{})}),e.jsx("div",{className:"animate-slide-up",style:{animationDelay:"0.3s",opacity:0},children:e.jsx(Me,{})})]}),e.jsx("section",{className:"animate-slide-up",style:{animationDelay:"0.4s",opacity:0},children:e.jsx(Fe,{})})]})})}export{ot as default};
