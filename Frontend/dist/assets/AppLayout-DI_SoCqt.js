import{j as e,aS as z,b8 as U,al as D,au as F,as as B,at as V,ab as H,q as ge,k as L,aq as ve,b7 as be,b9 as q,M as je,y as K,aD as G,aE as J,ba as W,J as Ne,a2 as we,a5 as ye}from"./ui-vendor-CsSFJReh.js";import{A as Z}from"./AnimatedLogoIcon-D5-EYdni.js";import{c as m,u as Q,l as X,j as Y,B as b}from"./index-D0R12c3l.js";import{r as c,i as I,j as k,u as ee}from"./react-vendor-BmZbDsmQ.js";import{S as Se,a as ke,b as Ce,c as Ae,d as Ee}from"./sheet-0_ECFM1J.js";var Le=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ie=Le.reduce((a,t)=>{const r=z(`Primitive.${t}`),s=c.forwardRef((n,o)=>{const{asChild:l,...i}=n,u=l?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(u,{...i,ref:o})});return s.displayName=`Primitive.${t}`,{...a,[t]:s}},{}),Pe="Separator",O="horizontal",_e=["horizontal","vertical"],ae=c.forwardRef((a,t)=>{const{decorative:r,orientation:s=O,...n}=a,o=Re(s)?s:O,i=r?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return e.jsx(Ie.div,{"data-orientation":o,...i,...n,ref:t})});ae.displayName=Pe;function Re(a){return _e.includes(a)}var te=ae;const C=c.forwardRef(({className:a,orientation:t="horizontal",decorative:r=!0,...s},n)=>e.jsx(te,{ref:n,decorative:r,orientation:t,className:m("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",a),...s}));C.displayName=te.displayName;const Me=[{icon:U,label:"Home",path:"/"},{icon:D,label:"Notes",path:"/notes"},{icon:F,label:"Cards",path:"/flashcards"},{icon:B,label:"Papers",path:"/past-papers"},{icon:V,label:"Knowledge",path:"/knowledge"},{icon:H,label:"Extra",path:"/extracurricular"}];function $e(){const a=I();return e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-card/95 backdrop-blur-xl border-t border-border md:hidden safe-area-inset-bottom",children:e.jsx("div",{className:"flex items-center px-4 py-2 overflow-x-auto no-scrollbar justify-between sm:justify-around gap-2",children:Me.map(t=>{const r=a.pathname===t.path;return e.jsxs(k,{to:t.path,className:m("flex flex-col items-center gap-1 px-2 py-2 rounded-xl transition-all duration-200 min-w-[60px] flex-shrink-0",r?"text-primary":"text-muted-foreground"),children:[e.jsx("div",{className:m("p-2 rounded-xl transition-all duration-200",r&&"bg-primary/10"),children:e.jsx(t.icon,{className:m("h-5 w-5",r&&"animate-bounce-subtle")})}),e.jsx("span",{className:m("text-[10px] font-medium truncate w-full text-center",r&&"font-semibold"),children:t.label})]},t.path)})})})}function Oe(a,t=[]){let r=[];function s(o,l){const i=c.createContext(l);i.displayName=o+"Context";const u=r.length;r=[...r,l];const d=h=>{var x;const{scope:f,children:j,...N}=h,w=((x=f==null?void 0:f[a])==null?void 0:x[u])||i,S=c.useMemo(()=>N,Object.values(N));return e.jsx(w.Provider,{value:S,children:j})};d.displayName=o+"Provider";function g(h,f){var w;const j=((w=f==null?void 0:f[a])==null?void 0:w[u])||i,N=c.useContext(j);if(N)return N;if(l!==void 0)return l;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[d,g]}const n=()=>{const o=r.map(l=>c.createContext(l));return function(i){const u=(i==null?void 0:i[a])||o;return c.useMemo(()=>({[`__scope${a}`]:{...i,[a]:u}}),[i,u])}};return n.scopeName=a,[s,Te(n,...t)]}function Te(...a){const t=a[0];if(a.length===1)return t;const r=()=>{const s=a.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(o){const l=s.reduce((i,{useScope:u,scopeName:d})=>{const h=u(o)[`__scope${d}`];return{...i,...h}},{});return c.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return r.scopeName=t.scopeName,r}var ze=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],P=ze.reduce((a,t)=>{const r=z(`Primitive.${t}`),s=c.forwardRef((n,o)=>{const{asChild:l,...i}=n,u=l?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(u,{...i,ref:o})});return s.displayName=`Primitive.${t}`,{...a,[t]:s}},{}),re={exports:{}},se={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y=c;function Ue(a,t){return a===t&&(a!==0||1/a===1/t)||a!==a&&t!==t}var De=typeof Object.is=="function"?Object.is:Ue,Fe=y.useState,Be=y.useEffect,Ve=y.useLayoutEffect,He=y.useDebugValue;function qe(a,t){var r=t(),s=Fe({inst:{value:r,getSnapshot:t}}),n=s[0].inst,o=s[1];return Ve(function(){n.value=r,n.getSnapshot=t,E(n)&&o({inst:n})},[a,r,t]),Be(function(){return E(n)&&o({inst:n}),a(function(){E(n)&&o({inst:n})})},[a]),He(r),r}function E(a){var t=a.getSnapshot;a=a.value;try{var r=t();return!De(a,r)}catch{return!0}}function Ke(a,t){return t()}var Ge=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ke:qe;se.useSyncExternalStore=y.useSyncExternalStore!==void 0?y.useSyncExternalStore:Ge;re.exports=se;var Je=re.exports;function We(){return Je.useSyncExternalStore(Ze,()=>!0,()=>!1)}function Ze(){return()=>{}}var _="Avatar",[Qe]=Oe(_),[Xe,ne]=Qe(_),oe=c.forwardRef((a,t)=>{const{__scopeAvatar:r,...s}=a,[n,o]=c.useState("idle");return e.jsx(Xe,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:o,children:e.jsx(P.span,{...s,ref:t})})});oe.displayName=_;var ie="AvatarImage",le=c.forwardRef((a,t)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:n=()=>{},...o}=a,l=ne(ie,r),i=Ye(s,o),u=ge(d=>{n(d),l.onImageLoadingStatusChange(d)});return L(()=>{i!=="idle"&&u(i)},[i,u]),i==="loaded"?e.jsx(P.img,{...o,ref:t,src:s}):null});le.displayName=ie;var de="AvatarFallback",ce=c.forwardRef((a,t)=>{const{__scopeAvatar:r,delayMs:s,...n}=a,o=ne(de,r),[l,i]=c.useState(s===void 0);return c.useEffect(()=>{if(s!==void 0){const u=window.setTimeout(()=>i(!0),s);return()=>window.clearTimeout(u)}},[s]),l&&o.imageLoadingStatus!=="loaded"?e.jsx(P.span,{...n,ref:t}):null});ce.displayName=de;function T(a,t){return a?t?(a.src!==t&&(a.src=t),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Ye(a,{referrerPolicy:t,crossOrigin:r}){const s=We(),n=c.useRef(null),o=s?(n.current||(n.current=new window.Image),n.current):null,[l,i]=c.useState(()=>T(o,a));return L(()=>{i(T(o,a))},[o,a]),L(()=>{const u=h=>()=>{i(h)};if(!o)return;const d=u("loaded"),g=u("error");return o.addEventListener("load",d),o.addEventListener("error",g),t&&(o.referrerPolicy=t),typeof r=="string"&&(o.crossOrigin=r),()=>{o.removeEventListener("load",d),o.removeEventListener("error",g)}},[o,r,t]),l}var ue=oe,me=le,xe=ce;const he=c.forwardRef(({className:a,...t},r)=>e.jsx(ue,{ref:r,className:m("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...t}));he.displayName=ue.displayName;const pe=c.forwardRef(({className:a,...t},r)=>e.jsx(me,{ref:r,className:m("aspect-square h-full w-full",a),...t}));pe.displayName=me.displayName;const fe=c.forwardRef(({className:a,...t},r)=>e.jsx(xe,{ref:r,className:m("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...t}));fe.displayName=xe.displayName;function ea(){var w,S;const[a,t]=c.useState(!1),r=I(),{user:s,signOut:n,supabase:o}=Q(),{theme:l,toggleTheme:i}=X(),u=ee(),{t:d}=Y(),[g,h]=c.useState(null),f=[{icon:U,label:d("nav.dashboard"),path:"/"},{icon:D,label:d("nav.notes"),path:"/notes"},{icon:F,label:d("nav.flashcards"),path:"/flashcards"},{icon:B,label:d("nav.pastPapers"),path:"/past-papers"},{icon:V,label:d("nav.knowledge"),path:"/knowledge"},{icon:ve,label:d("nav.library"),path:"/library"},{icon:H,label:d("nav.extracurricular"),path:"/extracurricular"},{icon:be,label:"Cram Mode",path:"/cram-mode",badge:"Coming Soon"}],j=[{icon:q,label:d("common.settings"),path:"/settings"}];c.useEffect(()=>{if(!s)return;const x=`avatar_url_${s.id}`,v=localStorage.getItem(x);v&&h(v),(async()=>{try{const{data:p}=await o.from("profiles").select("avatar_url").eq("id",s.id).single();p!=null&&p.avatar_url?(h(p.avatar_url),localStorage.setItem(x,p.avatar_url)):v&&h(v)}catch{v&&h(v)}})();const R=p=>{var $;($=p.detail)!=null&&$.avatarUrl&&(h(p.detail.avatarUrl),localStorage.setItem(x,p.detail.avatarUrl))},M=p=>{p.key===x&&p.newValue&&h(p.newValue)};return window.addEventListener("avatarUpdated",R),window.addEventListener("storage",M),()=>{window.removeEventListener("avatarUpdated",R),window.removeEventListener("storage",M)}},[s,o]);const N=async()=>{try{await n(),u("/landing")}catch{}};return e.jsxs("aside",{className:m("fixed left-0 top-0 z-40 h-screen bg-sidebar border-r border-sidebar-border transition-all duration-300 ease-out flex flex-col",a?"w-20":"w-72"),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-sidebar-border",children:[e.jsxs("div",{className:m("flex items-center gap-3",a&&"justify-center w-full"),children:[e.jsx(Z,{}),!a&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("h1",{className:"font-bold text-lg text-sidebar-foreground",children:"Scientia.ai"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:d("sidebar.learnSmarter")})]})]}),e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>t(!a),className:m("h-8 w-8 text-muted-foreground hover:text-sidebar-foreground",a&&"hidden"),children:e.jsx(je,{className:"h-4 w-4"})})]}),e.jsxs("nav",{className:"flex-1 p-3 space-y-1 overflow-y-auto",children:[e.jsx("div",{className:m("mb-2 pb-2 border-b border-sidebar-border",a&&"border-none mb-0 pb-0"),children:e.jsxs(k,{to:"/premium-dashboard",className:m("flex items-center gap-3 px-3 py-3 rounded-lg transition-all duration-300 group relative overflow-hidden",r.pathname==="/premium-dashboard"?"bg-premium text-premium-foreground shadow-lg shadow-premium/20":"text-muted-foreground hover:text-premium hover:bg-premium/10 border border-transparent hover:border-premium/20",a&&"justify-center px-2"),children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-premium/0 via-white/5 to-premium/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),e.jsx(K,{className:m("h-5 w-5 flex-shrink-0 z-10",r.pathname==="/premium-dashboard"&&"animate-pulse")}),!a&&e.jsxs("div",{className:"flex items-center justify-between w-full z-10",children:[e.jsx("span",{className:"font-bold text-sm tracking-tight text-sidebar-foreground group-hover:text-premium transition-colors",children:d("sidebar.goPremium")}),e.jsx("span",{className:"premium-badge animate-bounce-subtle",children:"LIFETIME"})]})]})}),f.map((x,v)=>{const A=r.pathname===x.path;return e.jsxs(k,{to:x.path,className:m("flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 group",A?"bg-primary text-primary-foreground shadow-md":"text-muted-foreground hover:text-sidebar-foreground hover:bg-sidebar-accent",a&&"justify-center px-2",`animate-slide-in-left stagger-${v+1}`),style:{opacity:0},children:[e.jsx(x.icon,{className:m("h-5 w-5 flex-shrink-0",A&&"animate-bounce-subtle")}),!a&&e.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-sm",children:x.label}),x.badge&&e.jsx("span",{className:"text-[10px] bg-primary/20 text-primary px-1.5 py-0.5 rounded font-semibold uppercase",children:x.badge})]})]},x.path)})]}),e.jsxs("div",{className:"p-3 border-t border-sidebar-border",children:[j.map(x=>{const v=r.pathname===x.path;return e.jsxs(k,{to:x.path,className:m("flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200",v?"bg-sidebar-accent text-sidebar-foreground":"text-muted-foreground hover:text-sidebar-foreground hover:bg-sidebar-accent",a&&"justify-center px-2"),children:[e.jsx(x.icon,{className:"h-5 w-5 flex-shrink-0"}),!a&&e.jsx("span",{className:"font-medium text-sm",children:x.label})]},x.path)}),e.jsxs("div",{className:m("mt-3 p-3 rounded-xl bg-sidebar-accent flex items-center gap-3",a&&"justify-center p-2"),children:[e.jsxs(he,{className:"h-9 w-9 border-2 border-primary/20",children:[e.jsx(pe,{src:g||`https://api.dicebear.com/7.x/avataaars/svg?seed=${s==null?void 0:s.email}`}),e.jsx(fe,{children:((w=s==null?void 0:s.email)==null?void 0:w.charAt(0).toUpperCase())||"U"})]}),!a&&e.jsxs("div",{className:"flex-1 min-w-0 animate-fade-in",children:[e.jsx("p",{className:"text-sm font-semibold text-sidebar-foreground truncate",children:((S=s==null?void 0:s.email)==null?void 0:S.split("@")[0])||"User"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]}),e.jsxs(b,{variant:"ghost",onClick:i,className:m("mt-2 w-full justify-start text-muted-foreground hover:text-foreground",a&&"justify-center px-2"),children:[l==="light"?e.jsx(G,{className:"h-5 w-5 flex-shrink-0"}):e.jsx(J,{className:"h-5 w-5 flex-shrink-0"}),!a&&e.jsx("span",{className:"font-medium text-sm ml-3",children:d(l==="light"?"sidebar.darkMode":"sidebar.lightMode")})]}),e.jsxs(b,{variant:"ghost",onClick:N,className:m("mt-2 w-full justify-start text-muted-foreground hover:text-destructive",a&&"justify-center px-2"),children:[e.jsx(W,{className:"h-5 w-5 flex-shrink-0"}),!a&&e.jsx("span",{className:"font-medium text-sm ml-3",children:d("common.logout")})]})]}),a&&e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>t(!1),className:"absolute top-4 -right-4 h-8 w-8 rounded-full bg-card border border-border shadow-md text-muted-foreground hover:text-foreground",children:e.jsx(Ne,{className:"h-4 w-4"})})]})}function oa({children:a,fullWidth:t=!1}){const{signOut:r,user:s}=Q(),{t:n}=Y(),{theme:o,toggleTheme:l}=X(),i=ee(),u=I(),[d,g]=c.useState(!1),h=async()=>{try{await r(),g(!1),i("/landing")}catch{}},f=j=>{g(!1),i(j)};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(ea,{})}),e.jsxs("main",{className:"md:ml-72 min-h-screen transition-all duration-300 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-30 bg-background/80 backdrop-blur-xl border-b border-border md:hidden",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 flex items-center justify-center overflow-hidden",children:e.jsx("div",{className:"transform scale-[0.65]",children:e.jsx(Z,{})})}),e.jsx("h1",{className:"font-bold text-lg",children:"Scientia.ai"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(Se,{open:d,onOpenChange:g,children:[e.jsx(ke,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",children:e.jsx(we,{className:"h-6 w-6"})})}),e.jsxs(Ce,{side:"right",children:[e.jsx(Ae,{className:"text-left pb-4",children:e.jsx(Ee,{children:"Menu"})}),e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsxs(b,{className:m("w-full justify-between gap-3 h-12 relative overflow-hidden group mb-4",u.pathname==="/premium-dashboard"?"bg-premium text-premium-foreground hover:bg-premium/90 shadow-lg shadow-premium/20":"bg-premium/5 text-foreground hover:bg-premium/10 border border-premium/20"),onClick:()=>f("/premium-dashboard"),children:[e.jsxs("div",{className:"flex items-center gap-3 z-10",children:[e.jsx(K,{className:m("h-5 w-5 text-premium",u.pathname==="/premium-dashboard"&&"text-premium-foreground")}),e.jsx("span",{className:"font-bold tracking-tight",children:n("sidebar.goPremium")})]}),e.jsx("div",{className:"flex items-center gap-2 z-10",children:e.jsx("span",{className:"text-[10px] bg-background/20 backdrop-blur-sm px-2 py-0.5 rounded-full font-bold uppercase tracking-wider",children:n("sidebar.upgradePlan")})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"})]}),e.jsx(C,{className:"my-2"}),e.jsxs(b,{variant:"ghost",className:"w-full justify-start gap-3 h-12",onClick:()=>f("/settings"),children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:e.jsx(ye,{className:"h-5 w-5 text-blue-500"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:n("sidebar.account")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:(s==null?void 0:s.email)||n("sidebar.manageProfile")})]})]}),e.jsxs(b,{variant:"ghost",className:"w-full justify-start gap-3 h-12",onClick:()=>f("/settings"),children:[e.jsx("div",{className:"p-2 rounded-lg bg-gray-500/10",children:e.jsx(q,{className:"h-5 w-5 text-gray-500"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:n("common.settings")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:n("sidebar.appPreferences")})]})]}),e.jsx(C,{className:"my-2"}),e.jsxs(b,{variant:"ghost",className:"w-full justify-start gap-3 h-12",onClick:l,children:[e.jsx("div",{className:m("p-2 rounded-lg",o==="dark"?"bg-yellow-500/10":"bg-indigo-500/10"),children:o==="dark"?e.jsx(J,{className:"h-5 w-5 text-yellow-500"}):e.jsx(G,{className:"h-5 w-5 text-indigo-500"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:n(o==="dark"?"sidebar.lightMode":"sidebar.darkMode")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:n(o==="dark"?"sidebar.switchToLight":"sidebar.switchToDark")})]})]}),e.jsx(C,{className:"my-2"}),e.jsxs(b,{variant:"ghost",className:"w-full justify-start gap-3 h-12 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:h,children:[e.jsx("div",{className:"p-2 rounded-lg bg-destructive/10",children:e.jsx(W,{className:"h-5 w-5"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:n("common.logout")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:n("common.logout")})]})]})]})]})]})})]})}),e.jsx("div",{className:m("flex-1",t?"p-0":"p-4 md:p-8 pb-24 md:pb-8"),children:a})]}),e.jsx($e,{})]})}export{oa as A,he as a,pe as b,fe as c};
