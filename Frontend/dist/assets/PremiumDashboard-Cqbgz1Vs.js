import{c as De,a1 as _e,a2 as x,u as Te,r as h,j as e,d as H,A as Le,e as Fe,f as Ue,g as Me,S as me,h as qe,i as Ge,k as We,l as He,a4 as Ke,b as Ye,o as $e,D as ze,m as Je,L as he,B as te,C as ne,a as Ve}from"./index-7wMNJNZJ.js";import{B as xe,h as Xe,A as ge,Z as Qe,C as ae}from"./AppLayout-Cb4f3Rcb.js";import{S as Ze}from"./scroll-area-Dz-2y2_q.js";import{C as W}from"./circle-check-big-BnnLIOVu.js";import{B as er}from"./badge-CT5QE6KZ.js";import{C as rr,a as tr,b as nr,c as ar,e as sr}from"./card-BDQx_yt9.js";import{D as or,b as ir,c as cr,d as lr,e as ur}from"./dialog-CGZvDN6x.js";import{F as se,L as mr,c as Y}from"./sheet-D4eoD1m7.js";import{C as dr}from"./calculator-CgyrwzM8.js";import{T as oe}from"./timer-gs-OvMpO.js";import{T as pr}from"./trophy-CIdFvAMW.js";import{U as ie}from"./users-BPQvDXIc.js";import{C as fr}from"./calendar-D5Qbqv8w.js";import{S as $}from"./sparkles-BGeiEV-p.js";import{N as hr}from"./network-WB1gnkSZ.js";import{G as ye}from"./graduation-cap-DuPBMw0y.js";import{C as be}from"./chart-column-vCvLg5h8.js";import{L as xr}from"./lock-R7de3u4Z.js";import"./AnimatedLogoIcon-DY32PEux.js";import"./sun-CnDoiXzg.js";import"./index-8ugP4A3I.js";import"./index-BdQq_4o_.js";const gr=De("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);var ce={exports:{}},le,ve;function yr(){if(ve)return le;ve=1;var a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return le=a,le}var ue,je;function br(){if(je)return ue;je=1;var a=yr();function r(){}function n(){}return n.resetWarningCache=r,ue=function(){function s(i,g,c,w,b,C){if(C!==a){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}s.isRequired=s;function o(){return s}var t={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:o,element:s,elementType:s,instanceOf:o,node:s,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:r};return t.PropTypes=t,t},ue}var we;function vr(){return we||(we=1,ce.exports=br()()),ce.exports}var jr=vr();const u=_e(jr);function Se(a,r){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);r&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable})),n.push.apply(n,s)}return n}function Ce(a){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Se(Object(n),!0).forEach(function(s){Re(a,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(n,s))})}return a}function V(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?V=function(r){return typeof r}:V=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},V(a)}function Re(a,r,n){return r in a?Object.defineProperty(a,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[r]=n,a}function wr(a,r){if(a==null)return{};var n={},s=Object.keys(a),o,t;for(t=0;t<s.length;t++)o=s[t],!(r.indexOf(o)>=0)&&(n[o]=a[o]);return n}function Sr(a,r){if(a==null)return{};var n=wr(a,r),s,o;if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(a);for(o=0;o<t.length;o++)s=t[o],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(a,s)&&(n[s]=a[s])}return n}function Cr(a,r){return Nr(a)||kr(a,r)||Er(a,r)||Pr()}function Nr(a){if(Array.isArray(a))return a}function kr(a,r){var n=a&&(typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"]);if(n!=null){var s=[],o=!0,t=!1,i,g;try{for(n=n.call(a);!(o=(i=n.next()).done)&&(s.push(i.value),!(r&&s.length===r));o=!0);}catch(c){t=!0,g=c}finally{try{!o&&n.return!=null&&n.return()}finally{if(t)throw g}}return s}}function Er(a,r){if(a){if(typeof a=="string")return Ne(a,r);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ne(a,r)}}function Ne(a,r){(r==null||r>a.length)&&(r=a.length);for(var n=0,s=new Array(r);n<r;n++)s[n]=a[n];return s}function Pr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var j=function(r,n,s){var o=!!s,t=x.useRef(s);x.useEffect(function(){t.current=s},[s]),x.useEffect(function(){if(!o||!r)return function(){};var i=function(){t.current&&t.current.apply(t,arguments)};return r.on(n,i),function(){r.off(n,i)}},[o,n,r,t])},Ar=function(r){var n=x.useRef(r);return x.useEffect(function(){n.current=r},[r]),n.current},X=function(r){return r!==null&&V(r)==="object"},ke="[object Object]",Tr=function a(r,n){if(!X(r)||!X(n))return r===n;var s=Array.isArray(r),o=Array.isArray(n);if(s!==o)return!1;var t=Object.prototype.toString.call(r)===ke,i=Object.prototype.toString.call(n)===ke;if(t!==i)return!1;if(!t&&!s)return r===n;var g=Object.keys(r),c=Object.keys(n);if(g.length!==c.length)return!1;for(var w={},b=0;b<g.length;b+=1)w[g[b]]=!0;for(var C=0;C<c.length;C+=1)w[c[C]]=!0;var d=Object.keys(w);if(d.length!==g.length)return!1;var U=r,B=n,E=function(S){return a(U[S],B[S])};return d.every(E)},Rr=function(r,n,s){return X(r)?Object.keys(r).reduce(function(o,t){var i=!X(n)||!Tr(r[t],n[t]);return s.includes(t)||!i?o:Ce(Ce({},o||{}),{},Re({},t,r[t]))},null):null},Oe=x.createContext(null);Oe.displayName="ElementsContext";var Or=function(r,n){if(!r)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return r};u.any,u.object;u.func.isRequired;var Be=x.createContext(null);Be.displayName="CheckoutSdkContext";var Br=function(r,n){if(!r)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(n," in an <CheckoutProvider> provider."));return r},Ir=x.createContext(null);Ir.displayName="CheckoutContext";u.any,u.shape({fetchClientSecret:u.func.isRequired,elementsOptions:u.object}).isRequired;var Ee=function(r){var n=x.useContext(Be),s=x.useContext(Oe);if(n&&s)throw new Error("You cannot wrap the part of your app that ".concat(r," in both <CheckoutProvider> and <Elements> providers."));return n?Br(n,r):Or(s,r)},Dr=["mode"],_r=function(r){return r.charAt(0).toUpperCase()+r.slice(1)},p=function(r,n){var s="".concat(_r(r),"Element"),o=function(c){var w=c.id,b=c.className,C=c.options,d=C===void 0?{}:C,U=c.onBlur,B=c.onFocus,E=c.onReady,I=c.onChange,S=c.onEscape,T=c.onClick,D=c.onLoadError,_=c.onLoaderStart,R=c.onNetworksChange,O=c.onConfirm,N=c.onCancel,A=c.onShippingAddressChange,Q=c.onShippingRateChange,Z=c.onSavedPaymentMethodRemove,M=c.onSavedPaymentMethodUpdate,L=Ee("mounts <".concat(s,">")),F="elements"in L?L.elements:null,k="checkoutSdk"in L?L.checkoutSdk:null,l=x.useState(null),v=Cr(l,2),m=v[0],K=v[1],P=x.useRef(null),ee=x.useRef(null);j(m,"blur",U),j(m,"focus",B),j(m,"escape",S),j(m,"click",T),j(m,"loaderror",D),j(m,"loaderstart",_),j(m,"networkschange",R),j(m,"confirm",O),j(m,"cancel",N),j(m,"shippingaddresschange",A),j(m,"shippingratechange",Q),j(m,"savedpaymentmethodremove",Z),j(m,"savedpaymentmethodupdate",M),j(m,"change",I);var re;E&&(r==="expressCheckout"?re=E:re=function(){E(m)}),j(m,"ready",re),x.useLayoutEffect(function(){if(P.current===null&&ee.current!==null&&(F||k)){var y=null;if(k)switch(r){case"payment":y=k.createPaymentElement(d);break;case"address":if("mode"in d){var pe=d.mode,fe=Sr(d,Dr);if(pe==="shipping")y=k.createShippingAddressElement(fe);else if(pe==="billing")y=k.createBillingAddressElement(fe);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":y=k.createExpressCheckoutElement(d);break;case"currencySelector":y=k.createCurrencySelectorElement();break;case"taxId":y=k.createTaxIdElement(d);break;default:throw new Error("Invalid Element type ".concat(s,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else F&&(y=F.create(r,d));P.current=y,K(y),y&&y.mount(ee.current)}},[F,k,d]);var de=Ar(d);return x.useEffect(function(){if(P.current){var y=Rr(d,de,["paymentRequest"]);y&&"update"in P.current&&P.current.update(y)}},[d,de]),x.useLayoutEffect(function(){return function(){if(P.current&&typeof P.current.destroy=="function")try{P.current.destroy(),P.current=null}catch{}}},[]),x.createElement("div",{id:w,className:b,ref:ee})},t=function(c){Ee("mounts <".concat(s,">"));var w=c.id,b=c.className;return x.createElement("div",{id:w,className:b})},i=n?t:o;return i.propTypes={id:u.string,className:u.string,onChange:u.func,onBlur:u.func,onFocus:u.func,onReady:u.func,onEscape:u.func,onClick:u.func,onLoadError:u.func,onLoaderStart:u.func,onNetworksChange:u.func,onConfirm:u.func,onCancel:u.func,onShippingAddressChange:u.func,onShippingRateChange:u.func,onSavedPaymentMethodRemove:u.func,onSavedPaymentMethodUpdate:u.func,options:u.object},i.displayName=s,i.__elementType=r,i},f=typeof window>"u",Lr=x.createContext(null);Lr.displayName="EmbeddedCheckoutProviderContext";p("auBankAccount",f);p("card",f);p("cardNumber",f);p("cardExpiry",f);p("cardCvc",f);p("fpxBank",f);p("iban",f);p("idealBank",f);p("p24Bank",f);p("epsBank",f);p("payment",f);p("expressCheckout",f);p("currencySelector",f);p("paymentRequestButton",f);p("linkAuthentication",f);p("address",f);p("shippingAddress",f);p("paymentMethodMessaging",f);p("affirmMessage",f);p("afterpayClearpayMessage",f);p("taxId",f);var Ie="https://js.stripe.com",Fr="".concat(Ie,"/v3"),Ur=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Mr=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var qr=function(r){return Ur.test(r)||Mr.test(r)},Gr=function(){for(var r=document.querySelectorAll('script[src^="'.concat(Ie,'"]')),n=0;n<r.length;n++){var s=r[n];if(qr(s.src))return s}return null},Pe=function(r){var n="",s=document.createElement("script");s.src="".concat(Fr).concat(n);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(s),s},q=null,z=null,J=null,Wr=function(r){return function(n){r(new Error("Failed to load Stripe.js",{cause:n}))}},Hr=function(r,n){return function(){window.Stripe?r(window.Stripe):n(new Error("Stripe.js not available"))}},Kr=function(r){return q!==null?q:(q=new Promise(function(n,s){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var o=Gr();if(!(o&&r)){if(!o)o=Pe(r);else if(o&&J!==null&&z!==null){var t;o.removeEventListener("load",J),o.removeEventListener("error",z),(t=o.parentNode)===null||t===void 0||t.removeChild(o),o=Pe(r)}}J=Hr(n,s),z=Wr(s),o.addEventListener("load",J),o.addEventListener("error",z)}catch(i){s(i);return}}),q.catch(function(n){return q=null,Promise.reject(n)}))},G,Yr=function(){return G||(G=Kr(null).catch(function(r){return G=null,Promise.reject(r)}),G)};Promise.resolve().then(function(){return Yr()}).catch(function(a){});const Ae=25,$r="GBP",zr={PUBE20:.2,FRANQ20:.2,FREE100:1};function Jr({onSuccess:a,onError:r}){const{user:n,supabase:s}=Te(),[o,t]=h.useState(null),[i,g]=h.useState(!1),[c,w]=h.useState(""),[b,C]=h.useState(null),[d,U]=h.useState(null),[B,E]=h.useState(!1),I=b?zr[b]??0:0,S=parseFloat((Ae*(1-I)).toFixed(2));parseFloat((Ae-S).toFixed(2));const T=h.useRef(null),D=window.location.origin,_=async R=>{if(!(!s||!n)){g(!0),t(null);try{const{data:{session:O}}=await s.auth.getSession();if(!O?.access_token)throw new Error("Not authenticated");const N=await fetch(`${D}/api/payments/create-payment`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O.access_token}`},body:JSON.stringify({provider:"stripe",amount:R,currency:$r,discountCode:b??void 0})}),A=await N.json();if(!N.ok)throw new Error(A.error||"Failed to initialise payment. Please try again.");if(A.isFree){H.success("ðŸŽ‰ Premium activated successfully!",{duration:6e3}),a();return}if(!A.clientSecret)throw new Error("Stripe client secret was not returned from the server.");t(A.clientSecret),T.current=R}catch(O){const N=O.message||"Unable to start the payment. Please refresh and try again.";H.error(N),r?.(N)}finally{g(!1)}}};return h.useEffect(()=>{T.current!==S&&_(S)},[S,n,s]),e.jsxs("div",{className:"text-center py-6 text-muted-foreground text-sm",children:[e.jsx("p",{children:"Stripe is not configured yet."}),e.jsxs("p",{className:"mt-1 text-xs",children:["Add"," ",e.jsx("code",{className:"rounded bg-muted px-1",children:"VITE_STRIPE_PUBLISHABLE_KEY"})," ","to your environment."]})]})}function Vr({open:a,onOpenChange:r,onAccept:n}){return e.jsx(Le,{open:a,onOpenChange:r,children:e.jsxs(Fe,{className:"max-w-2xl",children:[e.jsxs(Ue,{children:[e.jsxs(Me,{className:"flex items-center gap-2 text-2xl",children:[e.jsx(me,{className:"h-6 w-6 text-primary"}),"Subscription Terms & Policies"]}),e.jsx(qe,{children:"Please review and accept our terms before proceeding to payment."})]}),e.jsx(Ze,{className:"h-[400px] my-4 p-4 border rounded-md",children:e.jsxs("div",{className:"space-y-6 text-sm text-muted-foreground",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"font-bold text-foreground mb-2 flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4 text-secondary"}),"1. Payment Agreement"]}),e.jsx("p",{children:"By purchasing Revisely.ai Premium, you agree to pay the applicable premium fee using our secure card payment provider (such as Stripe). If we later introduce recurring plans, details will be clearly shown before you confirm payment."})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"font-bold text-foreground mb-2 flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4 text-secondary"}),"2. Data & Privacy"]}),e.jsx("p",{children:"We may collect anonymous usage data to improve user experience. Your personal study materials remain private and accessible only to you. For full details, please refer to our Privacy Policy."})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"font-bold text-foreground mb-2 flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4 text-secondary"}),"3. Content Accuracy"]}),e.jsx("p",{children:"While our AI tools aim for high accuracy, please verify important information independently. Features may be updated or improved over time."})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"font-bold text-foreground mb-2 flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4 text-secondary"}),"4. Cancellation & Refunds"]}),e.jsx("p",{children:"You may cancel your subscription at any time. After cancellation, you will retain premium access until the end of your current billing period. Refund requests are handled on a case-by-case basis within 7 days of purchase."})]}),e.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg border border-dashed border-border",children:[e.jsx("p",{className:"font-medium text-foreground mb-1",children:"Confirmation"}),e.jsx("p",{className:"text-xs",children:'By clicking "Accept & Continue to Payment", you confirm that you have read and understood these terms and agree to the Revisely.ai Premium Subscription Terms.'})]})]})}),e.jsxs(Ge,{children:[e.jsx(We,{children:"Decline"}),e.jsx(He,{onClick:n,className:"bg-premium hover:bg-premium/90 text-premium-foreground",children:"Accept & Continue to Payment"})]})]})})}const Xr=window.location.origin;async function Qr(a){try{let r=a;if(!r)return null;const{data:{session:n}}=await r.auth.getSession();return n?.access_token||null}catch{return null}}async function Zr(a){try{const r=await Qr(a);if(!r)return{error:"Not authenticated"};const n=await fetch(`${Xr}/api/payments/subscription`,{headers:{Authorization:`Bearer ${r}`}}),s=await n.json();return n.ok?s:{error:s.error||"Failed to get subscription"}}catch(r){return{error:r instanceof Error?r.message:"Network error"}}}function wt(){const{user:a,supabase:r}=Te(),n=Ye(),[s]=$e(),{theme:o}=ze(),{t}=Je(),[i,g]=h.useState(!1),[c,w]=h.useState(!0),[b,C]=h.useState(null),[d,U]=h.useState(!1),[B,E]=h.useState(!1),[I,S]=h.useState(!1),[T,D]=h.useState(!1),[_,R]=h.useState(!1),[O,N]=h.useState(!0),A=[{title:t("premium.features.aiTutor.title"),description:t("premium.features.aiTutor.description"),icon:xe,path:"/ai-tutor",color:"text-amber-500",bg:"bg-amber-500/10",hoverBg:"bg-amber-500"},{title:t("premium.features.noteCondenser.title"),description:t("premium.features.noteCondenser.description"),icon:se,path:"/premium/note-condenser",color:"text-blue-500",bg:"bg-blue-500/10",hoverBg:"bg-blue-500"},{title:t("premium.features.predictedGrades.title"),description:t("premium.features.predictedGrades.description"),icon:dr,path:"/premium/predicted-grades",color:"text-green-500",bg:"bg-green-500/10",hoverBg:"bg-green-500"},{title:t("premium.features.focusMode.title"),description:t("premium.features.focusMode.description"),icon:oe,path:"/premium/focus-mode",color:"text-red-500",bg:"bg-red-500/10",hoverBg:"bg-red-500"},{title:t("premium.features.leaderboards.title"),description:t("premium.features.leaderboards.description"),icon:pr,path:"/premium/leaderboard",color:"text-orange-500",bg:"bg-orange-500/10",hoverBg:"bg-orange-500"},{title:t("premium.features.virtualSessions.title"),description:t("premium.features.virtualSessions.description"),icon:ie,path:"/premium/virtual-sessions",color:"text-indigo-500",bg:"bg-indigo-500/10",hoverBg:"bg-indigo-500"},{title:t("premium.features.homeworkTracker.title"),description:t("premium.features.homeworkTracker.description"),icon:fr,path:"/premium/homework-tracker",color:"text-pink-500",bg:"bg-pink-500/10",hoverBg:"bg-pink-500"},{title:t("premium.features.studyPlans.title"),description:t("premium.features.studyPlans.description"),icon:$,path:"/premium/study-plans",color:"text-cyan-500",bg:"bg-cyan-500/10",hoverBg:"bg-cyan-500"},{title:t("premium.features.mindMap.title"),description:t("premium.features.mindMap.description"),icon:hr,path:"/premium/mind-map-generator",color:"text-purple-500",bg:"bg-purple-500/10",hoverBg:"bg-purple-500"},{title:t("premium.features.aiExaminer.title"),description:t("premium.features.aiExaminer.description"),icon:ye,path:"/premium/ai-examiner",color:"text-blue-500",bg:"bg-blue-500/10",hoverBg:"bg-blue-500"},{title:t("premium.features.performanceHeatmap.title"),description:t("premium.features.performanceHeatmap.description"),icon:be,path:"/premium/performance-heatmap",color:"text-orange-500",bg:"bg-orange-500/10",hoverBg:"bg-orange-500"},{title:t("premium.features.grade9Notes.title"),description:t("premium.features.grade9Notes.description"),icon:se,path:"/premium/grade-9-notes",color:"text-emerald-500",bg:"bg-emerald-500/10",hoverBg:"bg-emerald-500"},{title:"Grade 9 Flashcards",description:"Premium flashcards for rapid revision and retention",icon:mr,path:"/premium/grade-9-flashcards",color:"text-pink-500",bg:"bg-pink-500/10",hoverBg:"bg-pink-500"}],Q=[{icon:Y,title:t("premium.features.aiQuestions.title"),description:t("premium.dashboard.unlimitedAIDescription")},{icon:xe,title:t("premium.features.aiTutor.title"),description:t("premium.features.aiTutor.description")},{icon:oe,title:t("premium.features.performanceHeatmap.title"),description:t("premium.features.performanceHeatmap.description")},{icon:me,title:t("premium.features.focusMode.title"),description:t("premium.features.focusMode.description")},{icon:ie,title:t("premium.features.virtualSessions.title"),description:t("premium.features.virtualSessions.description")},{icon:Y,title:t("premium.features.grade9Notes.title"),description:t("premium.features.grade9Notes.description")},{icon:oe,title:t("premium.features.homeworkTracker.title"),description:t("premium.features.homeworkTracker.description")},{icon:$,title:t("premium.features.studyPlans.title"),description:t("premium.features.studyPlans.description")},{icon:Y,title:t("premium.features.mindMap.title"),description:t("premium.features.mindMap.description")},{icon:ye,title:t("premium.features.aiExaminer.title"),description:t("premium.features.aiExaminer.description")},{icon:be,title:t("premium.features.performanceHeatmap.title"),description:t("premium.features.performanceHeatmap.description")},{icon:ie,title:t("premium.features.workExperience.title"),description:t("premium.features.workExperience.description"),badgeKey:"workExperience"},{icon:se,title:t("premium.features.predictedPapers.title"),description:t("premium.features.predictedPapers.description"),badgeKey:"predictedPapers"}];h.useEffect(()=>{const l=s.get("success"),v=s.get("canceled"),m=s.get("session_id");l&&m?(H.success("Payment successful! Your premium subscription is now active."),M(),n("/premium-dashboard",{replace:!0})):v&&(H.info("Payment canceled. You can try again anytime."),n("/premium-dashboard",{replace:!0}))},[s,n]),h.useEffect(()=>{a?(M(),Z()):(w(!1),N(!1))},[a]);const Z=async()=>{if(r){N(!0);try{const{count:l}=await r.from("premium_predicted_papers").select("*",{count:"exact",head:!0}).eq("is_premium",!0);D((l||0)>0);const{count:v}=await r.from("premium_work_experience").select("*",{count:"exact",head:!0}).eq("is_premium",!0).eq("is_active",!0);R((v||0)>0)}catch{D(!1),R(!1)}finally{N(!1)}}},M=async()=>{if(!(!a||!r)){w(!0);try{const l=await Xe(r);if(g(l),l){const v=await Zr(r);v&&!v.error&&C(v.subscription)}}catch{}finally{w(!1)}}},L=()=>{E(!0)},F=async()=>{E(!1),!(!a||!r)&&S(!0)},k=async()=>{S(!1),H.success("Payment successful! Your premium access is now active. ðŸŽ‰"),g(!0),await M(),n("/premium-dashboard",{replace:!0})};return c?e.jsx(ge,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(he,{className:"h-8 w-8 animate-spin text-primary"})})}):e.jsxs(ge,{children:[e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 animate-fade-in pb-10",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-r from-yellow-500/20 via-amber-500/20 to-yellow-600/20 p-8 border border-yellow-500/30",children:[e.jsx("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-64 h-64 bg-yellow-500/10 rounded-full blur-3xl"}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-start md:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-yellow-600 to-amber-600 dark:from-yellow-400 dark:to-amber-400",children:t(i?"premium.dashboard.welcomePremium":"premium.dashboard.unlockPotential")}),e.jsx("p",{className:"text-muted-foreground mt-3 max-w-xl text-lg",children:t(i?"premium.dashboard.premiumDescription":"premium.dashboard.freeDescription")}),!i&&e.jsxs("div",{className:"mt-4 p-4 rounded-xl bg-gradient-to-r from-red-500/20 to-pink-500/20 border border-red-500/30 animate-pulse-subtle",children:[e.jsxs("h3",{className:"text-lg font-bold text-red-500 flex items-center gap-2",children:[e.jsx(Qe,{className:"h-5 w-5"}),"LIMITED TIME OFFER"]}),e.jsxs("p",{className:"text-foreground font-medium",children:["Get full 2026 GCSE Season Access for just ",e.jsx("span",{className:"text-xl font-bold text-red-500",children:"Â£25"}),"!"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Unlock everything you need for your exams."})]})]}),!i&&e.jsxs(te,{size:"lg",className:"bg-gradient-to-r from-yellow-500 to-amber-600 hover:from-yellow-600 hover:to-amber-700 text-white shadow-lg border-0 text-base md:text-lg px-6 md:px-8 py-4 md:py-6 h-auto whitespace-nowrap shrink-0",onClick:()=>document.getElementById("pricing-section")?.scrollIntoView({behavior:"smooth"}),children:[e.jsx($,{className:"w-5 h-5 mr-2"}),t("premium.dashboard.upgradeToPremium")]})]})]}),i&&b&&e.jsx("div",{className:"glass-card p-6 mb-8 animate-slide-up",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ne,{className:"h-5 w-5 text-secondary"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:t("premium.dashboard.activeSubscription")})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Premium â€” One-Time Purchase"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Purchased: ",new Date(b.current_period_start).toLocaleDateString()]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:A.map((l,v)=>e.jsxs(rr,{className:"group relative overflow-hidden transition-all duration-300 hover:shadow-xl hover:scale-[1.02] border-primary/10 bg-card/50 backdrop-blur-sm cursor-pointer",onClick:()=>n(l.path),children:[e.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${l.hoverBg} opacity-0 group-hover:opacity-100 transition-opacity`}),e.jsxs(tr,{children:[e.jsx("div",{className:`w-12 h-12 rounded-xl ${l.bg} flex items-center justify-center mb-4 group-hover:bg-opacity-20 transition-all`,children:e.jsx(l.icon,{className:`w-6 h-6 ${l.color}`})}),e.jsx(nr,{className:"text-xl",children:l.title}),e.jsx(ar,{className:"line-clamp-2 mt-2",children:l.description})]}),e.jsxs(sr,{className:"pt-0 flex justify-between items-center text-sm text-muted-foreground",children:[e.jsx("span",{className:"group-hover:text-primary transition-colors",children:t(i?"premium.dashboard.launchTool":"premium.dashboard.premiumOnly")}),i?e.jsx(l.icon,{className:"w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity transform translate-x-[-10px] group-hover:translate-x-0 duration-300"}):e.jsx(xr,{className:"w-4 h-4 text-muted-foreground"})]})]},v))}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground",children:t(i?"premium.dashboard.yourBenefits":"premium.dashboard.premiumFeatures")}),e.jsx("p",{className:"text-muted-foreground mt-2",children:t(i?"premium.dashboard.benefitsDescriptionPremium":"premium.dashboard.benefitsDescriptionFree")})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Q.map((l,v)=>{const m=l,K=m.badgeKey==="workExperience"?t(_?"premium.dashboard.available":"premium.dashboard.comingSoon"):m.badgeKey==="predictedPapers"?t(T?"premium.dashboard.available":"premium.dashboard.comingSoon"):null;return e.jsxs("div",{className:"glass-card p-5 animate-slide-up",style:{animationDelay:`${.1*v}s`,opacity:0},children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-3",children:[e.jsx("div",{className:"p-2.5 rounded-xl bg-premium/10 w-fit",children:e.jsx(l.icon,{className:"h-5 w-5 text-premium"})}),K&&e.jsx(er,{variant:"secondary",className:Ve("text-xs",_&&m.badgeKey==="workExperience"||T&&m.badgeKey==="predictedPapers"?"bg-premium/20 text-premium border-premium/30":"bg-muted/50 text-muted-foreground"),children:K})]}),e.jsx("h3",{className:"font-semibold text-foreground mb-1",children:l.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.description})]},v)})})]}),e.jsxs("div",{className:"p-8 rounded-2xl border-2 border-dashed border-border bg-muted/30 text-center animate-slide-up",children:[e.jsxs("div",{className:"relative inline-block mb-4",children:[e.jsx(Y,{className:"h-16 w-16 text-muted-foreground/50"}),e.jsx("div",{className:"absolute -top-1 -right-1 p-1.5 rounded-full bg-premium",children:e.jsx(ae,{className:"h-4 w-4 text-premium-foreground"})})]}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:t("premium.dashboard.unlimitedAI")}),e.jsx("p",{className:"text-muted-foreground mb-4",children:t("premium.dashboard.unlimitedAIDescription")}),i?e.jsxs("div",{className:"flex items-center justify-center gap-2 text-secondary",children:[e.jsx(ne,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:t("premium.dashboard.accessGranted")})]}):e.jsxs(te,{className:"bg-premium hover:bg-premium/90 text-premium-foreground mx-auto",onClick:()=>document.getElementById("pricing-section")?.scrollIntoView({behavior:"smooth"}),children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),t("premium.dashboard.unlockPremium")]})]}),!i&&e.jsxs("div",{id:"pricing-section",className:"space-y-12 pt-12 border-t border-border/50",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Get Premium"}),e.jsx("p",{className:"text-muted-foreground",children:"One-time payment â€” no recurring charges"})]}),e.jsx("div",{className:"max-w-lg mx-auto",children:e.jsxs("div",{className:"relative rounded-2xl p-6 md:p-8 border-2 border-premium shadow-lg transition-all duration-300 animate-scale-in",style:{animationDelay:"0.3s",opacity:0},children:[e.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:e.jsxs("span",{className:"premium-badge",children:[e.jsx($,{className:"h-3 w-3 fill-current"}),"One-Time Payment"]})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Premium Access"}),e.jsx("div",{className:"flex items-baseline justify-center gap-1",children:e.jsx("span",{className:"text-4xl font-bold text-foreground",children:"Â£25.00"})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"One-time payment â€” no recurring charges"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Full access to all premium features for the 2026 GCSE season"})]}),e.jsx("ul",{className:"space-y-3 mb-6",children:["All premium features","No recurring charges","Priority new features","Exclusive content"].map(l=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-foreground",children:[e.jsx(W,{className:"h-4 w-4 text-secondary flex-shrink-0"}),l]},l))}),e.jsx(te,{className:"w-full bg-premium hover:bg-premium/90 text-premium-foreground",onClick:()=>L(),disabled:d||i,children:d?e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"h-4 w-4 mr-2 animate-spin"}),t("premium.dashboard.processing")]}):i?e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),t("premium.dashboard.alreadyPremium")]}):e.jsxs(e.Fragment,{children:[e.jsx(gr,{className:"h-4 w-4 mr-2"}),"Buy Premium â€” Â£25"]})})]})}),e.jsxs("div",{className:"glass-card p-6 md:p-8 text-center max-w-2xl mx-auto",children:[e.jsx(me,{className:"h-10 w-10 text-secondary mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:t("premium.dashboard.moneyBackGuarantee")}),e.jsx("p",{className:"text-muted-foreground",children:t("premium.dashboard.moneyBackDescription")})]})]})]}),e.jsx(Vr,{open:B,onOpenChange:E,onAccept:F}),e.jsx(or,{open:I,onOpenChange:S,children:e.jsxs(ir,{className:"sm:max-w-md",children:[e.jsxs(cr,{children:[e.jsxs(lr,{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-5 w-5 text-premium"}),"Complete Payment securely with card"]}),e.jsx(ur,{children:"Pay Â£25.00 one-time to unlock all premium features."})]}),e.jsx(Jr,{onSuccess:k,onError:l=>{}})]})})]})}export{wt as default};
