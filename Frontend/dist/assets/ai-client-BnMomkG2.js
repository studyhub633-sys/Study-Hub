import{c as d}from"./supabase-vendor-BcRMW6g-.js";const u="";async function l(t){try{let e=t;if(!e)return null;const{data:{session:n}}=await e.auth.getSession();return(n==null?void 0:n.access_token)||null}catch{return null}}async function o(t,e={},n){try{const r=await l(n);if(!r)return{error:"Not authenticated. Please sign in to use AI features."};const i=`${u}${t}`,a=await fetch(i,{...e,headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`,...e.headers}});let s;const c=a.headers.get("content-type");if(c&&c.includes("application/json"))s=await a.json();else return{error:`Server returned non-JSON response: ${(await a.text()).substring(0,200)}`};return a.ok?{data:s}:{error:s.error||`Request failed with status ${a.status}`,message:s.message}}catch(r){return r instanceof TypeError&&r.message.includes("fetch")?{error:`Failed to connect to API server. Please check:
- Is the server running? (Expected: ${u})
- Is VITE_API_URL set correctly in your .env file?
- Check your network connection and CORS settings.`}:{error:r instanceof Error?r.message:"Network error occurred"}}}async function h(t,e){return o("/api/ai/generate-flashcards",{method:"POST",body:JSON.stringify(t)},e)}async function p(t,e){return o("/api/ai/generate-knowledge-organizer",{method:"POST",body:JSON.stringify(t)},e)}const y=async(t,e)=>o("/api/ai/chat",{method:"POST",body:JSON.stringify(t)},e);export{p as a,y as c,h as g};
