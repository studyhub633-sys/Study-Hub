import{u as R,r as d,j as e,L as U,B as o}from"./index-7wMNJNZJ.js";import{A as x,h as _}from"./AppLayout-Cb4f3Rcb.js";import{C as j,a as A,b as P,c as E,d as g}from"./card-BDQx_yt9.js";import{L as p}from"./label-4_8C0ZIE.js";import{S as f,a as b,b as y,c as v,d as c}from"./select-Do0TjdJZ.js";import{C as G}from"./calculator-CgyrwzM8.js";import{T as I}from"./trending-up-BHQkB8Iw.js";import"./AnimatedLogoIcon-DY32PEux.js";import"./sheet-D4eoD1m7.js";import"./sun-CnDoiXzg.js";import"./index-BdQq_4o_.js";import"./index-8ugP4A3I.js";import"./chevron-down-CjDqse4M.js";const L={9:9,8:8,7:7,6:6,5:5,4:4,3:3,2:2,1:1},$={9:"9 (A**)",8:"8 (A*)",7:"7 (A)",6:"6 (B)",5:"5 (C)",4:"4 (C-)",3:"3 (D)",2:"2 (E)",1:"1 (F)"};function te(){const{supabase:N,user:C}=R(),[T,B]=d.useState(!1),[F,S]=d.useState(!0),[l,m]=d.useState([{name:"",grade:"",target:""}]),[n,V]=d.useState(null);d.useEffect(()=>{(async()=>{if(!C||!N){S(!1);return}try{const s=await _(N);B(s)}catch{}finally{S(!1)}})()},[C]);const W=()=>{m([...l,{name:"",grade:"",target:""}])},h=(a,s,r)=>{const t=[...l];t[a]={...t[a],[s]:r},m(t)},D=a=>{l.length>1&&m(l.filter((s,r)=>r!==a))},O=()=>{const a=l.filter(i=>i.name&&i.grade&&i.target);if(a.length===0)return;let s=0,r=0,t=0;const u=[];a.forEach(i=>{const k=L[i.grade]||0,w=L[i.target]||0;k>=w?t++:k>=w-1?s++:(r++,u.push(i.name))}),a.length;const H=r>0?`Based on your recent inputs, you need to focus on ${u.join(", ")} to reach your target grades. You're exceeding in ${t} subject${t!==1?"s":""} and on track in ${s} subject${s!==1?"s":""}.`:`Based on your recent inputs, you are exceeding your target in ${t} subject${t!==1?"s":""} and on track in ${s} subject${s!==1?"s":""}. Keep up the excellent work!`;V({onTrack:s,needsWork:r,exceeding:t,message:H,focusAreas:u})};return F?e.jsx(x,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(U,{className:"h-8 w-8 animate-spin text-primary"})})}):T?e.jsx(x,{children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 animate-fade-in pb-12",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 rounded-xl bg-green-500/10 text-green-500",children:e.jsx(G,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Predicted Grades Calculator"}),e.jsx("p",{className:"text-muted-foreground",children:"Track your performance and see what you're on track to achieve."})]})]}),e.jsxs(j,{children:[e.jsxs(A,{children:[e.jsx(P,{children:"Subject Performance"}),e.jsx(E,{children:"Enter your current mock results or recent test scores."})]}),e.jsxs(g,{className:"space-y-6",children:[l.map((a,s)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end pb-4 border-b last:border-0",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Subject"}),e.jsxs(f,{value:a.name,onValueChange:r=>h(s,"name",r),children:[e.jsx(b,{children:e.jsx(y,{placeholder:"Select Subject"})}),e.jsxs(v,{children:[e.jsx(c,{value:"Mathematics",children:"Mathematics"}),e.jsx(c,{value:"English Literature",children:"English Literature"}),e.jsx(c,{value:"English Language",children:"English Language"}),e.jsx(c,{value:"Biology",children:"Biology"}),e.jsx(c,{value:"Chemistry",children:"Chemistry"}),e.jsx(c,{value:"Physics",children:"Physics"}),e.jsx(c,{value:"History",children:"History"}),e.jsx(c,{value:"Geography",children:"Geography"}),e.jsx(c,{value:"French",children:"French"}),e.jsx(c,{value:"Spanish",children:"Spanish"}),e.jsx(c,{value:"Computer Science",children:"Computer Science"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Current Grade"}),e.jsxs(f,{value:a.grade,onValueChange:r=>h(s,"grade",r),children:[e.jsx(b,{children:e.jsx(y,{placeholder:"Grade"})}),e.jsx(v,{children:Object.entries($).map(([r,t])=>e.jsx(c,{value:r,children:t},r))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Target Grade"}),e.jsxs(f,{value:a.target,onValueChange:r=>h(s,"target",r),children:[e.jsx(b,{children:e.jsx(y,{placeholder:"Target"})}),e.jsx(v,{children:Object.entries($).map(([r,t])=>e.jsx(c,{value:r,children:t},r))})]})]}),l.length>1&&e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>D(s),children:"Ã—"})]},s)),e.jsx(o,{variant:"outline",onClick:W,className:"w-full border-dashed",children:"+ Add Another Subject"}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(o,{className:"bg-green-600 hover:bg-green-700",onClick:O,children:"Calculate Prediction"})})]})]}),n&&e.jsx(j,{className:n.needsWork>0?"bg-yellow-500/10 border-yellow-500/20":"bg-green-500/10 border-green-500/20",children:e.jsx(g,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-3 ${n.needsWork>0?"bg-yellow-500/20 text-yellow-600":"bg-green-500/20 text-green-600"} rounded-full`,children:e.jsx(I,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-xl font-bold ${n.needsWork>0?"text-yellow-700 dark:text-yellow-400":"text-green-700 dark:text-green-400"}`,children:n.needsWork>0?"Areas to Focus On":"On Track for Success"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:n.message}),n.focusAreas.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm font-semibold mb-2",children:"Focus Areas:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.focusAreas.map((a,s)=>e.jsx("span",{className:"px-2 py-1 bg-yellow-500/20 text-yellow-700 dark:text-yellow-400 rounded text-sm",children:a},s))})]})]})]})})})]})}):e.jsx(x,{children:e.jsx("div",{className:"max-w-4xl mx-auto py-12",children:e.jsxs(j,{className:"border-amber-500/20 bg-amber-500/5",children:[e.jsxs(A,{children:[e.jsxs(P,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-6 h-6 text-amber-500"}),"Premium Feature"]}),e.jsx(E,{children:"Predicted Grades Calculator is a premium feature"})]}),e.jsxs(g,{children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Upgrade to premium to track your performance and see what grades you're on track to achieve."}),e.jsx(o,{onClick:()=>window.location.href="/premium-dashboard",className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:"View Premium Plans"})]})]})})})}export{te as default};
