import{u as K,b as W,r as t,d as w,j as e,L as y,B as C}from"./index-7wMNJNZJ.js";import{h as X,A as x,C as Z}from"./AppLayout-Cb4f3Rcb.js";import{B as o}from"./badge-CT5QE6KZ.js";import{C as h,a as $,b as ee,c as se,d as P}from"./card-BDQx_yt9.js";import{I as re}from"./input-CURGwIC-.js";import{S as j,a as f,b as p,c as g,d as a}from"./select-Do0TjdJZ.js";import{S as A}from"./sparkles-BGeiEV-p.js";import{S as te}from"./search-D5Hb3sC3.js";import{F as T}from"./sheet-D4eoD1m7.js";import{L as ae}from"./link-7JdfHv93.js";import{D as le}from"./download-CoW69tSE.js";import"./AnimatedLogoIcon-DY32PEux.js";import"./sun-CnDoiXzg.js";import"./index-BdQq_4o_.js";import"./index-8ugP4A3I.js";import"./chevron-down-CjDqse4M.js";function Se(){const{supabase:n,user:i}=K(),b=W(),[_,k]=t.useState(!1),[B,L]=t.useState(!0),[l,F]=t.useState([]),[q,v]=t.useState(!0),[c,E]=t.useState(""),[m,V]=t.useState("All Subjects"),[d,I]=t.useState("All Boards"),[u,D]=t.useState("All Tiers");t.useEffect(()=>{i&&(H(),U())},[i]);const H=async()=>{if(!(!i||!n))try{const s=await X(n);k(s),s||(w.error("This is a premium feature. Please upgrade to access."),b("/premium-dashboard"))}catch{}finally{L(!1)}},U=async()=>{if(i)try{v(!0);const{data:s,error:r}=await n.from("premium_predicted_papers").select("*").eq("is_premium",!0).order("created_at",{ascending:!1});if(r)throw r;F(s||[])}catch{w.error("Failed to load predicted papers.")}finally{v(!1)}},Q=()=>l.filter(s=>{const r=!c||s.title.toLowerCase().includes(c.toLowerCase())||s.subject?.toLowerCase().includes(c.toLowerCase()),R=m==="All Subjects"||s.subject===m,G=d==="All Boards"||s.exam_board===d,J=u==="All Tiers"||!s.tier||s.tier===u;return r&&R&&G&&J}),Y=()=>{const s=l.map(r=>r.subject).filter(r=>r!==null);return Array.from(new Set(s)).sort()},z=()=>{const s=l.map(r=>r.exam_board).filter(r=>r!==null);return Array.from(new Set(s)).sort()},N=s=>{s.file_url&&(s.file_type,window.open(s.file_url,"_blank"))};if(B)return e.jsx(x,{children:e.jsx("div",{className:"max-w-6xl mx-auto flex items-center justify-center h-[60vh]",children:e.jsx(y,{className:"h-8 w-8 animate-spin text-muted-foreground"})})});if(!_)return e.jsx(x,{children:e.jsxs("div",{className:"max-w-6xl mx-auto flex flex-col items-center justify-center h-[60vh] gap-4",children:[e.jsx(Z,{className:"h-16 w-16 text-premium"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Premium Feature"}),e.jsx("p",{className:"text-muted-foreground",children:"This feature is available for premium members only."}),e.jsx(C,{onClick:()=>b("/premium-dashboard"),children:"Upgrade to Premium"})]})});const S=Q(),M=Y(),O=z();return e.jsx(x,{children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"mb-8 animate-fade-in",children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-premium/10",children:e.jsx(A,{className:"h-6 w-6 text-premium"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"2026 Predicted Papers"}),e.jsx("p",{className:"text-muted-foreground",children:"Exclusive predicted exam papers available to premium members"})]})]})}),e.jsx("div",{className:"glass-card p-4 mb-6 animate-slide-up",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(te,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(re,{placeholder:"Search papers...",value:c,onChange:s=>E(s.target.value),className:"pl-9"})]}),e.jsxs(j,{value:m,onValueChange:V,children:[e.jsx(f,{children:e.jsx(p,{placeholder:"All Subjects"})}),e.jsxs(g,{children:[e.jsx(a,{value:"All Subjects",children:"All Subjects"}),M.map(s=>e.jsx(a,{value:s,children:s},s))]})]}),e.jsxs(j,{value:d,onValueChange:I,children:[e.jsx(f,{children:e.jsx(p,{placeholder:"All Boards"})}),e.jsxs(g,{children:[e.jsx(a,{value:"All Boards",children:"All Boards"}),O.map(s=>e.jsx(a,{value:s,children:s},s))]})]}),e.jsxs(j,{value:u,onValueChange:D,children:[e.jsx(f,{children:e.jsx(p,{placeholder:"All Tiers"})}),e.jsxs(g,{children:[e.jsx(a,{value:"All Tiers",children:"All Tiers"}),e.jsx(a,{value:"Foundation",children:"Foundation"}),e.jsx(a,{value:"Higher",children:"Higher"})]})]})]})}),q?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(y,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):S.length===0?e.jsxs(h,{className:"p-12 text-center",children:[e.jsx(T,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:l.length===0?"No Predicted Papers Available Yet":"No Papers Match Your Filters"}),e.jsx("p",{className:"text-muted-foreground",children:l.length===0?"Check back soon for exclusive 2026 predicted papers!":"Try adjusting your search or filter criteria."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:S.map(s=>e.jsxs(h,{className:"hover-lift transition-all cursor-pointer group",onClick:()=>N(s),children:[e.jsxs($,{children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx(o,{variant:"secondary",className:"bg-premium/10 text-premium",children:s.year||2026}),s.file_type==="link"?e.jsx(ae,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(T,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(ee,{className:"text-lg line-clamp-2 group-hover:text-premium transition-colors",children:s.title}),e.jsxs(se,{className:"flex flex-wrap gap-2 mt-2",children:[s.subject&&e.jsx(o,{variant:"outline",children:s.subject}),s.exam_board&&e.jsx(o,{variant:"outline",children:s.exam_board}),s.tier&&e.jsx(o,{variant:"outline",children:s.tier})]})]}),e.jsxs(P,{children:[s.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:s.description}),e.jsxs(C,{variant:"outline",size:"sm",className:"w-full group-hover:bg-premium group-hover:text-premium-foreground",onClick:r=>{r.stopPropagation(),N(s)},children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"View Paper"]})]})]},s.id))}),l.length>0&&e.jsx(h,{className:"mt-8 bg-premium/5 border-premium/20",children:e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(A,{className:"h-5 w-5 text-premium mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground mb-1",children:"Exclusive Premium Content"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"These predicted papers are exclusively available to premium members. They are designed to help you prepare for your 2026 exams with the most up-to-date predictions."})]})]})})})]})})}export{Se as default};
