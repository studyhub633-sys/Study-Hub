import{j as e,aV as F,bb as B,ak as D,aj as V,aw as H,ax as q,a5 as K,ad as G,s as je,m as I,at as Ne,ba as we,S as ye,bc as Q,Q as Se,z as W,aH as Z,aI as J,bd as X,M as ke,a3 as Ae,a6 as Ce}from"./ui-vendor-DvDVRjyp.js";import{A as Y}from"./AnimatedLogoIcon-D6d7HWVb.js";import{c as m,u as ee,l as ae,j as te,B as b}from"./index-DEqmCALs.js";import{r as l,i as _,k,u as re}from"./react-vendor-Do86TxWo.js";import{S as Ee,a as Le,b as Ie,c as _e,d as Pe}from"./sheet-DlQTD0RE.js";var Re=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Me=Re.reduce((a,t)=>{const r=F(`Primitive.${t}`),s=l.forwardRef((n,o)=>{const{asChild:c,...i}=n,u=c?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(u,{...i,ref:o})});return s.displayName=`Primitive.${t}`,{...a,[t]:s}},{}),$e="Separator",U="horizontal",Oe=["horizontal","vertical"],se=l.forwardRef((a,t)=>{const{decorative:r,orientation:s=U,...n}=a,o=Te(s)?s:U,i=r?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return e.jsx(Me.div,{"data-orientation":o,...i,...n,ref:t})});se.displayName=$e;function Te(a){return Oe.includes(a)}var ne=se;const A=l.forwardRef(({className:a,orientation:t="horizontal",decorative:r=!0,...s},n)=>e.jsx(ne,{ref:n,decorative:r,orientation:t,className:m("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",a),...s}));A.displayName=ne.displayName;const Ue=[{icon:B,label:"Home",path:"/"},{icon:D,label:"Notes",path:"/notes"},{icon:V,label:"Cards",path:"/flashcards"},{icon:H,label:"Papers",path:"/past-papers"},{icon:q,label:"Knowledge",path:"/knowledge"},{icon:K,label:"AI Tutor",path:"/ai-tutor"},{icon:G,label:"Extra",path:"/extracurricular"}];function ze(){const a=_();return e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-card/95 backdrop-blur-xl border-t border-border md:hidden safe-area-inset-bottom",children:e.jsx("div",{className:"flex items-center px-4 py-2 overflow-x-auto no-scrollbar justify-between sm:justify-around gap-2",children:Ue.map(t=>{const r=a.pathname===t.path;return e.jsxs(k,{to:t.path,className:m("flex flex-col items-center gap-1 px-2 py-2 rounded-xl transition-all duration-200 min-w-[60px] flex-shrink-0",r?"text-primary":"text-muted-foreground"),children:[e.jsx("div",{className:m("p-2 rounded-xl transition-all duration-200",r&&"bg-primary/10"),children:e.jsx(t.icon,{className:m("h-5 w-5",r&&"animate-bounce-subtle")})}),e.jsx("span",{className:m("text-[10px] font-medium truncate w-full text-center",r&&"font-semibold"),children:t.label})]},t.path)})})})}function Fe(a,t=[]){let r=[];function s(o,c){const i=l.createContext(c);i.displayName=o+"Context";const u=r.length;r=[...r,c];const d=x=>{var S;const{scope:f,children:j,...N}=x,w=((S=f==null?void 0:f[a])==null?void 0:S[u])||i,C=l.useMemo(()=>N,Object.values(N));return e.jsx(w.Provider,{value:C,children:j})};d.displayName=o+"Provider";function g(x,f){var w;const j=((w=f==null?void 0:f[a])==null?void 0:w[u])||i,N=l.useContext(j);if(N)return N;if(c!==void 0)return c;throw new Error(`\`${x}\` must be used within \`${o}\``)}return[d,g]}const n=()=>{const o=r.map(c=>l.createContext(c));return function(i){const u=(i==null?void 0:i[a])||o;return l.useMemo(()=>({[`__scope${a}`]:{...i,[a]:u}}),[i,u])}};return n.scopeName=a,[s,Be(n,...t)]}function Be(...a){const t=a[0];if(a.length===1)return t;const r=()=>{const s=a.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(o){const c=s.reduce((i,{useScope:u,scopeName:d})=>{const x=u(o)[`__scope${d}`];return{...i,...x}},{});return l.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return r.scopeName=t.scopeName,r}var De=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],P=De.reduce((a,t)=>{const r=F(`Primitive.${t}`),s=l.forwardRef((n,o)=>{const{asChild:c,...i}=n,u=c?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(u,{...i,ref:o})});return s.displayName=`Primitive.${t}`,{...a,[t]:s}},{}),oe={exports:{}},ie={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y=l;function Ve(a,t){return a===t&&(a!==0||1/a===1/t)||a!==a&&t!==t}var He=typeof Object.is=="function"?Object.is:Ve,qe=y.useState,Ke=y.useEffect,Ge=y.useLayoutEffect,Qe=y.useDebugValue;function We(a,t){var r=t(),s=qe({inst:{value:r,getSnapshot:t}}),n=s[0].inst,o=s[1];return Ge(function(){n.value=r,n.getSnapshot=t,L(n)&&o({inst:n})},[a,r,t]),Ke(function(){return L(n)&&o({inst:n}),a(function(){L(n)&&o({inst:n})})},[a]),Qe(r),r}function L(a){var t=a.getSnapshot;a=a.value;try{var r=t();return!He(a,r)}catch{return!0}}function Ze(a,t){return t()}var Je=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ze:We;ie.useSyncExternalStore=y.useSyncExternalStore!==void 0?y.useSyncExternalStore:Je;oe.exports=ie;var Xe=oe.exports;function Ye(){return Xe.useSyncExternalStore(ea,()=>!0,()=>!1)}function ea(){return()=>{}}var R="Avatar",[aa]=Fe(R),[ta,le]=aa(R),de=l.forwardRef((a,t)=>{const{__scopeAvatar:r,...s}=a,[n,o]=l.useState("idle");return e.jsx(ta,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:o,children:e.jsx(P.span,{...s,ref:t})})});de.displayName=R;var ce="AvatarImage",ue=l.forwardRef((a,t)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:n=()=>{},...o}=a,c=le(ce,r),i=ra(s,o),u=je(d=>{n(d),c.onImageLoadingStatusChange(d)});return I(()=>{i!=="idle"&&u(i)},[i,u]),i==="loaded"?e.jsx(P.img,{...o,ref:t,src:s}):null});ue.displayName=ce;var me="AvatarFallback",he=l.forwardRef((a,t)=>{const{__scopeAvatar:r,delayMs:s,...n}=a,o=le(me,r),[c,i]=l.useState(s===void 0);return l.useEffect(()=>{if(s!==void 0){const u=window.setTimeout(()=>i(!0),s);return()=>window.clearTimeout(u)}},[s]),c&&o.imageLoadingStatus!=="loaded"?e.jsx(P.span,{...n,ref:t}):null});he.displayName=me;function z(a,t){return a?t?(a.src!==t&&(a.src=t),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function ra(a,{referrerPolicy:t,crossOrigin:r}){const s=Ye(),n=l.useRef(null),o=s?(n.current||(n.current=new window.Image),n.current):null,[c,i]=l.useState(()=>z(o,a));return I(()=>{i(z(o,a))},[o,a]),I(()=>{const u=x=>()=>{i(x)};if(!o)return;const d=u("loaded"),g=u("error");return o.addEventListener("load",d),o.addEventListener("error",g),t&&(o.referrerPolicy=t),typeof r=="string"&&(o.crossOrigin=r),()=>{o.removeEventListener("load",d),o.removeEventListener("error",g)}},[o,r,t]),c}var xe=de,pe=ue,fe=he;const ge=l.forwardRef(({className:a,...t},r)=>e.jsx(xe,{ref:r,className:m("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...t}));ge.displayName=xe.displayName;const ve=l.forwardRef(({className:a,...t},r)=>e.jsx(pe,{ref:r,className:m("aspect-square h-full w-full",a),...t}));ve.displayName=pe.displayName;const be=l.forwardRef(({className:a,...t},r)=>e.jsx(fe,{ref:r,className:m("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...t}));be.displayName=fe.displayName;async function ua(a){try{const{data:{user:t}}=await a.auth.getUser();if(!t)return!1;const{data:r}=await a.from("profiles").select("is_premium").eq("id",t.id).single();return(r==null?void 0:r.is_premium)||!1}catch{return!1}}async function sa(a,t){try{const{data:r}=await a.from("profiles").select("is_admin").eq("id",t).maybeSingle();return(r==null?void 0:r.is_admin)||!1}catch{return!1}}function na(){var S,M;const[a,t]=l.useState(!1),r=_(),{user:s,signOut:n,supabase:o}=ee(),{theme:c,toggleTheme:i}=ae(),u=re(),{t:d}=te(),[g,x]=l.useState(null),[f,j]=l.useState(!1);l.useEffect(()=>{s&&sa(o,s.id).then(j)},[s,o]);const N=[{icon:B,label:d("nav.dashboard"),path:"/"},{icon:D,label:d("nav.notes"),path:"/notes"},{icon:V,label:d("nav.flashcards"),path:"/flashcards"},{icon:H,label:d("nav.pastPapers"),path:"/past-papers"},{icon:q,label:d("nav.knowledge"),path:"/knowledge"},{icon:K,label:d("nav.aiTutor"),path:"/ai-tutor"},{icon:Ne,label:d("nav.library"),path:"/library"},{icon:G,label:d("nav.extracurricular"),path:"/extracurricular"},{icon:we,label:"Cram Mode",path:"/cram-mode",badge:"Coming Soon"},...f?[{icon:ye,label:"Admin",path:"/admin"}]:[]],w=[{icon:Q,label:d("common.settings"),path:"/settings"}];l.useEffect(()=>{if(!s)return;const h=`avatar_url_${s.id}`,v=localStorage.getItem(h);v&&x(v),(async()=>{try{const{data:p}=await o.from("profiles").select("avatar_url").eq("id",s.id).single();p!=null&&p.avatar_url?(x(p.avatar_url),localStorage.setItem(h,p.avatar_url)):v&&x(v)}catch{v&&x(v)}})();const $=p=>{var T;(T=p.detail)!=null&&T.avatarUrl&&(x(p.detail.avatarUrl),localStorage.setItem(h,p.detail.avatarUrl))},O=p=>{p.key===h&&p.newValue&&x(p.newValue)};return window.addEventListener("avatarUpdated",$),window.addEventListener("storage",O),()=>{window.removeEventListener("avatarUpdated",$),window.removeEventListener("storage",O)}},[s,o]);const C=async()=>{try{await n(),u("/landing")}catch{}};return e.jsxs("aside",{className:m("fixed left-0 top-0 z-40 h-screen bg-sidebar border-r border-sidebar-border transition-all duration-300 ease-out flex flex-col",a?"w-20":"w-72"),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-sidebar-border",children:[e.jsxs("div",{className:m("flex items-center gap-3",a&&"justify-center w-full"),children:[e.jsx(Y,{}),!a&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("h1",{className:"font-bold text-lg text-sidebar-foreground",children:"Revisely.ai"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:d("sidebar.learnSmarter")})]})]}),e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>t(!a),className:m("h-8 w-8 text-muted-foreground hover:text-sidebar-foreground",a&&"hidden"),children:e.jsx(Se,{className:"h-4 w-4"})})]}),e.jsxs("nav",{className:"flex-1 p-3 space-y-1 overflow-y-auto",children:[e.jsx("div",{className:m("mb-2 pb-2 border-b border-sidebar-border",a&&"border-none mb-0 pb-0"),children:e.jsxs(k,{to:"/premium-dashboard",className:m("flex items-center gap-3 px-3 py-3 rounded-lg transition-all duration-300 group relative overflow-hidden",r.pathname==="/premium-dashboard"?"bg-premium text-premium-foreground shadow-lg shadow-premium/20":"text-muted-foreground hover:text-premium hover:bg-premium/10 border border-transparent hover:border-premium/20",a&&"justify-center px-2"),children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-premium/0 via-white/5 to-premium/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),e.jsx(W,{className:m("h-5 w-5 flex-shrink-0 z-10",r.pathname==="/premium-dashboard"&&"animate-pulse")}),!a&&e.jsxs("div",{className:"flex items-center justify-between w-full z-10",children:[e.jsx("span",{className:"font-bold text-sm tracking-tight text-sidebar-foreground group-hover:text-premium transition-colors",children:d("sidebar.goPremium")}),e.jsx("span",{className:"premium-badge animate-bounce-subtle",children:"LIFETIME"})]})]})}),N.map((h,v)=>{const E=r.pathname===h.path;return e.jsxs(k,{to:h.path,className:m("flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 group",E?"bg-primary text-primary-foreground shadow-md":"text-muted-foreground hover:text-sidebar-foreground hover:bg-sidebar-accent",a&&"justify-center px-2",`animate-slide-in-left stagger-${v+1}`),style:{opacity:0},children:[e.jsx(h.icon,{className:m("h-5 w-5 flex-shrink-0",E&&"animate-bounce-subtle")}),!a&&e.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-sm",children:h.label}),h.badge&&e.jsx("span",{className:"text-[10px] bg-primary/20 text-primary px-1.5 py-0.5 rounded font-semibold uppercase",children:h.badge})]})]},h.path)})]}),e.jsxs("div",{className:"p-3 border-t border-sidebar-border",children:[w.map(h=>{const v=r.pathname===h.path;return e.jsxs(k,{to:h.path,className:m("flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200",v?"bg-sidebar-accent text-sidebar-foreground":"text-muted-foreground hover:text-sidebar-foreground hover:bg-sidebar-accent",a&&"justify-center px-2"),children:[e.jsx(h.icon,{className:"h-5 w-5 flex-shrink-0"}),!a&&e.jsx("span",{className:"font-medium text-sm",children:h.label})]},h.path)}),e.jsxs("div",{className:m("mt-3 p-3 rounded-xl bg-sidebar-accent flex items-center gap-3",a&&"justify-center p-2"),children:[e.jsxs(ge,{className:"h-9 w-9 border-2 border-primary/20",children:[e.jsx(ve,{src:g||`https://api.dicebear.com/7.x/avataaars/svg?seed=${s==null?void 0:s.email}`}),e.jsx(be,{children:((S=s==null?void 0:s.email)==null?void 0:S.charAt(0).toUpperCase())||"U"})]}),!a&&e.jsxs("div",{className:"flex-1 min-w-0 animate-fade-in",children:[e.jsx("p",{className:"text-sm font-semibold text-sidebar-foreground truncate",children:((M=s==null?void 0:s.email)==null?void 0:M.split("@")[0])||"User"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]}),e.jsxs(b,{variant:"ghost",onClick:i,className:m("mt-2 w-full justify-start text-muted-foreground hover:text-foreground",a&&"justify-center px-2"),children:[c==="light"?e.jsx(Z,{className:"h-5 w-5 flex-shrink-0"}):e.jsx(J,{className:"h-5 w-5 flex-shrink-0"}),!a&&e.jsx("span",{className:"font-medium text-sm ml-3",children:d(c==="light"?"sidebar.darkMode":"sidebar.lightMode")})]}),e.jsxs(b,{variant:"ghost",onClick:C,className:m("mt-2 w-full justify-start text-muted-foreground hover:text-destructive",a&&"justify-center px-2"),children:[e.jsx(X,{className:"h-5 w-5 flex-shrink-0"}),!a&&e.jsx("span",{className:"font-medium text-sm ml-3",children:d("common.logout")})]})]}),a&&e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>t(!1),className:"absolute top-4 -right-4 h-8 w-8 rounded-full bg-card border border-border shadow-md text-muted-foreground hover:text-foreground",children:e.jsx(ke,{className:"h-4 w-4"})})]})}function ma({children:a,fullWidth:t=!1}){const{signOut:r,user:s}=ee(),{t:n}=te(),{theme:o,toggleTheme:c}=ae(),i=re(),u=_(),[d,g]=l.useState(!1),x=async()=>{try{await r(),g(!1),i("/landing")}catch{}},f=j=>{g(!1),i(j)};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(na,{})}),e.jsxs("main",{className:"md:ml-72 min-h-screen transition-all duration-300 flex flex-col",children:[e.jsx("header",{className:"sticky top-0 z-30 bg-background/80 backdrop-blur-xl border-b border-border md:hidden",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 flex items-center justify-center overflow-hidden",children:e.jsx("div",{className:"transform scale-[0.65]",children:e.jsx(Y,{})})}),e.jsx("h1",{className:"font-bold text-lg",children:"Revisely.ai"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(Ee,{open:d,onOpenChange:g,children:[e.jsx(Le,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",children:e.jsx(Ae,{className:"h-6 w-6"})})}),e.jsxs(Ie,{side:"right",children:[e.jsx(_e,{className:"text-left pb-4",children:e.jsx(Pe,{children:"Menu"})}),e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsxs(b,{className:m("w-full justify-between gap-3 h-12 relative overflow-hidden group mb-4",u.pathname==="/premium-dashboard"?"bg-premium text-premium-foreground hover:bg-premium/90 shadow-lg shadow-premium/20":"bg-premium/5 text-foreground hover:bg-premium/10 border border-premium/20"),onClick:()=>f("/premium-dashboard"),children:[e.jsxs("div",{className:"flex items-center gap-3 z-10",children:[e.jsx(W,{className:m("h-5 w-5 text-premium",u.pathname==="/premium-dashboard"&&"text-premium-foreground")}),e.jsx("span",{className:"font-bold tracking-tight",children:n("sidebar.goPremium")})]}),e.jsx("div",{className:"flex items-center gap-2 z-10",children:e.jsx("span",{className:"text-[10px] bg-background/20 backdrop-blur-sm px-2 py-0.5 rounded-full font-bold uppercase tracking-wider",children:n("sidebar.upgradePlan")})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"})]}),e.jsx(A,{className:"my-2"}),e.jsxs(b,{variant:"ghost",className:"w-full justify-start gap-3 h-12",onClick:()=>f("/settings"),children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:e.jsx(Ce,{className:"h-5 w-5 text-blue-500"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:n("sidebar.account")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:(s==null?void 0:s.email)||n("sidebar.manageProfile")})]})]}),e.jsxs(b,{variant:"ghost",className:"w-full justify-start gap-3 h-12",onClick:()=>f("/settings"),children:[e.jsx("div",{className:"p-2 rounded-lg bg-gray-500/10",children:e.jsx(Q,{className:"h-5 w-5 text-gray-500"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:n("common.settings")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:n("sidebar.appPreferences")})]})]}),e.jsx(A,{className:"my-2"}),e.jsxs(b,{variant:"ghost",className:"w-full justify-start gap-3 h-12",onClick:c,children:[e.jsx("div",{className:m("p-2 rounded-lg",o==="dark"?"bg-yellow-500/10":"bg-indigo-500/10"),children:o==="dark"?e.jsx(J,{className:"h-5 w-5 text-yellow-500"}):e.jsx(Z,{className:"h-5 w-5 text-indigo-500"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:n(o==="dark"?"sidebar.lightMode":"sidebar.darkMode")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:n(o==="dark"?"sidebar.switchToLight":"sidebar.switchToDark")})]})]}),e.jsx(A,{className:"my-2"}),e.jsxs(b,{variant:"ghost",className:"w-full justify-start gap-3 h-12 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:x,children:[e.jsx("div",{className:"p-2 rounded-lg bg-destructive/10",children:e.jsx(X,{className:"h-5 w-5"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:n("common.logout")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:n("common.logout")})]})]})]})]})]})})]})}),e.jsx("div",{className:m("flex-1",t?"p-0":"p-4 md:p-8 pb-24 md:pb-8"),children:a})]}),e.jsx(ze,{})]})}export{ma as A,ge as a,ve as b,be as c,ua as h,sa as i,Xe as s};
