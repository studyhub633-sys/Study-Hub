import{c as d}from"./supabase-vendor-BFJX04bJ.js";const u="";async function l(t){try{let e=t;if(!e)return null;const{data:{session:a}}=await e.auth.getSession();return(a==null?void 0:a.access_token)||null}catch{return null}}async function r(t,e={},a){try{const n=await l(a);if(!n)return{error:"Not authenticated. Please sign in to use AI features."};const i=`${u}${t}`,s=await fetch(i,{...e,headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`,...e.headers}});let o;const c=s.headers.get("content-type");if(c&&c.includes("application/json"))o=await s.json();else return{error:`Server returned non-JSON response: ${(await s.text()).substring(0,200)}`};return s.ok?{data:o}:{error:o.error||`Request failed with status ${s.status}`,message:o.message}}catch(n){return n instanceof TypeError&&n.message.includes("fetch")?{error:`Failed to connect to API server. Please check:
- Is the server running? (Expected: ${u})
- Is VITE_API_URL set correctly in your .env file?
- Check your network connection and CORS settings.`}:{error:n instanceof Error?n.message:"Network error occurred"}}}async function g(t,e){return r("/api/ai/generate-question",{method:"POST",body:JSON.stringify(t)},e)}async function p(t,e){return r("/api/ai/generate-simple-question",{method:"POST",body:JSON.stringify(t)},e)}async function h(t,e){return r("/api/ai/evaluate-answer",{method:"POST",body:JSON.stringify(t)},e)}async function S(t,e){return r("/api/ai/generate-flashcards",{method:"POST",body:JSON.stringify(t)},e)}async function b(t,e){return r("/api/ai/generate-knowledge-organizer",{method:"POST",body:JSON.stringify(t)},e)}const O=async(t,e)=>r("/api/ai/chat",{method:"POST",body:JSON.stringify(t)},e);export{g as a,S as b,O as c,b as d,h as e,p as g};
