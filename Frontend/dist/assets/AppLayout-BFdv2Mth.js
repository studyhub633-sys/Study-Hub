import{j as e,aE as M,b7 as $,a6 as T,ad as z,ac as U,H as F,V as D,g as xe,i as E,w as pe,aa as he,C as G,b8 as V,am as B,an as H,b9 as K,s as fe,ao as ge,J as ve,G as be}from"./ui-vendor-C99L-hD9.js";import{A as q,B as b}from"./button-CTbG2CuD.js";import{r as d,i as C,k as S,u as J}from"./react-vendor-CW_qxVlV.js";import{c as m,u as W,d as Q}from"./index-Bze4zWta.js";import{S as je,a as Ne,b as we,c as ye,d as Se}from"./sheet-HbvxctKK.js";var ke=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ae=ke.reduce((t,a)=>{const r=M(`Primitive.${a}`),s=d.forwardRef((o,n)=>{const{asChild:l,...i}=o,c=l?r:a;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...i,ref:n})});return s.displayName=`Primitive.${a}`,{...t,[a]:s}},{}),Ee="Separator",O="horizontal",Ce=["horizontal","vertical"],X=d.forwardRef((t,a)=>{const{decorative:r,orientation:s=O,...o}=t,n=Le(s)?s:O,i=r?{role:"none"}:{"aria-orientation":n==="vertical"?n:void 0,role:"separator"};return e.jsx(Ae.div,{"data-orientation":n,...i,...o,ref:a})});X.displayName=Ee;function Le(t){return Ce.includes(t)}var Y=X;const k=d.forwardRef(({className:t,orientation:a="horizontal",decorative:r=!0,...s},o)=>e.jsx(Y,{ref:o,decorative:r,orientation:a,className:m("shrink-0 bg-border",a==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...s}));k.displayName=Y.displayName;const Ie=[{icon:$,label:"Home",path:"/"},{icon:T,label:"Notes",path:"/notes"},{icon:z,label:"Cards",path:"/flashcards"},{icon:U,label:"Papers",path:"/past-papers"},{icon:F,label:"Knowledge",path:"/knowledge"},{icon:D,label:"Extra",path:"/extracurricular"}];function Pe(){const t=C();return e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-card/95 backdrop-blur-xl border-t border-border md:hidden safe-area-inset-bottom",children:e.jsx("div",{className:"flex items-center px-4 py-2 overflow-x-auto no-scrollbar justify-between sm:justify-around gap-2",children:Ie.map(a=>{const r=t.pathname===a.path;return e.jsxs(S,{to:a.path,className:m("flex flex-col items-center gap-1 px-2 py-2 rounded-xl transition-all duration-200 min-w-[60px] flex-shrink-0",r?"text-primary":"text-muted-foreground"),children:[e.jsx("div",{className:m("p-2 rounded-xl transition-all duration-200",r&&"bg-primary/10"),children:e.jsx(a.icon,{className:m("h-5 w-5",r&&"animate-bounce-subtle")})}),e.jsx("span",{className:m("text-[10px] font-medium truncate w-full text-center",r&&"font-semibold"),children:a.label})]},a.path)})})})}function _e(t,a=[]){let r=[];function s(n,l){const i=d.createContext(l);i.displayName=n+"Context";const c=r.length;r=[...r,l];const h=g=>{var y;const{scope:v,children:j,...u}=g,p=((y=v==null?void 0:v[t])==null?void 0:y[c])||i,w=d.useMemo(()=>u,Object.values(u));return e.jsx(p.Provider,{value:w,children:j})};h.displayName=n+"Provider";function x(g,v){var p;const j=((p=v==null?void 0:v[t])==null?void 0:p[c])||i,u=d.useContext(j);if(u)return u;if(l!==void 0)return l;throw new Error(`\`${g}\` must be used within \`${n}\``)}return[h,x]}const o=()=>{const n=r.map(l=>d.createContext(l));return function(i){const c=(i==null?void 0:i[t])||n;return d.useMemo(()=>({[`__scope${t}`]:{...i,[t]:c}}),[i,c])}};return o.scopeName=t,[s,Oe(o,...a)]}function Oe(...t){const a=t[0];if(t.length===1)return a;const r=()=>{const s=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(n){const l=s.reduce((i,{useScope:c,scopeName:h})=>{const g=c(n)[`__scope${h}`];return{...i,...g}},{});return d.useMemo(()=>({[`__scope${a.scopeName}`]:l}),[l])}};return r.scopeName=a.scopeName,r}var Re=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],L=Re.reduce((t,a)=>{const r=M(`Primitive.${a}`),s=d.forwardRef((o,n)=>{const{asChild:l,...i}=o,c=l?r:a;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...i,ref:n})});return s.displayName=`Primitive.${a}`,{...t,[a]:s}},{}),Z={exports:{}},ee={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N=d;function Me(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var $e=typeof Object.is=="function"?Object.is:Me,Te=N.useState,ze=N.useEffect,Ue=N.useLayoutEffect,Fe=N.useDebugValue;function De(t,a){var r=a(),s=Te({inst:{value:r,getSnapshot:a}}),o=s[0].inst,n=s[1];return Ue(function(){o.value=r,o.getSnapshot=a,A(o)&&n({inst:o})},[t,r,a]),ze(function(){return A(o)&&n({inst:o}),t(function(){A(o)&&n({inst:o})})},[t]),Fe(r),r}function A(t){var a=t.getSnapshot;t=t.value;try{var r=a();return!$e(t,r)}catch{return!0}}function Ge(t,a){return a()}var Ve=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ge:De;ee.useSyncExternalStore=N.useSyncExternalStore!==void 0?N.useSyncExternalStore:Ve;Z.exports=ee;var Be=Z.exports;function He(){return Be.useSyncExternalStore(Ke,()=>!0,()=>!1)}function Ke(){return()=>{}}var I="Avatar",[qe]=_e(I),[Je,te]=qe(I),ae=d.forwardRef((t,a)=>{const{__scopeAvatar:r,...s}=t,[o,n]=d.useState("idle");return e.jsx(Je,{scope:r,imageLoadingStatus:o,onImageLoadingStatusChange:n,children:e.jsx(L.span,{...s,ref:a})})});ae.displayName=I;var re="AvatarImage",se=d.forwardRef((t,a)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:o=()=>{},...n}=t,l=te(re,r),i=We(s,n),c=xe(h=>{o(h),l.onImageLoadingStatusChange(h)});return E(()=>{i!=="idle"&&c(i)},[i,c]),i==="loaded"?e.jsx(L.img,{...n,ref:a,src:s}):null});se.displayName=re;var ne="AvatarFallback",oe=d.forwardRef((t,a)=>{const{__scopeAvatar:r,delayMs:s,...o}=t,n=te(ne,r),[l,i]=d.useState(s===void 0);return d.useEffect(()=>{if(s!==void 0){const c=window.setTimeout(()=>i(!0),s);return()=>window.clearTimeout(c)}},[s]),l&&n.imageLoadingStatus!=="loaded"?e.jsx(L.span,{...o,ref:a}):null});oe.displayName=ne;function R(t,a){return t?a?(t.src!==a&&(t.src=a),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function We(t,{referrerPolicy:a,crossOrigin:r}){const s=He(),o=d.useRef(null),n=s?(o.current||(o.current=new window.Image),o.current):null,[l,i]=d.useState(()=>R(n,t));return E(()=>{i(R(n,t))},[n,t]),E(()=>{const c=g=>()=>{i(g)};if(!n)return;const h=c("loaded"),x=c("error");return n.addEventListener("load",h),n.addEventListener("error",x),a&&(n.referrerPolicy=a),typeof r=="string"&&(n.crossOrigin=r),()=>{n.removeEventListener("load",h),n.removeEventListener("error",x)}},[n,r,a]),l}var ie=ae,le=se,de=oe;const ce=d.forwardRef(({className:t,...a},r)=>e.jsx(ie,{ref:r,className:m("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...a}));ce.displayName=ie.displayName;const ue=d.forwardRef(({className:t,...a},r)=>e.jsx(le,{ref:r,className:m("aspect-square h-full w-full",t),...a}));ue.displayName=le.displayName;const me=d.forwardRef(({className:t,...a},r)=>e.jsx(de,{ref:r,className:m("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...a}));me.displayName=de.displayName;const Qe=[{icon:$,label:"Dashboard",path:"/"},{icon:T,label:"Exam Notes",path:"/notes"},{icon:z,label:"Flashcards",path:"/flashcards"},{icon:U,label:"Past Papers",path:"/past-papers"},{icon:F,label:"Knowledge Organisers",path:"/knowledge"},{icon:he,label:"Global Library",path:"/library"},{icon:D,label:"Extracurriculars",path:"/extracurricular"}],Xe=[{icon:V,label:"Settings",path:"/settings"}];function Ye(){var v,j;const[t,a]=d.useState(!1),r=C(),{user:s,signOut:o,supabase:n}=W(),{theme:l,toggleTheme:i}=Q(),c=J(),[h,x]=d.useState(null);d.useEffect(()=>{if(!s)return;const u=`avatar_url_${s.id}`,p=localStorage.getItem(u);p&&x(p),(async()=>{try{const{data:f}=await n.from("profiles").select("avatar_url").eq("id",s.id).single();f!=null&&f.avatar_url?(x(f.avatar_url),localStorage.setItem(u,f.avatar_url)):p&&x(p)}catch{p&&x(p)}})();const y=f=>{var _;(_=f.detail)!=null&&_.avatarUrl&&(x(f.detail.avatarUrl),localStorage.setItem(u,f.detail.avatarUrl))},P=f=>{f.key===u&&f.newValue&&x(f.newValue)};return window.addEventListener("avatarUpdated",y),window.addEventListener("storage",P),()=>{window.removeEventListener("avatarUpdated",y),window.removeEventListener("storage",P)}},[s,n]);const g=async()=>{try{await o(),c("/landing")}catch{}};return e.jsxs("aside",{className:m("fixed left-0 top-0 z-40 h-screen bg-sidebar border-r border-sidebar-border transition-all duration-300 ease-out flex flex-col",t?"w-20":"w-72"),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-sidebar-border",children:[e.jsxs("div",{className:m("flex items-center gap-3",t&&"justify-center w-full"),children:[e.jsx(q,{}),!t&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("h1",{className:"font-bold text-lg text-sidebar-foreground",children:"Scientia.ai"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Learn smarter"})]})]}),e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>a(!t),className:m("h-8 w-8 text-muted-foreground hover:text-sidebar-foreground",t&&"hidden"),children:e.jsx(pe,{className:"h-4 w-4"})})]}),e.jsxs("nav",{className:"flex-1 p-3 space-y-1 overflow-y-auto",children:[Qe.map((u,p)=>{const w=r.pathname===u.path;return e.jsxs(S,{to:u.path,className:m("flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 group",w?"bg-primary text-primary-foreground shadow-md":"text-muted-foreground hover:text-sidebar-foreground hover:bg-sidebar-accent",t&&"justify-center px-2",`animate-slide-in-left stagger-${p+1}`),style:{opacity:0},children:[e.jsx(u.icon,{className:m("h-5 w-5 flex-shrink-0",w&&"animate-bounce-subtle")}),!t&&e.jsx("span",{className:"font-medium text-sm",children:u.label})]},u.path)}),e.jsxs("div",{className:m("mt-6 pt-4 border-t border-sidebar-border",t&&"border-none mt-4 pt-2"),children:[!t&&e.jsx("p",{className:"px-3 mb-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider animate-fade-in",children:"Premium"}),e.jsxs(S,{to:"/premium-dashboard",className:m("flex items-center gap-3 px-3 py-3 rounded-lg transition-all duration-300 group relative overflow-hidden",r.pathname==="/premium-dashboard"?"bg-premium text-premium-foreground shadow-lg shadow-premium/20":"text-muted-foreground hover:text-premium hover:bg-premium/10 border border-transparent hover:border-premium/20",t&&"justify-center px-2"),children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-premium/0 via-white/5 to-premium/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),e.jsx(G,{className:m("h-5 w-5 flex-shrink-0 z-10",r.pathname==="/premium-dashboard"&&"animate-pulse")}),!t&&e.jsxs("div",{className:"flex items-center justify-between w-full z-10",children:[e.jsx("span",{className:"font-bold text-sm tracking-tight text-sidebar-foreground group-hover:text-premium transition-colors",children:"Go Premium"}),e.jsx("span",{className:"premium-badge animate-bounce-subtle",children:"LIFETIME"})]})]})]})]}),e.jsxs("div",{className:"p-3 border-t border-sidebar-border",children:[Xe.map(u=>{const p=r.pathname===u.path;return e.jsxs(S,{to:u.path,className:m("flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200",p?"bg-sidebar-accent text-sidebar-foreground":"text-muted-foreground hover:text-sidebar-foreground hover:bg-sidebar-accent",t&&"justify-center px-2"),children:[e.jsx(u.icon,{className:"h-5 w-5 flex-shrink-0"}),!t&&e.jsx("span",{className:"font-medium text-sm",children:u.label})]},u.path)}),e.jsxs("div",{className:m("mt-3 p-3 rounded-xl bg-sidebar-accent flex items-center gap-3",t&&"justify-center p-2"),children:[e.jsxs(ce,{className:"h-9 w-9 border-2 border-primary/20",children:[e.jsx(ue,{src:h||`https://api.dicebear.com/7.x/avataaars/svg?seed=${s==null?void 0:s.email}`}),e.jsx(me,{children:((v=s==null?void 0:s.email)==null?void 0:v.charAt(0).toUpperCase())||"U"})]}),!t&&e.jsxs("div",{className:"flex-1 min-w-0 animate-fade-in",children:[e.jsx("p",{className:"text-sm font-semibold text-sidebar-foreground truncate",children:((j=s==null?void 0:s.email)==null?void 0:j.split("@")[0])||"User"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]}),e.jsxs(b,{variant:"ghost",onClick:i,className:m("mt-2 w-full justify-start text-muted-foreground hover:text-foreground",t&&"justify-center px-2"),children:[l==="light"?e.jsx(B,{className:"h-5 w-5 flex-shrink-0"}):e.jsx(H,{className:"h-5 w-5 flex-shrink-0"}),!t&&e.jsx("span",{className:"font-medium text-sm ml-3",children:l==="light"?"Dark Mode":"Light Mode"})]}),e.jsxs(b,{variant:"ghost",onClick:g,className:m("mt-2 w-full justify-start text-muted-foreground hover:text-destructive",t&&"justify-center px-2"),children:[e.jsx(K,{className:"h-5 w-5 flex-shrink-0"}),!t&&e.jsx("span",{className:"font-medium text-sm ml-3",children:"Sign Out"})]})]}),t&&e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>a(!1),className:"absolute top-4 -right-4 h-8 w-8 rounded-full bg-card border border-border shadow-md text-muted-foreground hover:text-foreground",children:e.jsx(fe,{className:"h-4 w-4"})})]})}function st({children:t}){const{signOut:a,user:r}=W(),{theme:s,toggleTheme:o}=Q(),n=J(),l=C(),[i,c]=d.useState(!1),h=async()=>{try{await a(),c(!1),n("/landing")}catch{}},x=g=>{c(!1),n(g)};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(Ye,{})}),e.jsxs("main",{className:"md:ml-72 min-h-screen transition-all duration-300",children:[e.jsx("header",{className:"sticky top-0 z-30 bg-background/80 backdrop-blur-xl border-b border-border md:hidden",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 flex items-center justify-center overflow-hidden",children:e.jsx("div",{className:"transform scale-[0.65]",children:e.jsx(q,{})})}),e.jsx("h1",{className:"font-bold text-lg",children:"Scientia.ai"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(je,{open:i,onOpenChange:c,children:[e.jsx(Ne,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",children:e.jsx(ge,{className:"h-6 w-6"})})}),e.jsxs(we,{side:"right",children:[e.jsx(ye,{className:"text-left pb-4",children:e.jsx(Se,{children:"Menu"})}),e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsxs(b,{className:m("w-full justify-between gap-3 h-12 relative overflow-hidden group mb-4",l.pathname==="/premium-dashboard"?"bg-premium text-premium-foreground hover:bg-premium/90 shadow-lg shadow-premium/20":"bg-premium/5 text-foreground hover:bg-premium/10 border border-premium/20"),onClick:()=>x("/premium-dashboard"),children:[e.jsxs("div",{className:"flex items-center gap-3 z-10",children:[e.jsx(G,{className:m("h-5 w-5 text-premium",l.pathname==="/premium-dashboard"&&"text-premium-foreground")}),e.jsx("span",{className:"font-bold tracking-tight",children:"Go Premium"})]}),e.jsx("div",{className:"flex items-center gap-2 z-10",children:e.jsx("span",{className:"text-[10px] bg-background/20 backdrop-blur-sm px-2 py-0.5 rounded-full font-bold uppercase tracking-wider",children:"LIFETIME"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"})]}),e.jsx(k,{className:"my-2"}),e.jsxs(b,{variant:"ghost",className:"w-full justify-start gap-3 h-12",onClick:()=>x("/settings"),children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:e.jsx(ve,{className:"h-5 w-5 text-blue-500"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:"Account"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:(r==null?void 0:r.email)||"Manage your profile"})]})]}),e.jsxs(b,{variant:"ghost",className:"w-full justify-start gap-3 h-12",onClick:()=>x("/settings"),children:[e.jsx("div",{className:"p-2 rounded-lg bg-gray-500/10",children:e.jsx(V,{className:"h-5 w-5 text-gray-500"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:"Settings"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"App preferences"})]})]}),e.jsx(k,{className:"my-2"}),e.jsxs(b,{variant:"ghost",className:"w-full justify-start gap-3 h-12",onClick:o,children:[e.jsx("div",{className:m("p-2 rounded-lg",s==="dark"?"bg-yellow-500/10":"bg-indigo-500/10"),children:s==="dark"?e.jsx(H,{className:"h-5 w-5 text-yellow-500"}):e.jsx(B,{className:"h-5 w-5 text-indigo-500"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:s==="dark"?"Light Mode":"Dark Mode"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Switch to ",s==="dark"?"light":"dark"," theme"]})]})]}),e.jsx(k,{className:"my-2"}),e.jsxs(b,{variant:"ghost",className:"w-full justify-start gap-3 h-12 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:h,children:[e.jsx("div",{className:"p-2 rounded-lg bg-destructive/10",children:e.jsx(K,{className:"h-5 w-5"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:"Sign Out"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Log out of your account"})]})]})]})]})]})})]})}),e.jsx("div",{className:"p-4 md:p-8 pb-24 md:pb-8",children:t})]}),e.jsx(Pe,{}),e.jsx("div",{className:"fixed bottom-20 right-4 md:bottom-8 md:right-8 z-50 pointer-events-none select-none animate-fade-in",children:e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-full bg-premium/10 backdrop-blur-md border border-premium/20 shadow-lg shadow-premium/10 group",children:[e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"h-4 w-4 text-premium animate-pulse-subtle"}),e.jsx("div",{className:"absolute inset-0 bg-premium/20 blur-md rounded-full animate-pulse-glow"})]}),e.jsx("span",{className:"text-sm font-bold bg-gradient-to-r from-premium to-purple-400 bg-clip-text text-transparent italic tracking-tight whitespace-nowrap",children:"Generate with AI"})]})})]})}export{st as A,ce as a,ue as b,me as c};
