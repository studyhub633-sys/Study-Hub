import{j as e,aa as pe,ak as Y,aj as G,aw as J,ad as K,aA as xe,aB as ge,a4 as E,N as fe,L as Q,ab as V,aC as be,M as je,ax as X,aD as ve}from"./ui-vendor-BhfTkEdL.js";import{c as N,u as C,j as A,B as F,a as R}from"./index-BWIqSF27.js";import{L as U,r as l,u as ye}from"./react-vendor-Do86TxWo.js";import{D as Ne,a as we,b as _e,c as ke,d as De,f as Se}from"./dialog-ByV6oEXD.js";import{I}from"./input-BIlMOJxd.js";import{L as B}from"./label-aiGua7-D.js";import{S as Ce,a as Ae,b as qe,c as Pe,d as W}from"./select-nauIKzyc.js";import{h as $e,A as Le}from"./AppLayout-DyYlXr0M.js";import"./supabase-vendor-CklQTOeK.js";import"./query-vendor-C5_dwEAA.js";import"./index-BdQq_4o_.js";import"./index-CTYjvzHW.js";import"./AnimatedLogoIcon-BNgjqHPG.js";import"./sheet-ByTzbT0g.js";const Te={primary:{iconBg:"bg-primary/10",iconColor:"text-primary",hoverBorder:"hover:border-primary/30"},secondary:{iconBg:"bg-secondary/10",iconColor:"text-secondary",hoverBorder:"hover:border-secondary/30"},accent:{iconBg:"bg-accent/20",iconColor:"text-accent-foreground",hoverBorder:"hover:border-accent/30"},premium:{iconBg:"bg-premium/10",iconColor:"text-premium",hoverBorder:"hover:border-premium/30"}};function Be({icon:a,title:s,description:d,count:c=0,countLabel:p,path:x,color:t,isPremium:h=!1,progress:o}){const n=Te[t],r=x.startsWith("http"),m=e.jsxs("div",{className:N("module-card relative overflow-hidden transition-all duration-300",n.hoverBorder,"hover:shadow-lg"),children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:N("p-3 rounded-xl transition-transform duration-300 group-hover:scale-110",n.iconBg),children:e.jsx(a,{className:N("h-6 w-6",n.iconColor)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-foreground group-hover:text-primary transition-colors truncate",children:s}),h&&e.jsx("span",{className:"premium-badge shrink-0",children:"PRO"})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:d})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-border/50 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl font-bold text-foreground",children:c}),e.jsx("span",{className:"text-sm text-muted-foreground ml-2",children:p})]}),o!==void 0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-16 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:N("h-full rounded-full transition-all duration-500",`bg-${t}`),style:{width:`${o}%`,backgroundColor:t==="primary"?"hsl(var(--primary))":t==="secondary"?"hsl(var(--secondary))":t==="accent"?"hsl(var(--accent))":"hsl(var(--premium))"}})}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[o,"%"]})]})]})]});return r?e.jsx("a",{href:x,className:"block group",children:m}):e.jsx(U,{to:x,className:"block group",children:m})}function Ee(){const{supabase:a,user:s}=C(),[d,c]=l.useState([]),[p,x]=l.useState(!0),{t}=A(),h=o=>{const r=Math.floor((new Date().getTime()-o.getTime())/1e3);return r<60?t("dashboard.activity.justNow"):r<3600?t("dashboard.activity.minutesAgo",{count:Math.floor(r/60)}):r<86400?t("dashboard.activity.hoursAgo",{count:Math.floor(r/3600)}):r<604800?t("dashboard.activity.daysAgo",{count:Math.floor(r/86400)}):o.toLocaleDateString()};return l.useEffect(()=>{if(!s)return;(async()=>{try{const n=[],{data:r}=await a.from("notes").select("id, title, updated_at, subject").eq("user_id",s.id).order("updated_at",{ascending:!1}).limit(5);r&&r.forEach(i=>{n.push({icon:Y,title:i.subject?`${i.subject}: ${i.title}`:i.title,time:h(new Date(i.updated_at)),date:new Date(i.updated_at),type:"note",color:"text-accent-foreground",bgColor:"bg-accent/20"})});const{data:m}=await a.from("flashcards").select("id, front, updated_at, subject").eq("user_id",s.id).order("updated_at",{ascending:!1}).limit(5);m&&m.forEach(i=>{n.push({icon:G,title:i.subject?`${i.subject} ${t("dashboard.activity.flashcardPrefix")}${i.front.substring(0,30)}${i.front.length>30?"...":""}`:`${t("dashboard.activity.flashcardPrefix")}${i.front.substring(0,30)}${i.front.length>30?"...":""}`,time:h(new Date(i.updated_at)),date:new Date(i.updated_at),type:"flashcard",color:"text-primary",bgColor:"bg-primary/10"})});const{data:b}=await a.from("past_papers").select("id, title, updated_at, subject").eq("user_id",s.id).order("updated_at",{ascending:!1}).limit(5);b&&b.forEach(i=>{n.push({icon:J,title:i.subject?`${i.subject} ${t("dashboard.activity.pastPaperPrefix")}${i.title}`:i.title,time:h(new Date(i.updated_at)),date:new Date(i.updated_at),type:"paper",color:"text-secondary",bgColor:"bg-secondary/10"})});const{data:j}=await a.from("extracurriculars").select("id, name, updated_at").eq("user_id",s.id).order("updated_at",{ascending:!1}).limit(5);j&&j.forEach(i=>{n.push({icon:K,title:`${t("dashboard.activity.loggedPrefix")}${i.name}`,time:h(new Date(i.updated_at)),date:new Date(i.updated_at),type:"extracurricular",color:"text-premium",bgColor:"bg-premium/10"})}),n.sort((i,y)=>y.date.getTime()-i.date.getTime());const w=n.slice(0,4).map(({date:i,...y})=>y);c(w)}catch{}finally{x(!1)}})()},[s,a,t]),e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:t("dashboard.activity.title")}),e.jsx("button",{onClick:()=>{const{toast:o}=require("@/hooks/use-toast");o({title:t("dashboard.activity.comingSoonTitle"),description:t("dashboard.activity.comingSoonDesc")})},className:"text-sm text-primary hover:underline hover:opacity-80 transition-opacity",children:t("dashboard.activity.viewAll")})]}),e.jsx("div",{className:"space-y-4",children:p?e.jsx("p",{className:"text-sm text-muted-foreground",children:t("dashboard.activity.loading")}):d.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:t("dashboard.activity.noActivity")}):d.map((o,n)=>e.jsxs("div",{className:"flex items-start gap-3 animate-slide-up",style:{animationDelay:`${n*.1}s`,opacity:0},children:[e.jsx("div",{className:N("p-2 rounded-lg flex-shrink-0",o.bgColor),children:e.jsx(o.icon,{className:N("h-4 w-4",o.color)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:o.title}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[e.jsx(pe,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:o.time})]})]})]},n))})]})}function Fe(){const{supabase:a,user:s}=C(),[d,c]=l.useState([]),[p,x]=l.useState(!0),{t}=A();return l.useEffect(()=>{if(!s)return;(async()=>{try{const o=[],{count:n}=await a.from("notes").select("*",{count:"exact",head:!0}).eq("user_id",s.id),{count:r}=await a.from("flashcards").select("*",{count:"exact",head:!0}).eq("user_id",s.id),{count:m}=await a.from("past_papers").select("*",{count:"exact",head:!0}).eq("user_id",s.id);n===0?o.push({title:t("dashboard.suggestions.createFirstNote"),description:t("dashboard.suggestions.organisingStudies"),action:t("dashboard.suggestions.getStarted"),path:"/notes"}):n&&n>0&&o.push({title:t("dashboard.suggestions.continueNotes"),description:t("dashboard.suggestions.haveNotes",{count:n,plural:n>1?"s":""}),action:t("dashboard.suggestions.viewNotes"),path:"/notes"}),r===0?o.push({title:t("dashboard.suggestions.createFlashcards"),description:t("dashboard.suggestions.improveRetention"),action:t("dashboard.suggestions.createCards"),path:"/flashcards"}):r&&r>0&&o.push({title:t("dashboard.suggestions.reviewFlashcards"),description:t("dashboard.suggestions.haveFlashcards",{count:r,plural:r>1?"s":""}),action:t("dashboard.suggestions.practiceNow"),path:"/flashcards"}),m===0?o.push({title:t("dashboard.suggestions.tryPastPaper"),description:t("dashboard.suggestions.practiceExams"),action:t("dashboard.suggestions.addPapers"),path:"/past-papers"}):m&&m>0&&o.push({title:t("dashboard.suggestions.completePastPaper"),description:t("dashboard.suggestions.havePapers",{count:m,plural:m>1?"s":""}),action:t("dashboard.suggestions.startQuiz"),path:"/past-papers"}),c(o.slice(0,3))}catch{}finally{x(!1)}})()},[s,a]),e.jsxs("div",{className:"glass-card p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-accent/20 to-transparent rounded-full blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-accent/20",children:e.jsx(xe,{className:"h-5 w-5 text-accent-foreground"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:t("dashboard.suggestions.title")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t("dashboard.suggestions.basedOnActivity")})]})]}),e.jsx("div",{className:"space-y-3",children:p?e.jsx("p",{className:"text-sm text-muted-foreground",children:t("dashboard.suggestions.loading")}):d.length===0?e.jsx("p",{className:"text-sm text-muted-foreground py-4",children:t("dashboard.suggestions.noSuggestions")}):d.map((h,o)=>e.jsx(U,{to:h.path,className:"block p-4 rounded-xl bg-muted/50 hover:bg-muted transition-all duration-200 cursor-pointer group animate-slide-up",style:{animationDelay:`${o*.1}s`,opacity:0},children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-foreground mb-1",children:h.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:h.description})]}),e.jsxs(F,{size:"sm",variant:"ghost",className:"flex-shrink-0 text-primary group-hover:bg-primary group-hover:text-primary-foreground transition-colors",children:[h.action,e.jsx(ge,{className:"h-4 w-4 ml-1"})]})]})},o))}),e.jsx("div",{className:"mt-4 p-4 rounded-xl border border-premium/30 bg-premium/5",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"p-2 rounded-lg flex-shrink-0",style:{background:"var(--gradient-premium)"},children:e.jsx(E,{className:"h-5 w-5 text-premium-foreground"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:t("dashboard.suggestions.unlockAI")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t("dashboard.suggestions.getPersonalized")})]})]}),e.jsx(U,{to:"/premium-dashboard",children:e.jsx(F,{size:"sm",className:"w-full sm:w-auto bg-premium hover:bg-premium/90 text-premium-foreground shrink-0",children:t("dashboard.suggestions.upgrade")})})]})})]})]})}const ze={high:"bg-destructive/10 text-destructive border-destructive/20",medium:"bg-accent/20 text-accent-foreground border-accent/30",low:"bg-secondary/10 text-secondary border-secondary/20"};function Me(){const{supabase:a,user:s}=C(),{t:d}=A(),[c,p]=l.useState([]),[x,t]=l.useState(!0),[h,o]=l.useState(!1),[n,r]=l.useState(!1),[m,b]=l.useState(""),[j,w]=l.useState(""),[i,y]=l.useState("medium"),[_,q]=l.useState(""),P=async()=>{if(s)try{const{data:u,error:f}=await a.from("tasks").select("*").eq("user_id",s.id).eq("completed",!1).order("due_date",{ascending:!0}).limit(5);if(f)throw f;p(u||[])}catch{}finally{t(!1)}};l.useEffect(()=>{P()},[s,a]);const z=async u=>{if(u.preventDefault(),!!s){if(!m){R.error(d("dashboard.tasks.errorTitle"));return}o(!0);try{const{error:f}=await a.from("tasks").insert([{user_id:s.id,title:m,subject:j,priority:i,due_date:_||new Date().toISOString()}]);if(f)throw f;R.success(d("dashboard.tasks.successAdd")),r(!1),M(),P()}catch{R.error(d("dashboard.tasks.errorAdd"))}finally{o(!1)}}},M=()=>{b(""),w(""),y("medium"),q("")},O=u=>new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric"});return e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:d("dashboard.tasks.title")}),e.jsxs(Ne,{open:n,onOpenChange:r,children:[e.jsx(we,{asChild:!0,children:e.jsxs(F,{variant:"ghost",size:"sm",className:"text-primary gap-1.5",children:[e.jsx(fe,{className:"h-4 w-4"}),d("dashboard.tasks.addTask")]})}),e.jsxs(_e,{className:"sm:max-w-[425px]",children:[e.jsx(ke,{children:e.jsx(De,{children:d("dashboard.tasks.addNewTask")})}),e.jsxs("form",{onSubmit:z,className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"title",children:d("dashboard.tasks.taskTitle")}),e.jsx(I,{id:"title",placeholder:d("dashboard.tasks.titlePlaceholder"),value:m,onChange:u=>b(u.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"subject",children:d("dashboard.tasks.subject")}),e.jsx(I,{id:"subject",placeholder:d("dashboard.tasks.subjectPlaceholder"),value:j,onChange:u=>w(u.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"priority",children:d("dashboard.tasks.priority")}),e.jsxs(Ce,{value:i,onValueChange:y,children:[e.jsx(Ae,{id:"priority",children:e.jsx(qe,{placeholder:d("dashboard.tasks.selectPriority")})}),e.jsxs(Pe,{children:[e.jsx(W,{value:"low",children:d("dashboard.tasks.low")}),e.jsx(W,{value:"medium",children:d("dashboard.tasks.medium")}),e.jsx(W,{value:"high",children:d("dashboard.tasks.high")})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"due_date",children:d("dashboard.tasks.dueDate")}),e.jsx(I,{id:"due_date",type:"date",value:_,onChange:u=>q(u.target.value)})]})]}),e.jsx(Se,{className:"pt-4",children:e.jsxs(F,{type:"submit",disabled:h,children:[h&&e.jsx(Q,{className:"mr-2 h-4 w-4 animate-spin"}),d("dashboard.tasks.addTask")]})})]})]})]})]}),e.jsx("div",{className:"space-y-3",children:x?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(Q,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(V,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d("dashboard.tasks.noTasks")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:d("dashboard.tasks.tasksWillAppear")})]}):c.map((u,f)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50 hover:bg-muted transition-colors cursor-pointer group animate-slide-up",style:{animationDelay:`${f*.1}s`,opacity:0},children:[e.jsx("div",{className:N("p-2 rounded-lg border",ze[u.priority]),children:u.priority==="high"?e.jsx(be,{className:"h-4 w-4"}):e.jsx(V,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:u.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[u.subject&&`${u.subject} â€¢ `,O(u.due_date)]})]}),e.jsx(je,{className:"h-4 w-4 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity"})]},u.id))})]})}function Oe(){var i;const{supabase:a,user:s}=C(),d=ye(),{t:c}=A(),[p,x]=l.useState(null),[t,h]=l.useState({notesCount:0,flashcardsCount:0,papersCount:0,streak:0}),[o,n]=l.useState(!0),[r,m]=l.useState(null),b=new Date().getHours(),j=b<12?c("dashboard.welcome.goodMorning"):b<18?c("dashboard.welcome.goodAfternoon"):c("dashboard.welcome.goodEvening");l.useEffect(()=>{if(!s)return;(async()=>{try{const{data:_}=await a.from("profiles").select("full_name, email").eq("id",s.id).single();_&&x(_);const[q,P,z,M,O,u,f,Z,ee,te,se,ae,re,ie,oe]=await Promise.all([a.from("notes").select("*",{count:"exact",head:!0}).eq("user_id",s.id),a.from("flashcards").select("*",{count:"exact",head:!0}).eq("user_id",s.id),a.from("past_papers").select("*",{count:"exact",head:!0}).eq("user_id",s.id),a.from("notes").select("created_at, updated_at").eq("user_id",s.id),a.from("flashcards").select("created_at, updated_at, last_reviewed").eq("user_id",s.id),a.from("ai_usage_tracking").select("created_at").eq("user_id",s.id),a.from("ai_chat_sessions").select("created_at, updated_at").eq("user_id",s.id),a.from("knowledge_organizers").select("created_at, updated_at").eq("user_id",s.id),a.from("past_papers").select("created_at, updated_at, completed_at").eq("user_id",s.id),a.from("homework").select("created_at, updated_at").eq("user_id",s.id),a.from("tasks").select("created_at, updated_at").eq("user_id",s.id),a.from("mind_maps").select("created_at, updated_at").eq("user_id",s.id),a.from("exam_submissions").select("created_at, submission_date").eq("user_id",s.id),a.from("study_sessions").select("date, created_at").eq("user_id",s.id),a.from("extracurriculars").select("created_at, updated_at").eq("user_id",s.id)]),$=v=>`${v.getFullYear()}-${String(v.getMonth()+1).padStart(2,"0")}-${String(v.getDate()).padStart(2,"0")}`,D=new Set,g=(v,L)=>{(v||[]).forEach(k=>{L.forEach(S=>{if(k[S])try{D.add($(new Date(k[S])))}catch{}})})};g(M.data,["created_at","updated_at"]),g(O.data,["created_at","updated_at","last_reviewed"]),g(u.data,["created_at"]),g(f.data,["created_at","updated_at"]),g(Z.data,["created_at","updated_at"]),g(ee.data,["created_at","updated_at","completed_at"]),g(te.data,["created_at","updated_at"]),g(se.data,["created_at","updated_at"]),g(ae.data,["created_at","updated_at"]),g(re.data,["created_at","submission_date"]),g(ie.data,["date","created_at"]),g(oe.data,["created_at","updated_at"]);const de=(()=>{if(D.size===0)return 0;const v=$(new Date),L=$(new Date(Date.now()-864e5));let k;if(D.has(v))k=v;else if(D.has(L))k=L;else return 0;let S=0,T=k;for(;D.has(T);){S++;const[le,ue,me]=T.split("-").map(Number),he=new Date(le,ue-1,me-1);T=$(he)}return S})();h({notesCount:q.count||0,flashcardsCount:P.count||0,papersCount:z.count||0,streak:de});const ne=new Date(Date.now()-24*60*60*1e3).toISOString(),{count:ce}=await a.from("ai_usage_tracking").select("*",{count:"exact",head:!0}).eq("user_id",s.id).gt("created_at",ne),H=await $e(a);m({count:ce||0,limit:H?500:10,isPremium:H})}catch{}finally{n(!1)}})()},[s,a]);const w=(p==null?void 0:p.full_name)||((i=p==null?void 0:p.email)==null?void 0:i.split("@")[0])||"there";return e.jsxs("div",{className:"relative overflow-hidden rounded-2xl p-6 md:p-8",style:{background:"var(--gradient-primary)"},children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-white/5 rounded-full blur-2xl translate-y-1/2 -translate-x-1/2"}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary-foreground/80",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:j})]}),e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-primary-foreground",children:c("dashboard.welcome.welcomeBack",{name:w})}),e.jsx("p",{className:"text-primary-foreground/80 max-w-md",children:o?c("dashboard.welcome.loading"):t.notesCount+t.flashcardsCount+t.papersCount===0?c("dashboard.welcome.getStarted"):c("dashboard.welcome.makingProgress")}),r&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[e.jsxs("button",{onClick:()=>d("/ai-tutor"),className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white/20 hover:bg-white/30 text-white transition-colors text-sm font-medium backdrop-blur-md",children:[e.jsx(X,{className:"h-4 w-4"}),c("dashboard.welcome.chatWithAI"),e.jsx("span",{className:"text-xs opacity-80 ml-1",children:r.isPremium?`(${c("dashboard.welcome.lifetimeAccess")})`:`(${r.limit-r.count} ${c("common.left")})`})]}),!r.isPremium&&e.jsxs("button",{onClick:()=>d("/premium-dashboard"),className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-premium hover:bg-premium/90 text-premium-foreground transition-all shadow-lg shadow-premium/20 text-sm font-bold border border-premium-foreground/20 animate-pulse-subtle",children:[e.jsx(E,{className:"h-4 w-4"}),c("dashboard.welcome.unlockLifetime")]})]})]}),e.jsxs("div",{className:"group relative overflow-hidden bg-white/10 hover:bg-white/15 backdrop-blur-md border border-white/10 rounded-2xl p-4 transition-all duration-300 animate-scale-in self-start shadow-xl",role:"button",onClick:()=>d("/premium/leaderboard"),children:[e.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-white/5 rounded-full blur-xl -translate-y-1/2 translate-x-1/2 group-hover:bg-white/10 transition-colors"}),e.jsxs("div",{className:"relative z-10 flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl transition-all duration-300 ${t.streak>0?"bg-orange-500/20 text-orange-400 group-hover:bg-orange-500/30 ring-1 ring-orange-500/30":"bg-white/10 text-white/50"}`,children:e.jsx(ve,{className:`w-6 h-6 ${t.streak>0?"fill-orange-400 animate-pulse-subtle":""}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-foreground/70 text-xs font-medium uppercase tracking-wider mb-0.5",children:c("dashboard.welcome.studyStreak")}),e.jsxs("div",{className:"flex items-baseline gap-1.5",children:[e.jsx("span",{className:"text-2xl font-bold text-white tracking-tight",children:t.streak}),e.jsx("span",{className:"text-sm text-primary-foreground/80 font-medium",children:c("dashboard.welcome.days",{count:t.streak}).replace(/\d+\s/,"")})]})]})]})]})]})})]})}function tt(){const{supabase:a,user:s}=C(),[d,c]=l.useState({}),[p,x]=l.useState(!0),{t}=A(),h=[{icon:Y,title:t("features.examNotes.title"),description:t("features.examNotes.description"),countLabel:t("nav.notes").toLowerCase(),path:"/notes",color:"primary",tableName:"notes"},{icon:G,title:t("features.flashcards.title"),description:t("features.flashcards.description"),countLabel:t("nav.flashcards").toLowerCase(),path:"/flashcards",color:"secondary",tableName:"flashcards"},{icon:J,title:t("features.pastPapers.title"),description:t("features.pastPapers.description"),countLabel:t("nav.pastPapers").toLowerCase(),path:"/past-papers",color:"accent",tableName:"past_papers"},{icon:X,title:t("features.knowledgeOrganisers.title"),description:t("features.knowledgeOrganisers.description"),countLabel:t("nav.knowledge").toLowerCase(),path:"/knowledge",color:"primary",tableName:"knowledge_organizers"},{icon:K,title:t("features.extracurriculars.title"),description:t("features.extracurriculars.description"),countLabel:t("nav.extracurricular").toLowerCase(),path:"/extracurricular",color:"premium",tableName:"extracurriculars"},{icon:E,title:t("features.aiQuestions.title"),description:t("features.aiQuestions.description"),countLabel:"questions",path:"/ai-tutor",color:"premium",tableName:void 0}];l.useEffect(()=>{if(!s)return;(async()=>{try{const r={};for(const m of h)if(m.tableName){const{count:b,error:j}=await a.from(m.tableName).select("*",{count:"exact",head:!0}).eq("user_id",s.id);j||(r[m.tableName]=b||0)}c(r)}catch{}finally{x(!1)}})()},[s,a]);const o=h.map(n=>{const r=n.tableName&&d[n.tableName]||0;return{...n,count:r,progress:void 0}});return e.jsx(Le,{children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsx("section",{className:"animate-fade-in",children:e.jsx(Oe,{})}),e.jsxs("section",{children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h2",{className:"text-xl font-bold text-foreground",children:t("common.quickAccess")})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map((n,r)=>e.jsx("div",{className:"animate-slide-up",style:{animationDelay:`${r*.1}s`,opacity:0},children:e.jsx(Be,{...n})},n.title))})]}),e.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"animate-slide-up",style:{animationDelay:"0.2s",opacity:0},children:e.jsx(Ee,{})}),e.jsx("div",{className:"animate-slide-up",style:{animationDelay:"0.3s",opacity:0},children:e.jsx(Me,{})})]}),e.jsx("section",{className:"animate-slide-up",style:{animationDelay:"0.4s",opacity:0},children:e.jsx(Fe,{})})]})})}export{tt as default};
