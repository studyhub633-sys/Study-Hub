import{j as e,L as y,z as W,a4 as C,H as X,aw as P,aN as Z,aE as $}from"./ui-vendor-BhfTkEdL.js";import{h as ee,A as x}from"./AppLayout-DyYlXr0M.js";import{B as n}from"./badge-DYsJC1XO.js";import{u as se,a as A,B as T}from"./index-BWIqSF27.js";import{C as h,a as re,b as te,c as ae,d as _}from"./card-af-OxtCo.js";import{I as le}from"./input-BIlMOJxd.js";import{S as j,a as p,b as f,c as g,d as a}from"./select-nauIKzyc.js";import{u as ie,r as t}from"./react-vendor-Do86TxWo.js";import"./AnimatedLogoIcon-BNgjqHPG.js";import"./sheet-ByTzbT0g.js";import"./supabase-vendor-CklQTOeK.js";import"./query-vendor-C5_dwEAA.js";import"./index-BdQq_4o_.js";import"./index-CTYjvzHW.js";function Ne(){const{supabase:o,user:i}=se(),b=ie(),[k,B]=t.useState(!1),[L,F]=t.useState(!0),[l,E]=t.useState([]),[q,v]=t.useState(!0),[c,V]=t.useState(""),[d,H]=t.useState("All Subjects"),[m,I]=t.useState("All Boards"),[u,U]=t.useState("All Tiers");t.useEffect(()=>{i&&(z(),D())},[i]);const z=async()=>{if(!(!i||!o))try{const s=await ee(o);B(s),s||(A.error("This is a premium feature. Please upgrade to access."),b("/premium-dashboard"))}catch{}finally{F(!1)}},D=async()=>{if(i)try{v(!0);const{data:s,error:r}=await o.from("premium_predicted_papers").select("*").eq("is_premium",!0).order("created_at",{ascending:!1});if(r)throw r;E(s||[])}catch{A.error("Failed to load predicted papers.")}finally{v(!1)}},Q=()=>l.filter(s=>{var w;const r=!c||s.title.toLowerCase().includes(c.toLowerCase())||((w=s.subject)==null?void 0:w.toLowerCase().includes(c.toLowerCase())),G=d==="All Subjects"||s.subject===d,J=m==="All Boards"||s.exam_board===m,K=u==="All Tiers"||!s.tier||s.tier===u;return r&&G&&J&&K}),Y=()=>{const s=l.map(r=>r.subject).filter(r=>r!==null);return Array.from(new Set(s)).sort()},M=()=>{const s=l.map(r=>r.exam_board).filter(r=>r!==null);return Array.from(new Set(s)).sort()},N=s=>{s.file_url&&(s.file_type,window.open(s.file_url,"_blank"))};if(L)return e.jsx(x,{children:e.jsx("div",{className:"max-w-6xl mx-auto flex items-center justify-center h-[60vh]",children:e.jsx(y,{className:"h-8 w-8 animate-spin text-muted-foreground"})})});if(!k)return e.jsx(x,{children:e.jsxs("div",{className:"max-w-6xl mx-auto flex flex-col items-center justify-center h-[60vh] gap-4",children:[e.jsx(W,{className:"h-16 w-16 text-premium"}),e.jsx("h2",{className:"text-2xl font-bold",children:"Premium Feature"}),e.jsx("p",{className:"text-muted-foreground",children:"This feature is available for premium members only."}),e.jsx(T,{onClick:()=>b("/premium-dashboard"),children:"Upgrade to Premium"})]})});const S=Q(),O=Y(),R=M();return e.jsx(x,{children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"mb-8 animate-fade-in",children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-premium/10",children:e.jsx(C,{className:"h-6 w-6 text-premium"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"2026 Predicted Papers"}),e.jsx("p",{className:"text-muted-foreground",children:"Exclusive predicted exam papers available to premium members"})]})]})}),e.jsx("div",{className:"glass-card p-4 mb-6 animate-slide-up",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(X,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(le,{placeholder:"Search papers...",value:c,onChange:s=>V(s.target.value),className:"pl-9"})]}),e.jsxs(j,{value:d,onValueChange:H,children:[e.jsx(p,{children:e.jsx(f,{placeholder:"All Subjects"})}),e.jsxs(g,{children:[e.jsx(a,{value:"All Subjects",children:"All Subjects"}),O.map(s=>e.jsx(a,{value:s,children:s},s))]})]}),e.jsxs(j,{value:m,onValueChange:I,children:[e.jsx(p,{children:e.jsx(f,{placeholder:"All Boards"})}),e.jsxs(g,{children:[e.jsx(a,{value:"All Boards",children:"All Boards"}),R.map(s=>e.jsx(a,{value:s,children:s},s))]})]}),e.jsxs(j,{value:u,onValueChange:U,children:[e.jsx(p,{children:e.jsx(f,{placeholder:"All Tiers"})}),e.jsxs(g,{children:[e.jsx(a,{value:"All Tiers",children:"All Tiers"}),e.jsx(a,{value:"Foundation",children:"Foundation"}),e.jsx(a,{value:"Higher",children:"Higher"})]})]})]})}),q?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(y,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):S.length===0?e.jsxs(h,{className:"p-12 text-center",children:[e.jsx(P,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:l.length===0?"No Predicted Papers Available Yet":"No Papers Match Your Filters"}),e.jsx("p",{className:"text-muted-foreground",children:l.length===0?"Check back soon for exclusive 2026 predicted papers!":"Try adjusting your search or filter criteria."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:S.map(s=>e.jsxs(h,{className:"hover-lift transition-all cursor-pointer group",onClick:()=>N(s),children:[e.jsxs(re,{children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx(n,{variant:"secondary",className:"bg-premium/10 text-premium",children:s.year||2026}),s.file_type==="link"?e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(P,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(te,{className:"text-lg line-clamp-2 group-hover:text-premium transition-colors",children:s.title}),e.jsxs(ae,{className:"flex flex-wrap gap-2 mt-2",children:[s.subject&&e.jsx(n,{variant:"outline",children:s.subject}),s.exam_board&&e.jsx(n,{variant:"outline",children:s.exam_board}),s.tier&&e.jsx(n,{variant:"outline",children:s.tier})]})]}),e.jsxs(_,{children:[s.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:s.description}),e.jsxs(T,{variant:"outline",size:"sm",className:"w-full group-hover:bg-premium group-hover:text-premium-foreground",onClick:r=>{r.stopPropagation(),N(s)},children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"View Paper"]})]})]},s.id))}),l.length>0&&e.jsx(h,{className:"mt-8 bg-premium/5 border-premium/20",children:e.jsx(_,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(C,{className:"h-5 w-5 text-premium mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground mb-1",children:"Exclusive Premium Content"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"These predicted papers are exclusively available to premium members. They are designed to help you prepare for your 2026 exams with the most up-to-date predictions."})]})]})})})]})})}export{Ne as default};
