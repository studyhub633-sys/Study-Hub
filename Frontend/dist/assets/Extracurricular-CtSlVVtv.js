import{j as e,L as J,v as D,N as K,O as X,Q as _,V as y,W as ee,Y as S,Z as se,$ as re,U as te,a0 as ae,a1 as ie,a2 as V,A as I,s as ne}from"./ui-vendor-C99L-hD9.js";import{A as O}from"./AppLayout-Cj9qCd-S.js";import{B as x}from"./button-BI303P4O.js";import{D as le,b as ce,c as oe,d as de,e as me}from"./dialog-CEcMBp43.js";import{I as f}from"./input-BxB9-wok.js";import{L as m}from"./label-DzeH2NVe.js";import{P as ue}from"./progress-DQRgIRrL.js";import{S as z,a as B,b as M,c as U,d as W}from"./select-BBwDTOKx.js";import{T as xe}from"./textarea-CQT9Mgar.js";import{u as he,b as pe,c as v}from"./index-VAQ1YWYL.js";import{r as u}from"./react-vendor-CW_qxVlV.js";import"./sheet-TbKMu7Qe.js";import"./index-BdQq_4o_.js";import"./index-ORJz1BqE.js";import"./supabase-vendor-BFJX04bJ.js";import"./query-vendor-CVP6rs-5.js";const C={work:{icon:ie,color:"primary",label:"Work Experience"},volunteer:{icon:ae,color:"secondary",label:"Volunteering"},club:{icon:te,color:"accent",label:"Clubs & Societies"},sports:{icon:_,color:"primary",label:"Sports"},arts:{icon:re,color:"premium",label:"Arts & Music"},leadership:{icon:y,color:"accent",label:"Leadership"},academic:{icon:se,color:"secondary",label:"Academic"}};function He(){var q;const{supabase:h,user:n}=he(),{toast:i}=pe(),[c,g]=u.useState([]),[N,b]=u.useState(!0),[t,E]=u.useState(null),[R,w]=u.useState(!1),[j,L]=u.useState(null),[a,d]=u.useState({name:"",description:"",category:"",hours:"",targetHours:"",start_date:"",end_date:"",achievements:"",external_link:""});u.useEffect(()=>{n&&k()},[n]);const k=async()=>{if(n)try{b(!0);const{data:s,error:r}=await h.from("extracurriculars").select("*").eq("user_id",n.id).order("start_date",{ascending:!1});if(r)throw r;g(s||[])}catch{i({title:"Error",description:"Failed to load activities. Please try again.",variant:"destructive"})}finally{b(!1)}},F=()=>{L(null),d({name:"",description:"",category:"",hours:"",targetHours:"",start_date:"",end_date:"",achievements:"",external_link:""}),w(!0)},H=s=>{var r;L(s),d({name:s.name,description:s.description||"",category:s.category||"",hours:s.hours.toString(),targetHours:"",start_date:s.start_date||"",end_date:s.end_date||"",achievements:((r=s.achievements)==null?void 0:r.join(", "))||"",external_link:s.external_link||""}),w(!0)},Y=async()=>{var s;if(!n||!a.name.trim()){i({title:"Error",description:"Activity name is required",variant:"destructive"});return}try{const r=a.achievements?a.achievements.split(",").map(l=>l.trim()).filter(Boolean):[],o={user_id:n.id,name:a.name,description:a.description||null,category:a.category||null,hours:parseInt(a.hours)||0,start_date:a.start_date||null,end_date:a.end_date||null,achievements:r.length>0?r:null,external_link:((s=a.external_link)==null?void 0:s.trim())||null};if(j){const{error:l}=await h.from("extracurriculars").update(o).eq("id",j.id).eq("user_id",n.id);if(l)throw l;i({title:"Success",description:"Activity updated successfully"})}else{const{error:l}=await h.from("extracurriculars").insert(o);if(l)throw l;i({title:"Success",description:"Activity created successfully"})}w(!1),k()}catch(r){i({title:"Error",description:r.message||"Failed to save activity. Please try again.",variant:"destructive"})}},P=async s=>{if(n&&confirm("Are you sure you want to delete this activity?"))try{const{error:r}=await h.from("extracurriculars").delete().eq("id",s).eq("user_id",n.id);if(r)throw r;i({title:"Success",description:"Activity deleted successfully"}),(t==null?void 0:t.id)===s&&E(null),k()}catch{i({title:"Error",description:"Failed to delete activity. Please try again.",variant:"destructive"})}},$=async(s,r)=>{if(!n||!r||r<=0){i({title:"Error",description:"Please enter a valid number of hours",variant:"destructive"});return}try{const o=c.find(A=>A.id===s);if(!o)return;const{error:l}=await h.from("extracurriculars").update({hours:o.hours+r}).eq("id",s).eq("user_id",n.id);if(l)throw l;i({title:"Success",description:`${r} hours logged successfully`}),k()}catch{i({title:"Error",description:"Failed to log hours. Please try again.",variant:"destructive"})}},Q=c.reduce((s,r)=>s+r.hours,0),G=c.reduce((s,r)=>{var o;return s+(((o=r.achievements)==null?void 0:o.length)||0)},0),T=s=>s?new Date(s).toLocaleDateString("en-US",{month:"short",year:"numeric"}):"";return N?e.jsx(O,{children:e.jsx("div",{className:"max-w-6xl mx-auto flex items-center justify-center h-[60vh]",children:e.jsx(J,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}):e.jsxs(O,{children:[e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-foreground",children:"Extracurricular Tracker"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Track your activities, hours, and achievements"})]}),e.jsxs(x,{onClick:F,children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Add Activity"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 animate-slide-up",style:{animationDelay:"0.1s",opacity:0},children:[{label:"Total Hours",value:Q,icon:K,color:"primary"},{label:"Activities",value:c.length,icon:X,color:"secondary"},{label:"Achievements",value:G,icon:_,color:"accent"},{label:"Active",value:c.filter(s=>!s.end_date).length,icon:y,color:"premium"}].map(s=>e.jsx("div",{className:"glass-card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:v("p-2 rounded-lg",s.color==="primary"&&"bg-primary/10",s.color==="secondary"&&"bg-secondary/10",s.color==="accent"&&"bg-accent/20",s.color==="premium"&&"bg-premium/10"),children:e.jsx(s.icon,{className:v("h-5 w-5",s.color==="primary"&&"text-primary",s.color==="secondary"&&"text-secondary",s.color==="accent"&&"text-accent-foreground",s.color==="premium"&&"text-premium")})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-foreground",children:s.value}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.label})]})]})},s.label))}),e.jsxs("div",{className:"glass-card p-6 animate-slide-up",style:{animationDelay:"0.15s",opacity:0},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ee,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"font-semibold text-foreground",children:"Find Opportunities"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Explore work experience, volunteering, and skill-building opportunities"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[{name:"Do-it",url:"https://doit.life/volunteer",desc:"Find volunteering opportunities near you",category:"Volunteering"},{name:"vInspired",url:"https://vinspired.com",desc:"Youth volunteering and social action",category:"Volunteering"},{name:"Springpod",url:"https://www.springpod.com",desc:"Virtual work experience programmes",category:"Work Experience"},{name:"RateMyPlacement",url:"https://www.ratemyplacement.co.uk",desc:"Student placements and internships",category:"Work Experience"},{name:"Investin",url:"https://investin.org",desc:"Career experience programmes",category:"Work Experience"},{name:"NCS",url:"https://wearencs.com",desc:"National Citizen Service programmes",category:"Leadership"},{name:"DofE",url:"https://www.dofe.org",desc:"Duke of Edinburgh Award",category:"Skills"},{name:"Young Enterprise",url:"https://www.young-enterprise.org.uk",desc:"Business and entrepreneurship skills",category:"Skills"}].map(s=>e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"group p-3 rounded-lg bg-muted/50 hover:bg-muted border border-transparent hover:border-primary/20 transition-all duration-200",children:e.jsx("div",{className:"flex items-start justify-between gap-2",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"font-medium text-sm text-foreground group-hover:text-primary transition-colors",children:s.name}),e.jsx(S,{className:"h-3 w-3 text-muted-foreground group-hover:text-primary opacity-0 group-hover:opacity-100 transition-all"})]}),e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-primary/10 text-primary mt-1 inline-block",children:s.category}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:s.desc})]})})},s.name))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 animate-slide-up",style:{animationDelay:"0.2s",opacity:0},children:c.length===0?e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsx(y,{className:"h-16 w-16 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No activities yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first activity to get started"}),e.jsxs(x,{onClick:F,children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Add Activity"]})]}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"font-semibold text-foreground mb-6",children:"Activity Timeline"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-border"}),e.jsx("div",{className:"space-y-6",children:c.map(s=>{const r=C[s.category||""]||{icon:y,color:"primary",label:s.category||"Other"},o=r.icon,l=100,A=Math.min(s.hours/l*100,100);return e.jsxs("div",{className:"relative pl-12 cursor-pointer group",onClick:()=>E(s),children:[e.jsx("div",{className:v("absolute left-0 top-1 w-8 h-8 rounded-full flex items-center justify-center border-2 border-background transition-transform group-hover:scale-110",r.color==="primary"&&"bg-primary",r.color==="secondary"&&"bg-secondary",r.color==="accent"&&"bg-accent",r.color==="premium"&&"bg-premium"),children:e.jsx(o,{className:"h-4 w-4 text-primary-foreground"})}),e.jsxs("div",{className:v("p-4 rounded-xl transition-all duration-200",(t==null?void 0:t.id)===s.id?"bg-primary/5 border border-primary/20":"bg-muted/50 hover:bg-muted"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:v("text-xs font-medium px-2 py-0.5 rounded-full",r.color==="primary"&&"bg-primary/10 text-primary",r.color==="secondary"&&"bg-secondary/10 text-secondary",r.color==="accent"&&"bg-accent/20 text-accent-foreground",r.color==="premium"&&"bg-premium/10 text-premium"),children:r.label}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[T(s.start_date),s.end_date&&` - ${T(s.end_date)}`]})]}),e.jsx("h4",{className:"font-semibold text-foreground",children:s.name}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:s.description}),s.external_link&&e.jsxs("a",{href:s.external_link,target:"_blank",rel:"noopener noreferrer",onClick:p=>p.stopPropagation(),className:"inline-flex items-center gap-1 text-xs text-primary hover:underline mt-1",children:[e.jsx(S,{className:"h-3 w-3"}),"View Link"]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(x,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:p=>{p.stopPropagation(),H(s)},children:e.jsx(V,{className:"h-4 w-4"})}),e.jsx(x,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:p=>{p.stopPropagation(),P(s.id)},children:e.jsx(I,{className:"h-4 w-4 text-destructive"})}),e.jsx(ne,{className:"h-5 w-5 text-muted-foreground group-hover:text-foreground transition-colors"})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[e.jsxs("span",{className:"text-muted-foreground",children:[s.hours," / ",l," hours"]}),e.jsxs("span",{className:"font-medium text-foreground",children:[Math.round(A),"%"]})]}),e.jsx(ue,{value:A,className:"h-1.5"})]}),s.achievements&&s.achievements.length>0&&e.jsx("div",{className:"flex items-center gap-2 mt-3 flex-wrap",children:s.achievements.map((p,Z)=>e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-full bg-accent/20 text-accent-foreground",children:[e.jsx(_,{className:"h-3 w-3"}),p]},Z))})]})]},s.id)})})]})]})}),e.jsxs("div",{className:"lg:col-span-1 space-y-6 animate-slide-up",style:{animationDelay:"0.3s",opacity:0},children:[t?e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Activity Details"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(x,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>H(t),children:e.jsx(V,{className:"h-4 w-4"})}),e.jsx(x,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>P(t.id),children:e.jsx(I,{className:"h-4 w-4 text-destructive"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Name"}),e.jsx("p",{className:"font-medium text-foreground",children:t.name})]}),t.description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Description"}),e.jsx("p",{className:"text-foreground",children:t.description})]}),t.external_link&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"External Link"}),e.jsxs("a",{href:t.external_link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-primary hover:underline",children:[e.jsx(S,{className:"h-4 w-4"}),t.external_link]})]}),t.category&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Category"}),e.jsx("p",{className:"font-medium text-foreground",children:((q=C[t.category])==null?void 0:q.label)||t.category})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Hours Logged"}),e.jsxs("p",{className:"font-medium text-foreground",children:[t.hours," hours"]})]}),e.jsxs("div",{className:"pt-4 border-t border-border",children:[e.jsx("p",{className:"text-sm font-medium text-foreground mb-2",children:"Achievements"}),t.achievements&&t.achievements.length>0?e.jsx("div",{className:"space-y-1",children:t.achievements.map((s,r)=>e.jsxs("div",{className:"text-sm text-foreground flex items-center gap-2",children:[e.jsx(_,{className:"h-4 w-4 text-accent-foreground"}),s]},r))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No achievements yet"})]})]})]}):e.jsxs("div",{className:"glass-card p-6 text-center",children:[e.jsx(y,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-3"}),e.jsx("h3",{className:"font-semibold text-foreground mb-1",children:"Select an activity"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click on any activity to view details"})]}),c.length>0&&e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"font-semibold text-foreground mb-4",children:"Log Hours"}),e.jsx(ge,{activities:c,onLogHours:$})]})]})]})]}),e.jsx(le,{open:R,onOpenChange:w,children:e.jsxs(ce,{className:"sm:max-w-[500px]",children:[e.jsxs(oe,{children:[e.jsx(de,{children:j?"Edit Activity":"Add New Activity"}),e.jsx(me,{children:j?"Update your activity details below":"Track a new extracurricular activity or work experience."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"name",children:"Activity Name *"}),e.jsx(f,{id:"name",value:a.name,onChange:s=>d({...a,name:s.target.value}),placeholder:"e.g., Volunteer at Local Library"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"category",children:"Category"}),e.jsxs(z,{value:a.category,onValueChange:s=>d({...a,category:s}),children:[e.jsx(B,{children:e.jsx(M,{placeholder:"Select category"})}),e.jsx(U,{children:Object.entries(C).map(([s,r])=>e.jsx(W,{value:s,children:r.label},s))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"description",children:"Description"}),e.jsx(xe,{id:"description",value:a.description,onChange:s=>d({...a,description:s.target.value}),placeholder:"Describe your responsibilities..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"hours",children:"Hours Logged"}),e.jsx(f,{id:"hours",type:"number",value:a.hours,onChange:s=>d({...a,hours:s.target.value}),placeholder:"0"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"start_date",children:"Start Date"}),e.jsx(f,{id:"start_date",type:"date",value:a.start_date,onChange:s=>d({...a,start_date:s.target.value})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"end_date",children:"End Date (optional)"}),e.jsx(f,{id:"end_date",type:"date",value:a.end_date,onChange:s=>d({...a,end_date:s.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"achievements",children:"Achievements (comma-separated)"}),e.jsx(f,{id:"achievements",value:a.achievements,onChange:s=>d({...a,achievements:s.target.value}),placeholder:"e.g., Award winner, Team leader"})]}),e.jsxs(x,{className:"w-full mt-2",onClick:Y,children:[j?"Update":"Add"," Activity"]})]})]})})]})}function ge({activities:h,onLogHours:n}){const[i,c]=u.useState(""),[g,N]=u.useState(""),b=t=>{t.preventDefault(),i&&g&&(n(i,parseFloat(g)),N(""))};return e.jsxs("form",{onSubmit:b,className:"space-y-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"quick-activity",children:"Activity"}),e.jsxs(z,{value:i,onValueChange:c,children:[e.jsx(B,{children:e.jsx(M,{placeholder:"Select activity"})}),e.jsx(U,{children:h.map(t=>e.jsx(W,{value:t.id,children:t.name},t.id))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"quick-hours",children:"Hours"}),e.jsx(f,{id:"quick-hours",type:"number",step:"0.5",value:g,onChange:t=>N(t.target.value),placeholder:"2"})]}),e.jsxs(x,{type:"submit",className:"w-full",disabled:!i||!g,children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Log Hours"]})]})}export{He as default};
